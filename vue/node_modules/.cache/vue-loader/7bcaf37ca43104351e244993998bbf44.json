{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\ordemCompra\\ModalAddAndUpdateMaterials.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\ordemCompra\\ModalAddAndUpdateMaterials.vue","mtime":1680609356651},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHZhbGlkYXRpb25SdWxlcyBmcm9tICIuLi8uLi9taXhpbnMvdmFsaWRhdGlvblJ1bGVzIjsNCmltcG9ydCBBdXRvQ29tcGxldGVGaWx0ZXJBc3luYyBmcm9tICJAL2NvbXBvbmVudHMvQXV0b0NvbXBsZXRlRmlsdGVyQXN5bmMiOw0KaW1wb3J0IE1vbmV5IGZyb20gIkAvY29tcG9uZW50cy9Nb25leSI7DQoNCmNvbnN0IG1vZHVsZVByb2Zvcm1hTWF0ZXJpYWlzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoDQogICJNb2R1bGVQcm9mb3JtYU1hdGVyaWFpcyINCik7DQpjb25zdCBtb2R1bGVPcmRlbURlQ29tcHJhTWF0ZXJpYWxzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoDQogICJNb2R1bGVPcmRlbURlQ29tcHJhTWF0ZXJpYWxzIg0KKTsNCmNvbnN0IG1vZHVsZUVzdG9xdWUgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiTW9kdWxlRGlzdHJpYnV0aW9uU3RvY2siKTsNCmNvbnN0IG1vZHVsZU9yZGVtRGVDb21wcmEgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiTW9kdWxlT3JkZW1EZUNvbXByYSIpOw0KY29uc3QgbW9kdWxlQ29sZXRhcyA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKCJNb2R1bGVDb2xldGFzIik7DQpjb25zdCBtb2R1bGVDb2xldGFzTWF0ZXJpYWlzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoDQogICJNb2R1bGVDb2xldGFzTWF0ZXJpYWxzIg0KKTsNCmNvbnN0IG1vZHVsZU9yZGVtQ29tcHJhTWF0ZXJpYWlzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoDQogICJNb2R1bGVPcmRlbURlQ29tcHJhTWF0ZXJpYWxzIg0KKTsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogWyJwdXJjaGFzZU9yZGVySWQiLCAicHJvZm9ybWFJZCIsICJpc0Rpc3RyaWJ1dGlvbiIsICJjdXJyZW5jeSJdLA0KICBtaXhpbnM6IFt2YWxpZGF0aW9uUnVsZXNdLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsb2FkaW5nQnRuU2F2ZTogbnVsbCwNCiAgICAgIHB1cmNoYXNlTWF0ZXJpYWxzOiB7fSwNCiAgICAgIGlkOiBudWxsLA0KICAgICAgcHJvZm9ybWFNYXRlcmlhbHM6IFtdLA0KICAgICAgbW9kYWxBZGRNYXRlcmlhbDogZmFsc2UsDQogICAgICBkaWFsb2dFcnJvckNyZWF0ZU1hdGVyaWFsOiBmYWxzZSwNCiAgICAgIHZhbG9yUHJvdmlzaW9uYWRvQW50ZXJpb3I6IG51bGwsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC4uLm1vZHVsZVByb2Zvcm1hTWF0ZXJpYWlzLm1hcEFjdGlvbnMoew0KICAgICAgZ2V0TWF0ZXJpYWxzRGlzdGluY3RCeVB1cmNoYXNlT3JkZXI6DQogICAgICAgICJnZXRNYXRlcmlhbHNEaXN0aW5jdEJ5UHVyY2hhc2VPcmRlciIsDQogICAgfSksDQoNCiAgICAuLi5tb2R1bGVPcmRlbURlQ29tcHJhTWF0ZXJpYWxzLm1hcEFjdGlvbnMoew0KICAgICAgY3JlYXRlUHVyY2hhc2VNYXRlcmlhbDogImNyZWF0ZSIsDQogICAgICB1cGRhdGVQdXJjaGFzZU1hdGVyaWFsOiAidXBkYXRlIiwNCiAgICAgIGdldEJ5SWQ6ICJnZXRCeUlkIiwNCiAgICB9KSwNCg0KICAgIC4uLm1vZHVsZUVzdG9xdWUubWFwQWN0aW9ucyh7DQogICAgICBnZXRBbGxTZWxlY3RlZDogImdldEFsbFNlbGVjdGVkIiwNCiAgICAgIGdldEFzeW5jQnlNYXRlcmlhbDogImdldEFzeW5jQnlNYXRlcmlhbCIsDQogICAgfSksDQoNCiAgICAuLi5tb2R1bGVPcmRlbURlQ29tcHJhLm1hcEFjdGlvbnMoew0KICAgICAgc2V0SWZJc1VwZGF0ZWQ6ICJzZXRJZklzVXBkYXRlZCIsDQogICAgfSksDQoNCiAgICAuLi5tb2R1bGVDb2xldGFzTWF0ZXJpYWlzLm1hcEFjdGlvbnMoew0KICAgICAgZ2V0QWxsQnlQdXJjaGFzZUNvbGxlY3Rpb246ICJnZXRBbGxCeVB1cmNoYXNlQ29sbGVjdGlvbiIsDQogICAgICBjcmVhdGVNYXRlcmlhbDogImNyZWF0ZSIsDQogICAgICB1cGRhdGVRdWFudGlkYWRlUHJvdmlzaW9uYWRhTWF0ZXJpYWw6DQogICAgICAgICJ1cGRhdGVRdWFudGlkYWRlUHJvdmlzaW9uYWRhTWF0ZXJpYWwiLA0KICAgIH0pLA0KDQogICAgLi4ubW9kdWxlQ29sZXRhcy5tYXBBY3Rpb25zKHsNCiAgICAgIGdldEFsbEJ5UHVyY2hhc2U6ICJnZXRBbGxCeVB1cmNoYXNlIiwNCiAgICAgIGNyZWF0ZUNvbGV0YTogImNyZWF0ZSIsDQogICAgICBnZXRBbGxCeVB1cmNoYXNlV2hlbklzU3RhdHVzTm90Q29uY2x1aWRvOg0KICAgICAgICAiZ2V0QWxsQnlQdXJjaGFzZVdoZW5Jc1N0YXR1c05vdENvbmNsdWlkbyIsDQogICAgfSksDQoNCiAgICAuLi5tb2R1bGVPcmRlbUNvbXByYU1hdGVyaWFpcy5tYXBBY3Rpb25zKHsNCiAgICAgIGlzTWF0ZXJpYWxBbHJlYWR5SW5MaXN0OiAiaXNNYXRlcmlhbEFscmVhZHlJbkxpc3QiLA0KICAgIH0pLA0KDQogICAgY2xvc2VNb2RhbEVycm9yQWRkTWF0ZXJpYWwoKSB7DQogICAgICB0aGlzLmRpYWxvZ0Vycm9yQ3JlYXRlTWF0ZXJpYWwgPSBmYWxzZTsNCiAgICB9LA0KDQogICAgYXN5bmMgbG9hZE1hdGVyaWFscyh2YWwpIHsNCiAgICAgIGlmICh0aGlzLmlzRGlzdHJpYnV0aW9uKSByZXR1cm4gYXdhaXQgdGhpcy5sb2FkTWF0ZXJpYWxzRGlzdHJpYnV0aW9uKHZhbCk7DQogICAgICBlbHNlIHJldHVybiBhd2FpdCB0aGlzLmxvYWRNYXRlcmlhbHNQcm9mb3JtYSh2YWwpOw0KICAgIH0sDQoNCiAgICBnZXRDdXJyZW5jeSgpIHsNCiAgICAgIGlmICh0aGlzLmN1cnJlbmN5KSByZXR1cm4gdGhpcy5jdXJyZW5jeTsNCiAgICAgIGVsc2UgcmV0dXJuICJSJCI7DQogICAgfSwNCg0KICAgIGFzeW5jIGxvYWRNYXRlcmlhbHNEaXN0cmlidXRpb24odmFsKSB7DQogICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEFsbFNlbGVjdGVkKHsNCiAgICAgICAgc2VhcmNoVGV4dDogdmFsLA0KICAgICAgICBwdXJjaGFzZU9yZGVySWQ6IHRoaXMucHVyY2hhc2VPcmRlcklkLA0KICAgICAgfSk7DQogICAgICB2YXIgdGVzdGUgPSBbXTsNCiAgICAgIHJlc3BvbnNlLmRhdGEucmVzdWx0Lml0ZW1zLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgdGVzdGUucHVzaCh7DQogICAgICAgICAgdmFsdWU6IGVsZW1lbnQubWF0ZXJpYWxJZCwNCiAgICAgICAgICB0ZXh0OiBlbGVtZW50Lm1hdGVyaWFsRGVzY3JpcHRpb24sDQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgICByZXR1cm4gdGVzdGU7DQogICAgfSwNCg0KICAgIGFzeW5jIGxvYWRNYXRlcmlhbHNQcm9mb3JtYSh2YWwpIHsNCiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldE1hdGVyaWFsc0Rpc3RpbmN0QnlQdXJjaGFzZU9yZGVyKHsNCiAgICAgICAgc2VhcmNoVGV4dDogdmFsLA0KICAgICAgICBwdXJjaGFzZU9yZGVySWQ6IHRoaXMucHVyY2hhc2VPcmRlcklkLA0KICAgICAgICBwcm9mb3JtYUlkOiB0aGlzLnByb2Zvcm1hSWQsDQogICAgICB9KTsNCg0KICAgICAgdGhpcy5wcm9mb3JtYU1hdGVyaWFscyA9IFtdOw0KICAgICAgaWYgKCFyZXN1bHQpIHJldHVybiB0aGlzLnByb2Zvcm1hTWF0ZXJpYWxzOw0KDQogICAgICByZXN1bHQuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICB0aGlzLnByb2Zvcm1hTWF0ZXJpYWxzLnB1c2goew0KICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmlkLA0KICAgICAgICAgIHRleHQ6IGVsZW1lbnQubWF0ZXJpYWxEZXNjcmlwdGlvbiwNCiAgICAgICAgICBtYXRlcmlhbElkOiBlbGVtZW50Lm1hdGVyaWFsSWQsDQogICAgICAgICAgcHJvZm9ybWFNYXRlcmlhbElkOiBlbGVtZW50LmlkLA0KICAgICAgICAgIHByb3Zpc2lvbmVkUXRkOiBlbGVtZW50LnByb3Zpc2lvbmVkUXRkLA0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgICAgcmV0dXJuIHRoaXMucHJvZm9ybWFNYXRlcmlhbHM7DQogICAgfSwNCg0KICAgIGFzeW5jIHNhdmVNYXRlcmlhbFB1cmNoYXNlKCkgew0KICAgICAgdmFyIGlkUHVyY2hhc2VPcmRlciA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCg0KICAgICAgdmFyIHBhcmFtcyA9IHsNCiAgICAgICAgaWREaXN0cmlidXRpb25NYXRlcmlhbDogdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5pZA0KICAgICAgICAgID8gdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5pZA0KICAgICAgICAgIDogMCwNCiAgICAgICAgaWRNYXRlcmlhbDogdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5tYXRlcmlhbElkLA0KICAgICAgICBwcm92aXNpb25lZFF0ZDogdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5wcm92aXNpb25lZFF0ZCwNCiAgICAgICAgcHVyY2hhc2VPcmRlckRpc3RyaWJ1dGlvbklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsDQogICAgICB9Ow0KDQogICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmlzTWF0ZXJpYWxBbHJlYWR5SW5MaXN0KHBhcmFtcyk7DQoNCiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdCkgew0KICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgIHRoaXMuZGlhbG9nRXJyb3JDcmVhdGVNYXRlcmlhbCA9IHRydWU7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfQ0KDQogICAgICBpZiAoIXRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmxvYWRpbmdCdG5TYXZlID0gdHJ1ZTsNCiAgICAgIHRoaXMucHVyY2hhc2VNYXRlcmlhbHMucHVyY2hhc2VPcmRlckRpc3RyaWJ1dGlvbklkID0NCiAgICAgICAgdGhpcy4kcm91dGUucGFyYW1zLmlkOw0KDQogICAgICBpZiAoIXRoaXMuaXNEaXN0cmlidXRpb24gJiYgdGhpcy5wcm9mb3JtYU1hdGVyaWFscy5sZW5ndGggPiAwKSB7DQogICAgICAgIGxldCBwcm9mb3JtYU1hdGVyaWFsID0gdGhpcy5wcm9mb3JtYU1hdGVyaWFscy5maWx0ZXIoDQogICAgICAgICAgKHgpID0+IHgudmFsdWUgPT0gdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5tYXRlcmlhbElkDQogICAgICAgIClbMF07DQoNCiAgICAgICAgdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5tYXRlcmlhbElkID0gcHJvZm9ybWFNYXRlcmlhbC5tYXRlcmlhbElkOw0KICAgICAgICB0aGlzLnB1cmNoYXNlTWF0ZXJpYWxzLnByb2Zvcm1hTWF0ZXJpYWxJZCA9DQogICAgICAgICAgcHJvZm9ybWFNYXRlcmlhbC5wcm9mb3JtYU1hdGVyaWFsSWQ7DQogICAgICB9DQoNCiAgICAgIHZhciByZXN1bHQgPSBudWxsOw0KICAgICAgaWYgKHRoaXMuaWQpIHsNCiAgICAgICAgdmFyIHBhcmFtZXRyb3MgPSB7DQogICAgICAgICAgcHVyY2hhc2VPcmRlckRpc3RyaWJ1dGlvbklkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQsDQogICAgICAgICAgbWF0ZXJpYWxJZDogdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5tYXRlcmlhbElkLA0KICAgICAgICAgIHF1YW50aWRhZGVBbnRlcmlvcjogdGhpcy52YWxvclByb3Zpc2lvbmFkb0FudGVyaW9yLA0KICAgICAgICAgIHF1YW50aWRhZGVBdHVhbGl6YWRhOiAwLA0KICAgICAgICB9Ow0KDQogICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMudXBkYXRlUHVyY2hhc2VNYXRlcmlhbCh0aGlzLnB1cmNoYXNlTWF0ZXJpYWxzKTsNCiAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgICAgcGFyYW1ldHJvcy5xdWFudGlkYWRlQXR1YWxpemFkYSA9DQogICAgICAgICAgICB0aGlzLnB1cmNoYXNlTWF0ZXJpYWxzLnByb3Zpc2lvbmVkUXRkOw0KICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlUXVhbnRpZGFkZVByb3Zpc2lvbmFkYU1hdGVyaWFsKHBhcmFtZXRyb3MpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmNyZWF0ZVB1cmNoYXNlTWF0ZXJpYWwodGhpcy5wdXJjaGFzZU1hdGVyaWFscyk7DQogICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09IDIwMCkgew0KICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlZE1hdGVyaWFscyhpZFB1cmNoYXNlT3JkZXIpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICAgIHRoaXMuJGVtaXQoInNldExpc3RzVG9UcnVlIiwgdHJ1ZSk7DQogICAgICB0aGlzLiRlbWl0KCJzZXRTdWNjZXNzTWVzc2FnZSIsIHRydWUpOw0KICAgICAgdGhpcy5wdXJjaGFzZU1hdGVyaWFscyA9IHt9Ow0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnJlc2V0VmFsaWRhdGlvbigpOw0KICAgICAgdGhpcy5sb2FkaW5nQnRuU2F2ZSA9IGZhbHNlOw0KICAgICAgdGhpcy4kZW1pdCgicmVsb2FkQnV0dG9uIik7DQoNCiAgICAgIHRoaXMubG9hZGluZ0J0blNhdmUgPSBmYWxzZTsNCiAgICAgIHZhciBpdGVtcyA9IHsNCiAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwNCiAgICAgICAgaXNVcGRhdGVkOiB0cnVlLA0KICAgICAgfTsNCiAgICAgIGF3YWl0IHRoaXMuc2V0SWZJc1VwZGF0ZWQoaXRlbXMpOw0KICAgIH0sDQoNCiAgICBhc3luYyBjcmVhdGVkTWF0ZXJpYWxzKGlkUHVyY2hhc2VPcmRlcikgew0KICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRBbGxCeVB1cmNoYXNlV2hlbklzU3RhdHVzTm90Q29uY2x1aWRvKA0KICAgICAgICBpZFB1cmNoYXNlT3JkZXINCiAgICAgICk7DQoNCiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdC5sZW5ndGggPiAwKSB7DQogICAgICAgIHZhciBwdXJjaGFzZXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdDsNCg0KICAgICAgICBwdXJjaGFzZXMuZm9yRWFjaCgoeCkgPT4gew0KICAgICAgICAgIHZhciBpdGVtID0gew0KICAgICAgICAgICAgcHVyY2hhc2VDb2xsZWN0aW9uSWQ6IHguaWQsDQogICAgICAgICAgICBtYXRlcmlhbElkOiB0aGlzLnB1cmNoYXNlTWF0ZXJpYWxzLm1hdGVyaWFsSWQsDQogICAgICAgICAgICBwcm92aXNpb25lZFF0ZDogdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5wcm92aXNpb25lZFF0ZCwNCiAgICAgICAgICAgIHVuaXRhcnlWYWx1ZTogdGhpcy5wdXJjaGFzZU1hdGVyaWFscy51bml0YXJ5VmFsdWUsDQogICAgICAgICAgICBpc0JpbGxlZDogZmFsc2UsDQogICAgICAgICAgICB0eXBlUXVhbnRpZnlNYXRlcmlhbDogMCwNCiAgICAgICAgICAgIGlkOiAwLA0KICAgICAgICAgIH07DQoNCiAgICAgICAgICB0aGlzLmNyZWF0ZU1hdGVyaWFsKGl0ZW0pOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgb3BlbigpIHsNCiAgICAgIHRoaXMubW9kYWxBZGRNYXRlcmlhbCA9IHRydWU7DQogICAgfSwNCg0KICAgIGFzeW5jIGVkaXRNYXRlcmlhbChpZCkgew0KICAgICAgaWYgKGlkKSB7DQogICAgICAgIHRoaXMuaWQgPSBpZDsNCiAgICAgICAgdGhpcy5tb2RhbEFkZE1hdGVyaWFsID0gdHJ1ZTsNCiAgICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0QnlJZChpZCk7DQogICAgICAgIHRoaXMucHVyY2hhc2VNYXRlcmlhbHMgPSByZXN1bHQuZGF0YS5yZXN1bHQ7DQogICAgICAgIHRoaXMudmFsb3JQcm92aXNpb25hZG9BbnRlcmlvciA9IHRoaXMucHVyY2hhc2VNYXRlcmlhbHMucHJvdmlzaW9uZWRRdGQ7DQogICAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgY2xvc2UoKSB7DQogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7DQogICAgICB0aGlzLm1vZGFsQWRkTWF0ZXJpYWwgPSBmYWxzZTsNCiAgICAgIHRoaXMuaWQgPSBudWxsOw0KICAgICAgdGhpcy5wcm9mb3JtYU1hdGVyaWFscyA9IFtdOw0KICAgICAgdGhpcy5wdXJjaGFzZU1hdGVyaWFscyA9IHt9Ow0KICAgIH0sDQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBnZXRQcm92aXNpb25lZFF0ZFByb2Zvcm1hKCkgew0KICAgICAgaWYgKHRoaXMucHVyY2hhc2VNYXRlcmlhbHMucHJvdmlzaW9uZWRRdGRQcm9mb3JtYSkNCiAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICBgJHt0aGlzLnB1cmNoYXNlTWF0ZXJpYWxzLnByb3Zpc2lvbmVkUXRkUHJvZm9ybWEudG9TdHJpbmcoKX0gdG9uc2AsDQogICAgICAgIF07DQogICAgICBlbHNlIGlmICgNCiAgICAgICAgdGhpcy5wdXJjaGFzZU1hdGVyaWFscy5tYXRlcmlhbElkICYmDQogICAgICAgIHRoaXMucHJvZm9ybWFNYXRlcmlhbHMubGVuZ3RoID4gMCAmJg0KICAgICAgICAhdGhpcy5pc0Rpc3RyaWJ1dGlvbg0KICAgICAgKSB7DQogICAgICAgIGxldCBtYXRlcmlhbCA9IHRoaXMucHJvZm9ybWFNYXRlcmlhbHMuZmlsdGVyKA0KICAgICAgICAgICh4KSA9PiB4LnZhbHVlID09IHRoaXMucHVyY2hhc2VNYXRlcmlhbHMubWF0ZXJpYWxJZA0KICAgICAgICApWzBdOw0KICAgICAgICBpZiAoIW1hdGVyaWFsKSByZXR1cm4gWyIiXTsNCg0KICAgICAgICByZXR1cm4gW2Ake21hdGVyaWFsLnByb3Zpc2lvbmVkUXRkLnRvU3RyaW5nKCl9IHRvbnNgXTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIFsiIl07DQogICAgfSwNCiAgfSwNCiAgY29tcG9uZW50czogeyBBdXRvQ29tcGxldGVGaWx0ZXJBc3luYywgTW9uZXkgfSwNCn07DQo="},{"version":3,"sources":["ModalAddAndUpdateMaterials.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ModalAddAndUpdateMaterials.vue","sourceRoot":"src/views/ordemCompra","sourcesContent":["<template>\r\n  <div>\r\n    <v-dialog v-model=\"dialogErrorCreateMaterial\" max-width=\"350px\">\r\n      <div class=\"white pa-8 d-flex flex-column align-center text-center\">\r\n        <v-icon style=\"font-size: 60px\" color=\"asia-red\">\r\n          mdi-alert-octagon\r\n        </v-icon>\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5\">\r\n          Este material, com essa quantidade provisionada, já existe na lista!\r\n        </h4>\r\n\r\n        <v-btn\r\n          block\r\n          style=\"background: #c90c0f\"\r\n          rounded\r\n          large\r\n          text\r\n          color=\"white\"\r\n          @click=\"closeModalErrorAddMaterial()\"\r\n          >FECHAR</v-btn\r\n        >\r\n      </div>\r\n    </v-dialog>\r\n\r\n    <v-dialog v-model=\"modalAddMaterial\" max-width=\"800px\">\r\n      <v-form ref=\"form\">\r\n        <div class=\"white pa-6 d-flex flex-column\">\r\n          <div class=\"d-flex justify-space-between\">\r\n            <h2 v-if=\"id\" class=\"asia-neutral--text text--var-1\">\r\n              Editar Material\r\n            </h2>\r\n            <h2 v-else class=\"asia-neutral--text text--var-1\">\r\n              Adicionar Material\r\n            </h2>\r\n\r\n            <v-btn icon text @click=\"close()\">\r\n              <v-icon> mdi-close </v-icon>\r\n            </v-btn>\r\n          </div>\r\n\r\n          <v-divider></v-divider>\r\n\r\n          <div class=\"d-flex\" style=\"width: 100%\">\r\n            <v-input\r\n              v-if=\"id\"\r\n              class=\"my-4 mr-4\"\r\n              dense\r\n              :style=\"'font-size: 15px; width: 50%'\"\r\n              :messages=\"[\r\n                purchaseMaterials.materialName\r\n                  ? purchaseMaterials.materialName\r\n                  : '',\r\n              ]\"\r\n            >\r\n              <span style=\"font-size: 12px; color: #8a8a8a\"> Material </span>\r\n              <template v-slot:message=\"{ message }\">\r\n                <span\r\n                  style=\"font-size: 15px; color: black\"\r\n                  v-html=\"message\"\r\n                ></span>\r\n              </template>\r\n            </v-input>\r\n\r\n            <AutoCompleteFilterAsync\r\n              v-else\r\n              :searchStore=\"loadMaterials\"\r\n              displayText=\"corporateName\"\r\n              v-model=\"purchaseMaterials.materialId\"\r\n              placeholder=\"Digite 3 caracteres\"\r\n              :rules=\"[rules.required]\"\r\n              :style=\"isDistribution ? '' : 'width: 50%'\"\r\n              :class=\"isDistribution ? '' : 'mr-4'\"\r\n            ></AutoCompleteFilterAsync>\r\n\r\n            <v-input\r\n              v-if=\"!isDistribution\"\r\n              class=\"my-4\"\r\n              dense\r\n              :style=\"'font-size: 15px; width: 50%'\"\r\n              :messages=\"getProvisionedQtdProforma\"\r\n            >\r\n              <span style=\"font-size: 12px; color: #8a8a8a\">\r\n                Quantidade Provisionada da Proforma\r\n              </span>\r\n              <template v-slot:message=\"{ message }\">\r\n                <span\r\n                  style=\"font-size: 15px; color: black\"\r\n                  v-html=\"message\"\r\n                ></span>\r\n              </template>\r\n            </v-input>\r\n          </div>\r\n\r\n          <div class=\"d-flex\" style=\"width: 100%\">\r\n            <Money\r\n              v-model=\"purchaseMaterials.provisionedQtd\"\r\n              class=\"mr-4\"\r\n              :label=\"\r\n                isDistribution\r\n                  ? 'Quantidade Provisionada'\r\n                  : 'Quantidade Provisionada da Ordem de Compra'\r\n              \"\r\n              validate-on-blur\r\n              style=\"width: 50%\"\r\n              suffix=\"kg\"\r\n              :required=\"true\"\r\n              :notZero=\"true\"\r\n              :properties=\"{\r\n                suffix: 'kg',\r\n              }\"\r\n            ></Money>\r\n\r\n            <Money\r\n              v-model=\"purchaseMaterials.unitaryValue\"\r\n              label=\"Valor Unitário(sem IPI)\"\r\n              validate-on-blur\r\n              style=\"width: 50%\"\r\n              :required=\"true\"\r\n              :notZero=\"true\"\r\n              :properties=\"{\r\n                prefix: currency == 'R$' ? 'R$' : 'USD',\r\n              }\"\r\n              :options=\"{\r\n                locale: currency == 'R$' ? 'pt-BR' : 'en-US',\r\n                length: 12,\r\n                precision: 2,\r\n                empty: '0,00',\r\n              }\"\r\n            ></Money>\r\n          </div>\r\n\r\n          <v-divider></v-divider>\r\n\r\n          <div class=\"d-flex flex-row justify-end pt-2\">\r\n            <v-btn\r\n              rounded\r\n              class=\"asia-red white--text\"\r\n              :loading=\"loadingBtnSave\"\r\n              @click=\"saveMaterialPurchase\"\r\n              >SALVAR</v-btn\r\n            >\r\n          </div>\r\n        </div>\r\n      </v-form>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport validationRules from \"../../mixins/validationRules\";\r\nimport AutoCompleteFilterAsync from \"@/components/AutoCompleteFilterAsync\";\r\nimport Money from \"@/components/Money\";\r\n\r\nconst moduleProformaMateriais = createNamespacedHelpers(\r\n  \"ModuleProformaMateriais\"\r\n);\r\nconst moduleOrdemDeCompraMaterials = createNamespacedHelpers(\r\n  \"ModuleOrdemDeCompraMaterials\"\r\n);\r\nconst moduleEstoque = createNamespacedHelpers(\"ModuleDistributionStock\");\r\nconst moduleOrdemDeCompra = createNamespacedHelpers(\"ModuleOrdemDeCompra\");\r\nconst moduleColetas = createNamespacedHelpers(\"ModuleColetas\");\r\nconst moduleColetasMateriais = createNamespacedHelpers(\r\n  \"ModuleColetasMaterials\"\r\n);\r\nconst moduleOrdemCompraMateriais = createNamespacedHelpers(\r\n  \"ModuleOrdemDeCompraMaterials\"\r\n);\r\n\r\nexport default {\r\n  props: [\"purchaseOrderId\", \"proformaId\", \"isDistribution\", \"currency\"],\r\n  mixins: [validationRules],\r\n  data() {\r\n    return {\r\n      loadingBtnSave: null,\r\n      purchaseMaterials: {},\r\n      id: null,\r\n      proformaMaterials: [],\r\n      modalAddMaterial: false,\r\n      dialogErrorCreateMaterial: false,\r\n      valorProvisionadoAnterior: null,\r\n    };\r\n  },\r\n  methods: {\r\n    ...moduleProformaMateriais.mapActions({\r\n      getMaterialsDistinctByPurchaseOrder:\r\n        \"getMaterialsDistinctByPurchaseOrder\",\r\n    }),\r\n\r\n    ...moduleOrdemDeCompraMaterials.mapActions({\r\n      createPurchaseMaterial: \"create\",\r\n      updatePurchaseMaterial: \"update\",\r\n      getById: \"getById\",\r\n    }),\r\n\r\n    ...moduleEstoque.mapActions({\r\n      getAllSelected: \"getAllSelected\",\r\n      getAsyncByMaterial: \"getAsyncByMaterial\",\r\n    }),\r\n\r\n    ...moduleOrdemDeCompra.mapActions({\r\n      setIfIsUpdated: \"setIfIsUpdated\",\r\n    }),\r\n\r\n    ...moduleColetasMateriais.mapActions({\r\n      getAllByPurchaseCollection: \"getAllByPurchaseCollection\",\r\n      createMaterial: \"create\",\r\n      updateQuantidadeProvisionadaMaterial:\r\n        \"updateQuantidadeProvisionadaMaterial\",\r\n    }),\r\n\r\n    ...moduleColetas.mapActions({\r\n      getAllByPurchase: \"getAllByPurchase\",\r\n      createColeta: \"create\",\r\n      getAllByPurchaseWhenIsStatusNotConcluido:\r\n        \"getAllByPurchaseWhenIsStatusNotConcluido\",\r\n    }),\r\n\r\n    ...moduleOrdemCompraMateriais.mapActions({\r\n      isMaterialAlreadyInList: \"isMaterialAlreadyInList\",\r\n    }),\r\n\r\n    closeModalErrorAddMaterial() {\r\n      this.dialogErrorCreateMaterial = false;\r\n    },\r\n\r\n    async loadMaterials(val) {\r\n      if (this.isDistribution) return await this.loadMaterialsDistribution(val);\r\n      else return await this.loadMaterialsProforma(val);\r\n    },\r\n\r\n    getCurrency() {\r\n      if (this.currency) return this.currency;\r\n      else return \"R$\";\r\n    },\r\n\r\n    async loadMaterialsDistribution(val) {\r\n      let response = await this.getAllSelected({\r\n        searchText: val,\r\n        purchaseOrderId: this.purchaseOrderId,\r\n      });\r\n      var teste = [];\r\n      response.data.result.items.forEach((element) => {\r\n        teste.push({\r\n          value: element.materialId,\r\n          text: element.materialDescription,\r\n        });\r\n      });\r\n      return teste;\r\n    },\r\n\r\n    async loadMaterialsProforma(val) {\r\n      let result = await this.getMaterialsDistinctByPurchaseOrder({\r\n        searchText: val,\r\n        purchaseOrderId: this.purchaseOrderId,\r\n        proformaId: this.proformaId,\r\n      });\r\n\r\n      this.proformaMaterials = [];\r\n      if (!result) return this.proformaMaterials;\r\n\r\n      result.forEach((element) => {\r\n        this.proformaMaterials.push({\r\n          value: element.id,\r\n          text: element.materialDescription,\r\n          materialId: element.materialId,\r\n          proformaMaterialId: element.id,\r\n          provisionedQtd: element.provisionedQtd,\r\n        });\r\n      });\r\n      return this.proformaMaterials;\r\n    },\r\n\r\n    async saveMaterialPurchase() {\r\n      var idPurchaseOrder = this.$route.params.id;\r\n\r\n      var params = {\r\n        idDistributionMaterial: this.purchaseMaterials.id\r\n          ? this.purchaseMaterials.id\r\n          : 0,\r\n        idMaterial: this.purchaseMaterials.materialId,\r\n        provisionedQtd: this.purchaseMaterials.provisionedQtd,\r\n        purchaseOrderDistributionId: this.$route.params.id,\r\n      };\r\n\r\n      var response = await this.isMaterialAlreadyInList(params);\r\n\r\n      if (response.data.result) {\r\n        this.close();\r\n        this.dialogErrorCreateMaterial = true;\r\n        return null;\r\n      }\r\n\r\n      if (!this.$refs.form.validate()) {\r\n        return null;\r\n      }\r\n\r\n      this.loadingBtnSave = true;\r\n      this.purchaseMaterials.purchaseOrderDistributionId =\r\n        this.$route.params.id;\r\n\r\n      if (!this.isDistribution && this.proformaMaterials.length > 0) {\r\n        let proformaMaterial = this.proformaMaterials.filter(\r\n          (x) => x.value == this.purchaseMaterials.materialId\r\n        )[0];\r\n\r\n        this.purchaseMaterials.materialId = proformaMaterial.materialId;\r\n        this.purchaseMaterials.proformaMaterialId =\r\n          proformaMaterial.proformaMaterialId;\r\n      }\r\n\r\n      var result = null;\r\n      if (this.id) {\r\n        var parametros = {\r\n          purchaseOrderDistributionId: this.$route.params.id,\r\n          materialId: this.purchaseMaterials.materialId,\r\n          quantidadeAnterior: this.valorProvisionadoAnterior,\r\n          quantidadeAtualizada: 0,\r\n        };\r\n\r\n        result = await this.updatePurchaseMaterial(this.purchaseMaterials);\r\n        if (result.status == 200) {\r\n          parametros.quantidadeAtualizada =\r\n            this.purchaseMaterials.provisionedQtd;\r\n          await this.updateQuantidadeProvisionadaMaterial(parametros);\r\n        }\r\n      } else {\r\n        result = await this.createPurchaseMaterial(this.purchaseMaterials);\r\n        if (result.status == 200) {\r\n          await this.createdMaterials(idPurchaseOrder);\r\n        }\r\n      }\r\n\r\n      this.close();\r\n      this.$emit(\"setListsToTrue\", true);\r\n      this.$emit(\"setSuccessMessage\", true);\r\n      this.purchaseMaterials = {};\r\n      this.$refs.form.resetValidation();\r\n      this.loadingBtnSave = false;\r\n      this.$emit(\"reloadButton\");\r\n\r\n      this.loadingBtnSave = false;\r\n      var items = {\r\n        id: this.$route.params.id,\r\n        isUpdated: true,\r\n      };\r\n      await this.setIfIsUpdated(items);\r\n    },\r\n\r\n    async createdMaterials(idPurchaseOrder) {\r\n      var response = await this.getAllByPurchaseWhenIsStatusNotConcluido(\r\n        idPurchaseOrder\r\n      );\r\n\r\n      if (response.data.result.length > 0) {\r\n        var purchases = response.data.result;\r\n\r\n        purchases.forEach((x) => {\r\n          var item = {\r\n            purchaseCollectionId: x.id,\r\n            materialId: this.purchaseMaterials.materialId,\r\n            provisionedQtd: this.purchaseMaterials.provisionedQtd,\r\n            unitaryValue: this.purchaseMaterials.unitaryValue,\r\n            isBilled: false,\r\n            typeQuantifyMaterial: 0,\r\n            id: 0,\r\n          };\r\n\r\n          this.createMaterial(item);\r\n        });\r\n      }\r\n    },\r\n\r\n    open() {\r\n      this.modalAddMaterial = true;\r\n    },\r\n\r\n    async editMaterial(id) {\r\n      if (id) {\r\n        this.id = id;\r\n        this.modalAddMaterial = true;\r\n        var result = await this.getById(id);\r\n        this.purchaseMaterials = result.data.result;\r\n        this.valorProvisionadoAnterior = this.purchaseMaterials.provisionedQtd;\r\n        this.$refs.form.resetValidation();\r\n      }\r\n    },\r\n\r\n    close() {\r\n      this.$refs.form.resetValidation();\r\n      this.modalAddMaterial = false;\r\n      this.id = null;\r\n      this.proformaMaterials = [];\r\n      this.purchaseMaterials = {};\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    getProvisionedQtdProforma() {\r\n      if (this.purchaseMaterials.provisionedQtdProforma)\r\n        return [\r\n          `${this.purchaseMaterials.provisionedQtdProforma.toString()} tons`,\r\n        ];\r\n      else if (\r\n        this.purchaseMaterials.materialId &&\r\n        this.proformaMaterials.length > 0 &&\r\n        !this.isDistribution\r\n      ) {\r\n        let material = this.proformaMaterials.filter(\r\n          (x) => x.value == this.purchaseMaterials.materialId\r\n        )[0];\r\n        if (!material) return [\"\"];\r\n\r\n        return [`${material.provisionedQtd.toString()} tons`];\r\n      }\r\n\r\n      return [\"\"];\r\n    },\r\n  },\r\n  components: { AutoCompleteFilterAsync, Money },\r\n};\r\n</script>\r\n"]}]}