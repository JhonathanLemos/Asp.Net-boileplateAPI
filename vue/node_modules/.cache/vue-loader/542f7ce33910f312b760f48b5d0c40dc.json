{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\informacoesGerais\\informacoesGerais.vue?vue&type=style&index=0&id=63046293&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\informacoesGerais\\informacoesGerais.vue","mtime":1683311476964},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1683229778387},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1683229781560},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1683229779724},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnJvdyB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGZsZXgtd3JhcDogbm93cmFwOwogIGdhcDogNDAlOwp9CgouZ3J1cG9zOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFlN2U3OwogIGJvcmRlci1sZWZ0OiAycHggc29saWQgI2ExMGEwYzsKICBiYWNrZ3JvdW5kLWltYWdlOiBtZGktbWVudS1yaWdodDsKfQo="},{"version":3,"sources":["informacoesGerais.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkZA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"informacoesGerais.vue","sourceRoot":"src/views/usuarios/informacoesGerais","sourcesContent":["<template>\n  <div>\n    <groupsDialog\n      :dialogVincularGrupo=\"dialogVincularGrupo\"\n      @dialogVincularGrupo=\"dialogVincularGrupo = false\"\n      @setsendToTableGrupoClientes=\"setsendToTableGrupoClientes\"\n      :sendToTableGrupoCliente=\"sendToTableGrupoCliente\"\n      v-model=\"user.customerGroupList\"\n      :setCustomersList=\"setCustomersList\"\n      :setListaGrupoClientes=\"setListaGrupoClientes\"\n      :validaEdicao=\"validaEdicao\"\n      @validaEdicao=\"setValidaEdicao\"\n      :setGrupoClientesSelecionados=\"grupoClientesSelecionados\"\n      :setValidateCustomersClass=\"validateCustomersClass\"\n      :setGroupSelectedId=\"groupSelectedId\"\n      @setGroupSelectedId=\"setGroupSelectedId\"\n      @setValidaterCustomerClass=\"setValidaterCustomerClass\"\n      @setGrupoClientesSelecionados=\"setGrupoClientesSelecionados\"\n    ></groupsDialog>\n\n    <customersDialog\n      :dialogVincularCliente=\"dialogVincularCliente\"\n      @dialogVincularCliente=\"dialogVincularCliente = false\"\n      v-model=\"user.customers\"\n    ></customersDialog>\n\n    <v-form ref=\"form\">\n      <div class=\"d-flex flex-column\">\n        <div class=\"d-flex\">\n          <div style=\"width: 10%\" class=\"mr-2\">\n            <div v-if=\"!readonly\">\n              <v-switch\n                :true-value=\"true\"\n                :false-value=\"false\"\n                v-model=\"user.isActive\"\n                :label=\"user.isActive ? 'Ativo' : 'Inativo'\"\n              ></v-switch>\n            </div>\n            <div v-else>\n              <v-chip\n                outlined\n                class=\"mt-4\"\n                :color=\"user.isActive ? 'green' : 'red'\"\n              >\n                {{ user.isActive == true ? \"Ativo\" : \"Inativo\" }}\n              </v-chip>\n            </div>\n          </div>\n\n          <v-text-field\n            :disabled=\"readonly\"\n            :clearable=\"!readonly\"\n            class=\"mr-4 mt-2\"\n            label=\"Nome\"\n            :style=\"readonly ? 'width: 39%' : 'width: 41%'\"\n            v-model=\"user.name\"\n            :rules=\"[rules.required]\"\n            validate-on-blur\n          >\n          </v-text-field>\n\n          <v-text-field\n            style=\"width: 50%\"\n            v-if=\"$route.meta.editar == false\"\n            :rules=\"[rules.email, rules.required]\"\n            class=\"mt-2\"\n            label=\"E-mail\"\n            v-model=\"user.emailAddress\"\n            clearable\n            validate-on-blur\n          >\n          </v-text-field>\n\n          <v-input\n            v-if=\"$route.meta.editar == true\"\n            class=\"my-4\"\n            dense\n            :style=\"\n              readonly\n                ? 'font-size: 15px; width: 50%'\n                : 'font-size: 15px; width: 27%'\n            \"\n            :messages=\"user.emailAddress\"\n          >\n            <span style=\"font-size: 12px; color: #8a8a8a\"> E-mail </span>\n            <template v-slot:message=\"{ message }\">\n              <b style=\"font-size: 14px\" v-html=\"message\"></b>\n            </template>\n          </v-input>\n\n          <v-btn\n            v-if=\"$route.meta.editar == true && !readonly\"\n            @click=\"$emit('mudarSenha')\"\n            class=\"mb-6 mt-4 ml-4\"\n            rounded\n            dense\n            dark\n            style=\"background: #c90c0f\"\n          >\n            <span>RETORNAR PARA SENHA ORIGINAL</span>\n          </v-btn>\n        </div>\n\n        <div class=\"d-flex\">\n          <v-text-field\n            :disabled=\"readonly\"\n            :clearable=\"!readonly\"\n            style=\"width: 50%\"\n            v-mask=\"['(##) ####-####', '(##) #####-####']\"\n            class=\"mr-4\"\n            label=\"Telefone (opcional)\"\n            v-model=\"user.phoneNumber\"\n            :rules=\"[rules.telefone]\"\n            validate-on-blur\n          >\n          </v-text-field>\n\n          <v-select\n            :disabled=\"readonly\"\n            :clearable=\"!readonly\"\n            style=\"width: 50%\"\n            v-model=\"user.userProfile\"\n            :items=\"itemsPerfil\"\n            :rules=\"[rules.required]\"\n            validate-on-blur\n            label=\"Perfil\"\n            @change=\"changeUserProfile\"\n          >\n          </v-select>\n        </div>\n      </div>\n    </v-form>\n\n    <div\n      v-if=\"user.userProfile === 2\"\n      class=\"my-1 mt-4 pa-2 d-flex align-center\"\n      style=\"\n        width: 100%;\n        height: 10%;\n        color: white;\n        background: #2196f3;\n        border-radius: 5px;\n      \"\n    >\n      <v-icon class=\"ml-2 mr-2\" color=\"white\">mdi-alert-circle</v-icon>\n      <span\n        >Usuários com perfil myApi Metals tem acesso total a lista de clientes,\n        portanto não é necessário realizar vínculos.\n      </span>\n    </div>\n\n    <v-expansion-panels\n      v-model=\"expandedPanel\"\n      :disabled=\"user.userProfile === 2\"\n      class=\"mt-3 d-flex flex-column\"\n    >\n      <v-expansion-panel style=\"width: 100%\">\n        <v-expansion-panel-header\n          :style=\"\n            user.userProfile === 2\n              ? 'color: #fff; background: #cccccc'\n              : 'color: #fff; background: #a10a0c'\n          \"\n        >\n          <template v-slot:actions>\n            <v-icon color=\"white\"> $expand </v-icon>\n          </template>\n          <template v-slot:default>\n            <v-row no-gutters>\n              <v-col class=\"mr-6\" cols=\"4\">Grupos</v-col>\n            </v-row>\n          </template>\n        </v-expansion-panel-header>\n\n        <v-expansion-panel-content>\n          <v-row v-if=\"!readonly\" class=\"mt-3 mr-2\" justify=\"end\">\n            <v-btn\n              rounded\n              small\n              color=\"#FEE066\"\n              class=\"myApi-neutral--text mr-2\"\n              @click=\"dialogVincularGrupo = true\"\n            >\n              <v-icon small icon class=\"mr-2\">mdi-link-variant-remove</v-icon>\n              <span>ADICIONAR VÍNCULO</span>\n            </v-btn>\n          </v-row>\n          <usuarios-grupos\n            :disabled=\"readonly\"\n            :items=\"sendToTableGrupoCliente\"\n            :groupLength=\"groupLength\"\n            @editarGroupInTable=\"editarGroupInTable($event)\"\n            @removeItemFromCustomersGroupList=\"removeItemFromCustomersGroupList\"\n            :reset=\"reset\"\n            @reset=\"reset = false\"\n          ></usuarios-grupos>\n        </v-expansion-panel-content>\n      </v-expansion-panel>\n\n      <v-expansion-panel style=\"width: 100%\">\n        <v-expansion-panel-header\n          :style=\"\n            user.userProfile === 2\n              ? 'color: #fff; background: #cccccc'\n              : 'color: #fff; background: #a10a0c'\n          \"\n        >\n          <template v-slot:actions>\n            <v-icon color=\"white\"> $expand </v-icon>\n          </template>\n          <template v-slot:default>\n            <v-row no-gutters>\n              <v-col class=\"mr-6\" cols=\"4\">Clientes</v-col>\n            </v-row>\n          </template>\n        </v-expansion-panel-header>\n\n        <v-expansion-panel-content style=\"height: 100%\">\n          <v-row v-if=\"!readonly\" class=\"mt-3 mr-2\" justify=\"end\">\n            <v-btn\n              rounded\n              small\n              color=\"#FEE066\"\n              class=\"myApi-neutral--text mr-2\"\n              @click=\"dialogVincularCliente = true\"\n            >\n              <v-icon small icon class=\"mr-2\">mdi-link-variant-remove</v-icon>\n              <span>ADICIONAR VÍNCULO</span>\n            </v-btn>\n          </v-row>\n        </v-expansion-panel-content>\n      </v-expansion-panel>\n    </v-expansion-panels>\n  </div>\n</template>\n\n<script>\nimport getRouterData from \"@/mixins/getRouterData.js\";\nimport validationRules from \"../../../mixins/validationRules\";\nimport crudController from \"@/mixins/crudController.js\";\nimport { mapActions } from \"vuex\";\nimport { mask } from \"vue-the-mask\";\n\nexport default {\n  directives: { mask },\n  name: \"usuariosInformacoesGerais\",\n\n  data: () => ({\n    expandedPanel: null,\n    status: true,\n    disabled: true,\n    dialogVincularGrupo: false,\n    dialogVincularCliente: false,\n    setCustomersList: null,\n    setListaGrupoClientes: null,\n    validaEdicao: null,\n    groupSelectedId: null,\n    grupoClientesSelecionados: [],\n    validateCustomersClass: [],\n    search: \"\",\n    reset: null,\n    Editar: false,\n\n    trip: {\n      name: \"\",\n      location: null,\n      start: null,\n      end: null,\n    },\n\n    itemsPerfil: [\n      { text: \"Cliente\", value: 1 },\n      { text: \"myApi Metals\", value: 2 }\n    ],\n  }),\n\n  props: [\n    \"sendToTableGrupoCliente\",\n    \"groupLength\",\n    \"user\",\n    \"customers\",\n    \"readonly\",\n  ],\n\n  watch: {\n    dialogVincularCliente() {\n      if (this.dialogVincularCliente) {\n        this.searchOnlyCustomer = null;\n        this.onlyCustomersList = [];\n        this.validateOnlyCustomersClass = [];\n        this.onlyCustomersSelected = [];\n      }\n    },\n  },\n\n  mixins: [\n    getRouterData,\n    validationRules,\n    crudController({ store: \"ModuleUsuarios\" }),\n  ],\n\n  computed: {\n    validateForm() {\n      return this.$refs.form.validate();\n    },\n  },\n\n  methods: {\n    ...mapActions(\"ModuleGrupoClientes\", {\n      getAllSelect: \"getAllSelect\",\n      createGroupCustomers: \"create\",\n      getGroupById: \"getById\",\n    }),\n    ...mapActions(\"ModuleClientes\", {\n      getAllSelectCustomers: \"getAll\",\n      searchAndGetCustomersWithoutId: \"searchAndGetCustomersWithoutId\",\n      getCustomersByGroup: \"getCustomersByGroup\",\n      getCustomerById: \"getById\",\n    }),\n\n    changeUserProfile() {\n      this.user.roleProfile = null;\n      this.expandedPanel = null;\n    },\n\n    setsendToTableGrupoClientes(v) {\n      this.sendToTableGrupoCliente = v;\n    },\n\n    setGroupSelectedId(v) {\n      this.groupSelectedId = v;\n    },\n\n    setValidaterCustomerClass(v) {\n      this.validateCustomersClass = v;\n    },\n\n    setGrupoClientesSelecionados(v) {\n      this.grupoClientesSelecionados = v;\n    },\n\n    setValidaEdicao(v) {\n      this.validaEdicao = v;\n    },\n\n    removeItemFromCustomersGroupList(id) {\n      var result = this.sendToTableGrupoCliente.filter(\n        (x) => x.groupId == id\n      )[0];\n\n      var result2 = this.sendToTableGrupoCliente.filter((x) => x.groupId != id);\n      this.sendToTableGrupoCliente = [];\n      if (result2.length == 0) this.reset = true;\n\n      result2.forEach((x) => {\n        this.sendToTableGrupoCliente.push(x);\n      });\n\n      result.customers.forEach((v) => {\n        this.user.customerGroupList = this.user.customerGroupList.filter(\n          (x) => x.id != v.id\n        );\n      });\n    },\n\n    async editarGroupInTable(v) {\n      this.hideList = false;\n      this.searchCustomer = null;\n      this.validaEdicao = true;\n      this.groupName = v.col2;\n      this.showCustomerDialog = true;\n      this.groupSelectedId = v.col1;\n      var result = await this.getGroupById(v.col1);\n      this.listaGrupoClientes = [];\n      this.listaGrupoClientes.push(result.data.result);\n      var grupoJaNaTabela = this.sendToTableGrupoCliente.filter(\n        (x) => x.groupName == v.col2\n      );\n      grupoJaNaTabela[0].customers.forEach((x) => {\n        this.validateCustomersClass.push(x.id);\n        this.grupoClientesSelecionados.push(x);\n      });\n      this.customersList = this.listaGrupoClientes[0].customers;\n\n      this.setListaGrupoClientes = this.listaGrupoClientes;\n      this.setCustomersList = this.customersList;\n\n      this.dialogVincularGrupo = true;\n    },\n\n    removeOnlyCustomersFromList(v) {\n      var customers = this.user.customers;\n      this.user.customers = null;\n      customers = customers.filter((x) => x.customerId != v);\n      this.user.customers = customers;\n      this.customers = customers;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n  gap: 40%;\n}\n\n.grupos:hover {\n  background-color: #fae7e7;\n  border-left: 2px solid #a10a0c;\n  background-image: mdi-menu-right;\n}\n</style>\n"]}]}