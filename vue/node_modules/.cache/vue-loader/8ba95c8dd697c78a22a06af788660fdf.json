{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\proformas\\ViewProformasEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\proformas\\ViewProformasEdit.vue","mtime":1680609356661},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTW9kYWxDb25maXJtU2F2ZSBmcm9tICIuL21vZGFpcy9Nb2RhbENvbmZpcm1TYXZlLnZ1ZSI7DQppbXBvcnQgVG9wU2VjdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvVG9wU2VjdGlvbi52dWUiOw0KaW1wb3J0IGdldFJvdXRlckRhdGEgZnJvbSAiQC9taXhpbnMvZ2V0Um91dGVyRGF0YS5qcyI7DQppbXBvcnQgdmFsaWRhdGlvblJ1bGVzIGZyb20gIi4uLy4uL21peGlucy92YWxpZGF0aW9uUnVsZXMiOw0KaW1wb3J0IFByb2Zvcm1hTWF0ZXJpYWxzIGZyb20gIi4vbWF0ZXJpYWlzL1Byb2Zvcm1hTWF0ZXJpYWxzLnZ1ZSI7DQppbXBvcnQgUHJvZm9ybWFGaW5hbmNpYWwgZnJvbSAiLi9maW5hbmNlaXJvL1Byb2Zvcm1hRmluYW5jaWFsLnZ1ZSI7DQppbXBvcnQgRW1iYXJxdWVGb2xsb3dVcCBmcm9tICIuL2ZvbGxvd1VwL0VtYmFycXVlRm9sbG93VXAudnVlIjsNCmltcG9ydCBHZW5lcmFsSW5mb3JtYXRpb24gZnJvbSAiLi9pbmZvcm1hY29lc0dlcmFpcy9HZW5lcmFsSW5mb3JtYXRpb24udnVlIjsNCmltcG9ydCBMb2FkaW5nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvTG9hZGluZy52dWUiOw0KaW1wb3J0IHsgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgfSBmcm9tICJ2dWV4IjsNCmltcG9ydCB7IHRvQmFzZTY0IH0gZnJvbSAiQC9saWIvaGVscGVycy9iYXNlNjQiOw0KDQpjb25zdCBtb2R1bGVQcm9mb3JtYXMgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiTW9kdWxlUHJvZm9ybWFzIik7DQpjb25zdCBtb2R1bGVDYXRlZ29yaWFTaXR1YWNhbyA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKA0KICAiTW9kdWxlQ2F0ZWdvcmlhU2l0dWFjYW8iDQopOw0KY29uc3QgbW9kdWxlUHJvZm9ybWFNYXRlcmlhaXMgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygNCiAgIk1vZHVsZVByb2Zvcm1hTWF0ZXJpYWlzIg0KKTsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhOiAoKSA9PiAoew0KICAgIHJlbG9hZFdpdGhGaWN0aWNpb3VzOiBmYWxzZSwNCiAgICBsb2FkaW5nU2F2ZTogZmFsc2UsDQogICAgYWxlcnRTdWNjZXNzVGV4dDogIiIsDQogICAgYWxlcnRTdWNjZXNzOiBmYWxzZSwNCiAgICB0YWJzOiBudWxsLA0KICAgIHRhYnNJbnNpZGU6IG51bGwsDQogICAgaXNOZXc6IGZhbHNlLA0KICAgIGRpYWxvZ0NvbmZpcm1TYXZlOiBmYWxzZSwNCiAgICBib2FyZGluZ0dyb3VwOiBbXSwNCiAgICBkYXRhUHJvZm9ybWE6IHsNCiAgICAgIHByb2Zvcm1hU3RhdHVzOiBudWxsLA0KICAgICAgcHJvZm9ybWFWYWx1ZTogbnVsbCwNCiAgICAgIGNvZGU6IG51bGwsDQogICAgICBzaGlwbWVudExpbWl0RGF0ZTogbnVsbCwNCiAgICAgIG9yZGVyRGF0ZTogbnVsbCwNCiAgICAgIGN1c3RvbWVyQ29ycG9yYXRlTmFtZTogbnVsbCwNCiAgICAgIGN1c3RvbWVyUGxhbnQ6IG51bGwsDQogICAgICBtYW51ZmFjdHVyZXJOYW1lOiBudWxsLA0KICAgICAgZXhwb3J0ZXJOYW1lOiBudWxsLA0KICAgICAgdXNlcklkOiBudWxsLA0KICAgIH0sDQogICAgYm9hcmRpbmdOZXc6IHsNCiAgICAgIGludm9pY2U6IG51bGwsDQogICAgICBib2FyZGluZ0NvZGU6IG51bGwsDQogICAgICBib2FyZ2luZFJlZmVyZW5jZUJMOiBudWxsLA0KICAgICAgYm9hcmRpbmdEYXRlOiBudWxsLA0KICAgICAgaW5jb3Rlcm06IG51bGwsDQogICAgICBzZXF1ZW5jZTogbnVsbCwNCiAgICAgIHF1YW50aXR5OiBudWxsLA0KICAgICAgZXhwb3J0ZXJJZDogbnVsbCwNCiAgICAgIGN1c3RvbWVySWQ6IG51bGwsDQogICAgICBtYXRlcmlhbElkOiBudWxsLA0KICAgICAgc2hpcFRyaXA6IHt9LA0KICAgICAgZm9sbG93VXA6IHsNCiAgICAgICAgc2hpcG1lbnRUeXBlOiBudWxsLA0KICAgICAgICBwcm9kdWN0aW9uU3RhdHVzSWQ6IG51bGwsDQogICAgICAgIGluc3BlY3Rpb25TdGF0dXNJZDogbnVsbCwNCiAgICAgICAgY29tZXJjaWFsSW52b2ljZVN0YXR1c0lkOiBudWxsLA0KICAgICAgICBib2FyZGluZ1N0YXR1c0lkOiBudWxsLA0KICAgICAgICBkZWxpdmVyeVN0YXR1c0lkOiBudWxsLA0KICAgICAgICBwcm9kdWN0aW9uT2JzOiBudWxsLA0KICAgICAgICBib2FyZGluZ09iczogbnVsbCwNCiAgICAgICAgYXJyaXZhbE9iczogbnVsbCwNCiAgICAgICAgZGVsaXZlcnlPYnM6IG51bGwsDQogICAgICAgIGNsZWFyYW5jZUxvY2F0aW9uOiBudWxsLA0KICAgICAgICBkZWxpdmVyeUxvY2F0aW9uOiBudWxsLA0KICAgICAgICBlbmREYXRlOiBudWxsLA0KICAgICAgICBkZWxpdmVyeURhdGU6IG51bGwsDQogICAgICAgIGluc3BlY3Rpb25SZXBvcnRGaWxlOiBudWxsLA0KICAgICAgICBpbnNwZWN0aW9uUmVwb3J0RmlsZU5hbWU6IG51bGwsDQogICAgICAgIGJsRmlsZTogbnVsbCwNCiAgICAgICAgYmxGaWxlTmFtZTogbnVsbCwNCiAgICAgICAgYm9hcmdpbmRSZWZlcmVuY2VCTDogbnVsbCwNCiAgICAgICAgaW52b2ljZUZpbGU6IG51bGwsDQogICAgICAgIGludm9pY2VGaWxlTmFtZTogbnVsbCwNCiAgICAgICAgb2JzZXJ2YXRpb25zOiBudWxsLA0KICAgICAgICBpbmNvdGVybVRleHQ6IG51bGwsDQogICAgICAgIGxpc3RVc2Vyc0Rlc3BhY2hhbnRlczogW10sDQogICAgICB9LA0KICAgICAgcGF5bWVudHM6IFtdLA0KICAgICAgYm9hcmRpbmdzOiBbXSwNCiAgICB9LA0KICAgIG5hbWVSb3V0ZTogIlZpZXdQcm9mb3JtYXMiLA0KICAgIGFsZXJ0RXJyb3JUZXh0OiAiIiwNCiAgICBhbGVydEVycm9yOiAiIiwNCiAgICB2TW9kZWxQcm9mb3JtYToge30sDQogICAgbG9hZGluZ0JvYXJkaW5nczogdHJ1ZSwNCiAgfSksDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBlZGl0UGVybWlzc2lvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLmhhc1Blcm1pc3Npb24odGhpcy4kUGVybWlzc2lvbk5hbWVzLnBlcm1pc3Npb25Qcm9mb3JtYUVkaXQpOw0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tb2R1bGVQcm9mb3JtYXMubWFwQWN0aW9ucyh7DQogICAgICBnZXRCeUlkOiAiZ2V0QnlJZCIsDQogICAgICB1cGRhdGVQcm9mb3JtYTogInVwZGF0ZSIsDQogICAgICBnZXRCb2FyZGluZ3M6ICJnZXRCb2FyZGluZ3MiLA0KICAgICAgZGVsZXRlQm9hcmRpbmdHcm91cDogImRlbGV0ZUJvYXJkaW5nR3JvdXAiLA0KICAgIH0pLA0KICAgIC4uLm1vZHVsZUNhdGVnb3JpYVNpdHVhY2FvLm1hcEFjdGlvbnMoew0KICAgICAgZ2V0QWxsQ2F0ZWdvcnlTdGF0dXM6ICJnZXRBbGxTZWxlY3QiLA0KICAgIH0pLA0KICAgIC4uLm1vZHVsZVByb2Zvcm1hTWF0ZXJpYWlzLm1hcEFjdGlvbnMoew0KICAgICAgZ2V0QW55TWF0ZXJpYWxzTm90Qm9hcmRlZDogImdldEFueU1hdGVyaWFsc05vdEJvYXJkZWQiLA0KICAgIH0pLA0KDQogICAgYXN5bmMgY2hlY2tVcGRhdGUoKSB7DQogICAgICB0aGlzLmxvYWRpbmdTYXZlID0gdHJ1ZTsNCiAgICAgIGxldCBhbnlOb3RCb2FyZGVkID0gYXdhaXQgdGhpcy5nZXRBbnlNYXRlcmlhbHNOb3RCb2FyZGVkKHsNCiAgICAgICAgcHJvZm9ybWFJZDogdGhpcy5pZCwNCiAgICAgIH0pOw0KDQogICAgICBsZXQgZmljdGl0aW91c0JvYXJkaW5nID0gdGhpcy5ib2FyZGluZ0dyb3VwLmZpbHRlcigNCiAgICAgICAgKHgpID0+IHguYm9hcmRpbmdDb2RlID09IG51bGwgJiYgeC5pZCAhPSBudWxsDQogICAgICApOw0KDQogICAgICBpZiAoYW55Tm90Qm9hcmRlZCAmJiBmaWN0aXRpb3VzQm9hcmRpbmcubGVuZ3RoID09IDApIHsNCiAgICAgICAgdGhpcy4kcmVmcy5tb2RhbENvbmZpcm1TYXZlLm9wZW4oKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBzaG93TWVzc2FnZSA9IGZhbHNlOw0KICAgICAgICB0aGlzLmJvYXJkaW5nR3JvdXAuZm9yRWFjaCgoeCkgPT4gew0KICAgICAgICAgIGxldCBib2FyZGluZ3NGdWxsID0geC5ib2FyZGluZ3MuZmlsdGVyKA0KICAgICAgICAgICAgKHkpID0+IHkuZnVsbEJvYXJkaW5nID09IGZhbHNlDQogICAgICAgICAgKTsNCiAgICAgICAgICBpZiAoYm9hcmRpbmdzRnVsbC5sZW5ndGggPiAwKSBzaG93TWVzc2FnZSA9IHRydWU7DQogICAgICAgIH0pOw0KDQogICAgICAgIGlmIChzaG93TWVzc2FnZSAmJiBmaWN0aXRpb3VzQm9hcmRpbmcubGVuZ3RoID09IDApDQogICAgICAgICAgdGhpcy4kcmVmcy5tb2RhbENvbmZpcm1TYXZlLm9wZW4oKTsNCiAgICAgICAgZWxzZSB0aGlzLnVwZGF0ZURhdGEoKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgZGVsZXRlQm9hcmRpbmdHcm91cEJ5SWQoYm9hcmRpbmdHcm91cElkKSB7DQogICAgICBhd2FpdCB0aGlzLmRlbGV0ZUJvYXJkaW5nR3JvdXAoeyBib2FyZGluZ0dyb3VwSWQ6IGJvYXJkaW5nR3JvdXBJZCB9KTsNCg0KICAgICAgaWYgKHRoaXMuYm9hcmRpbmdHcm91cC5sZW5ndGggPT0gMSkgew0KICAgICAgICB0aGlzLmJvYXJkaW5nR3JvdXAgPSBbXTsNCiAgICAgICAgdGhpcy5ib2FyZGluZ0dyb3VwLnB1c2goeyAuLi50aGlzLmJvYXJkaW5nTmV3IH0pOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmFsZXJ0U3VjY2Vzc1RleHQgPSAiUHJvZm9ybWEgYXR1YWxpemFkYSBjb20gc3VjZXNzbyEiOw0KICAgICAgdGhpcy5hbGVydFN1Y2Nlc3MgPSB0cnVlOw0KICAgICAgYXdhaXQgdGhpcy5sb2FkUHJvZm9ybWFEYXRhKCk7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgdGhpcy5hbGVydFN1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgIH0sIDMwMDApOw0KICAgIH0sDQoNCiAgICBjYW5jZWxhclVwZGF0ZSgpIHsNCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMpDQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICBuYW1lOiAiVmlld1Byb2Zvcm1hcyIsDQogICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICBpc1VwZGF0ZTogdHJ1ZSwNCiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMuJHJvdXRlLnBhcmFtcy5vcHRpb25zLA0KICAgICAgICAgICAgc2VhcmNoOiB0aGlzLiRyb3V0ZS5wYXJhbXMuc2VhcmNoLA0KICAgICAgICAgIH0sDQogICAgICAgIH0pOw0KICAgICAgZWxzZQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgbmFtZTogIlZpZXdQcm9mb3JtYXMiLA0KICAgICAgICAgIHBhcmFtczogeyBpc1VwZGF0ZTogdHJ1ZSB9LA0KICAgICAgICB9KTsNCiAgICB9LA0KDQogICAgdXBkYXRlRGF0YVdpdGhGaWN0aXRpb3VzKCkgew0KICAgICAgdGhpcy5ib2FyZGluZ0dyb3VwLnB1c2goeyAuLi50aGlzLmJvYXJkaW5nTmV3IH0pOw0KICAgICAgdGhpcy5yZWxvYWRXaXRoRmljdGljaW91cyA9IHRydWU7DQogICAgICB0aGlzLnVwZGF0ZURhdGEoKTsNCiAgICB9LA0KDQogICAgdmFsaWRhdGVGaWxlc0xlbmd0aCh2YWx1ZSwgaSkgew0KICAgICAgdmFyIGFycmF5ID0gWyJpbnZvaWNlIiwgIkJMIl07DQogICAgICBpZiAoDQogICAgICAgICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPiAyNTAwMDAwMCkgfHwNCiAgICAgICAgKHZhbHVlICYmIHZhbHVlLnNpemUgPiAyNTAwMDAwMCkNCiAgICAgICkgew0KICAgICAgICB0aGlzLmFsZXJ0RXJyb3IgPSB0cnVlOw0KICAgICAgICB0aGlzLmFsZXJ0RXJyb3JUZXh0ID0gYEFycXVpdm8gJHthcnJheVtpXX0gdWx0cmFwYXNzYSBvcyAyNU1CYDsNCiAgICAgICAgdGhpcy5sb2FkaW5nU2F2ZSA9IGZhbHNlOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmFsZXJ0RXJyb3IgPSBmYWxzZTsNCiAgICAgICAgfSwgNTAwMCk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBhc3luYyB1cGRhdGVEYXRhKCkgew0KICAgICAgdGhpcy5sb2FkaW5nU2F2ZSA9IHRydWU7DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYm9hcmRpbmdHcm91cC5sZW5ndGg7IGkrKykgew0KICAgICAgICBpZiAoDQogICAgICAgICAgIXRoaXMudmFsaWRhdGVGaWxlc0xlbmd0aCgNCiAgICAgICAgICAgIHRoaXMuYm9hcmRpbmdHcm91cFtpXS5mb2xsb3dVcC5pbnZvaWNlRmlsZSwNCiAgICAgICAgICAgIDANCiAgICAgICAgICApDQogICAgICAgICkNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIGlmICh0aGlzLmJvYXJkaW5nR3JvdXBbaV0uZm9sbG93VXAuaW52b2ljZUZpbGUgaW5zdGFuY2VvZiBGaWxlKSB7DQogICAgICAgICAgdGhpcy5ib2FyZGluZ0dyb3VwW2ldLmZvbGxvd1VwLmludm9pY2VGaWxlID0gYXdhaXQgdG9CYXNlNjQoDQogICAgICAgICAgICB0aGlzLmJvYXJkaW5nR3JvdXBbaV0uZm9sbG93VXAuaW52b2ljZUZpbGUsDQogICAgICAgICAgICBmYWxzZQ0KICAgICAgICAgICk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuYm9hcmRpbmdHcm91cFtpXS5mb2xsb3dVcC5pbnNwZWN0aW9uUmVwb3J0RmlsZSBpbnN0YW5jZW9mIEZpbGUNCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy5ib2FyZGluZ0dyb3VwW2ldLmZvbGxvd1VwLmluc3BlY3Rpb25SZXBvcnRGaWxlID0gYXdhaXQgdG9CYXNlNjQoDQogICAgICAgICAgICB0aGlzLmJvYXJkaW5nR3JvdXBbaV0uZm9sbG93VXAuaW5zcGVjdGlvblJlcG9ydEZpbGUsDQogICAgICAgICAgICBmYWxzZQ0KICAgICAgICAgICk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlRmlsZXNMZW5ndGgodGhpcy5ib2FyZGluZ0dyb3VwW2ldLmZvbGxvd1VwLmJsRmlsZSwgMSkpDQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICBpZiAodGhpcy5ib2FyZGluZ0dyb3VwW2ldLmZvbGxvd1VwLmJsRmlsZSBpbnN0YW5jZW9mIEZpbGUpIHsNCiAgICAgICAgICB0aGlzLmJvYXJkaW5nR3JvdXBbaV0uZm9sbG93VXAuYmxGaWxlID0gYXdhaXQgdG9CYXNlNjQoDQogICAgICAgICAgICB0aGlzLmJvYXJkaW5nR3JvdXBbaV0uZm9sbG93VXAuYmxGaWxlLA0KICAgICAgICAgICAgZmFsc2UNCiAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHRoaXMuZGF0YVByb2Zvcm1hLmJvYXJkaW5nR3JvdXAgPSB0aGlzLmJvYXJkaW5nR3JvdXA7DQogICAgICB0aGlzLmRhdGFQcm9mb3JtYS51c2VySWQgPSB0aGlzLmRhdGFQcm9mb3JtYS51c2VySWQgPT0gMCA/IG51bGwgOiB0aGlzLmRhdGFQcm9mb3JtYS51c2VySWQ7DQogICAgICANCiAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLnVwZGF0ZVByb2Zvcm1hKHRoaXMuZGF0YVByb2Zvcm1hKTsNCg0KICAgICAgaWYgKHJlc3VsdC5kYXRhLnN1Y2Nlc3MpIHsNCiAgICAgICAgdGhpcy5hbGVydFN1Y2Nlc3NUZXh0ID0gIlByb2Zvcm1hIGF0dWFsaXphZGEgY29tIHN1Y2Vzc28hIjsNCiAgICAgICAgdGhpcy5hbGVydFN1Y2Nlc3MgPSB0cnVlOw0KICAgICAgICB0aGlzLmxvYWRQcm9mb3JtYURhdGEoKTsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5hbGVydFN1Y2Nlc3MgPSBmYWxzZTsNCiAgICAgICAgfSwgMzAwMCk7DQogICAgICB9IGVsc2UgdGhpcy5sb2FkaW5nU2F2ZSA9IGZhbHNlOw0KICAgIH0sDQoNCiAgICB1cGRhdGVGdWxsQm9hcmRpbmcoaXRlbSkgew0KICAgICAgbGV0IGJvYXJkaW5nR3JvdXAgPSB0aGlzLmJvYXJkaW5nR3JvdXAuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC5pZCA9PSBpdGVtLmJvYXJkaW5nR3JvdXBJZA0KICAgICAgKTsNCg0KICAgICAgaWYgKGJvYXJkaW5nR3JvdXAubGVuZ3RoID4gMCAmJiBib2FyZGluZ0dyb3VwWzBdLmJvYXJkaW5ncy5sZW5ndGggPiAwKSB7DQogICAgICAgIGxldCBib2FyZGluZyA9IGJvYXJkaW5nR3JvdXBbMF0uYm9hcmRpbmdzLmZpbHRlcigNCiAgICAgICAgICAoeCkgPT4geC5pZCA9PSBpdGVtLmJvYXJkaW5nSWQNCiAgICAgICAgKTsNCiAgICAgICAgaWYgKGJvYXJkaW5nLmxlbmd0aCA+IDApIGJvYXJkaW5nWzBdLmZ1bGxCb2FyZGluZyA9IGl0ZW0uZnVsbEJvYXJkaW5nOw0KICAgICAgICBlbHNlDQogICAgICAgICAgYm9hcmRpbmcucHVzaCh7DQogICAgICAgICAgICBpZDogaXRlbS5ib2FyZGluZ0lkLA0KICAgICAgICAgICAgZnVsbEJvYXJkaW5nOiBpdGVtLmZ1bGxCb2FyZGluZywNCiAgICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGJvYXJkaW5nR3JvdXBbMF0uYm9hcmRpbmdzLnB1c2goew0KICAgICAgICAgIGlkOiBpdGVtLmJvYXJkaW5nSWQsDQogICAgICAgICAgZnVsbEJvYXJkaW5nOiBpdGVtLmZ1bGxCb2FyZGluZywNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIGxvYWRJdGVtc1Byb2Zvcm1hU3RhdHVzU2VsZWN0KCkgew0KICAgICAgdGhpcy5nZXRBbGxDYXRlZ29yeVN0YXR1cygxMCkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy5pdGVtc1Byb2Zvcm1hU3RhdHVzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQuaXRlbXMubWFwKCh4KSA9PiAoew0KICAgICAgICAgICAgdmFsdWU6IHguaWQsDQogICAgICAgICAgICB0ZXh0OiB4LmRlc2NyaXB0aW9uLA0KICAgICAgICAgIH0pKTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICB0aGlzLml0ZW1zUHJvZm9ybWFTdGF0dXMgPSBbXTsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIGFzeW5jIGxvYWRCb2FyZGluZ3NEYXRhKCkgew0KICAgICAgaWYgKHRoaXMuaWQpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nQm9hcmRpbmdzID0gdHJ1ZTsNCiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRCb2FyZGluZ3ModGhpcy5pZCk7DQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdCAmJiByZXNwb25zZS5kYXRhLnJlc3VsdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy5ib2FyZGluZ0dyb3VwID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQ7DQogICAgICAgICAgbGV0IGJvYXJkaW5nc1BlbmRlbmN5ID0gdGhpcy5ib2FyZGluZ0dyb3VwLmZpbHRlcigoeCkgPT4geC5wZW5kZW5jeSk7DQogICAgICAgICAgaWYgKGJvYXJkaW5nc1BlbmRlbmN5Lmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHRoaXMudGFicyA9IHRoaXMuYm9hcmRpbmdHcm91cC5maW5kSW5kZXgoDQogICAgICAgICAgICAgICh4KSA9PiB4ID09IGJvYXJkaW5nc1BlbmRlbmN5WzBdDQogICAgICAgICAgICApOw0KICAgICAgICAgICAgdGhpcy50YWJzSW5zaWRlID0gInRhYi0yIjsNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVsb2FkV2l0aEZpY3RpY2lvdXMpIHsNCiAgICAgICAgICAgIHRoaXMudGFicyA9IHRoaXMuYm9hcmRpbmdHcm91cC5sZW5ndGggLSAxOw0KICAgICAgICAgICAgdGhpcy5yZWxvYWRXaXRoRmljdGljaW91cyA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmlzTmV3ID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmxvYWRpbmdCb2FyZGluZ3MgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgbG9hZFByb2Zvcm1hRGF0YSgpIHsgICAgICANCiAgICAgIHRoaXMubG9hZGluZ1NhdmUgPSB0cnVlOw0KICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRCeUlkKHRoaXMuaWQpOw0KICAgICAgdGhpcy5kYXRhUHJvZm9ybWEgPSByZXNwb25zZS5kYXRhLnJlc3VsdDsNCg0KICAgICAgdGhpcy5sb2FkQm9hcmRpbmdzRGF0YSgpOw0KDQogICAgICB0aGlzLmxvYWRpbmdTYXZlID0gZmFsc2U7DQogICAgfSwNCiAgfSwNCg0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuYm9hcmRpbmdHcm91cC5wdXNoKHsgLi4udGhpcy5ib2FyZGluZ05ldyB9KTsNCiAgICBpZiAodGhpcy5pZCkgew0KICAgICAgdGhpcy5sb2FkUHJvZm9ybWFEYXRhKCk7DQogICAgICBpZiAoDQogICAgICAgIHRoaXMuaGFzUGVybWlzc2lvbih0aGlzLiRQZXJtaXNzaW9uTmFtZXMucGVybWlzc2lvbkNhdGVnb3J5U2l0dWF0aW9uU2VlKQ0KICAgICAgKQ0KICAgICAgICB0aGlzLmxvYWRJdGVtc1Byb2Zvcm1hU3RhdHVzU2VsZWN0KCk7DQogICAgfQ0KICB9LA0KDQogIHByb3BzOiBbImlkIl0sDQogIG1peGluczogW3ZhbGlkYXRpb25SdWxlcywgZ2V0Um91dGVyRGF0YV0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBUb3BTZWN0aW9uLA0KICAgIFByb2Zvcm1hTWF0ZXJpYWxzLA0KICAgIFByb2Zvcm1hRmluYW5jaWFsLA0KICAgIEVtYmFycXVlRm9sbG93VXAsDQogICAgR2VuZXJhbEluZm9ybWF0aW9uLA0KICAgIExvYWRpbmcsDQogICAgTW9kYWxDb25maXJtU2F2ZSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["ViewProformasEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ViewProformasEdit.vue","sourceRoot":"src/views/proformas","sourcesContent":["<template>\r\n  <div class=\"flex-column mx-10\" style=\"overflow: auto; width: 100%\">\r\n    <ModalConfirmSave\r\n      ref=\"modalConfirmSave\"\r\n      @confirmSave=\"updateDataWithFictitious()\"\r\n      @cancel=\"loadingSave = false\"\r\n    />\r\n    <top-section :nameRoute=\"nameRoute\" />\r\n\r\n    <div class=\"d-flex flex-column\">\r\n      <div class=\"d-flex justify-space-between\">\r\n        <div class=\"flex-grow d-flex justify-start\">\r\n          <p class=\"font-weight-bold\" style=\"font-size: 18px\">\r\n            Proforma {{ dataProforma.proformaValue }}\r\n          </p>\r\n          <v-chip\r\n            outlined\r\n            v-if=\"dataProforma.proformaStatus\"\r\n            class=\"ml-6\"\r\n            :color=\"\r\n              dataProforma.proformaStatus.color == '#FFFFFF'\r\n                ? 'black'\r\n                : dataProforma.proformaStatus.color\r\n            \"\r\n          >\r\n            {{ dataProforma.proformaStatus.description }}\r\n          </v-chip>\r\n        </div>\r\n        <div v-if=\"editPermission\" class=\"flex-grow d-flex justify-end\">\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"mr-2 ml-8\"\r\n            :disabled=\"loadingSave\"\r\n            text\r\n            @click=\"cancelarUpdate\"\r\n            >CANCELAR</v-btn\r\n          >\r\n          <v-btn\r\n            rounded\r\n            large\r\n            :loading=\"loadingSave\"\r\n            class=\"asia-red white--text mr-2\"\r\n            @click=\"checkUpdate()\"\r\n            >SALVAR</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n\r\n      <GeneralInformation\r\n        class=\"my-6\"\r\n        v-model=\"dataProforma\"\r\n        :readonly=\"!editPermission\"\r\n      />\r\n\r\n      <v-alert\r\n        type=\"success\"\r\n        transition=\"slide-y-transition\"\r\n        dismissible\r\n        v-show=\"alertSuccess\"\r\n        dense\r\n        >{{ alertSuccessText }}</v-alert\r\n      >\r\n\r\n      <v-alert\r\n        type=\"error\"\r\n        transition=\"slide-y-transition\"\r\n        dismissible\r\n        v-show=\"alertError\"\r\n        dense\r\n        >{{ alertErrorText }}</v-alert\r\n      >\r\n\r\n      <Loading\r\n        class=\"pa-2 align-self-center\"\r\n        v-if=\"loadingBoardings\"\r\n        :size=\"60\"\r\n      />\r\n      <div v-else class=\"d-flex flex-row justify-start\">\r\n        <div\r\n          class=\"white rounded-lg flex-grow-1\"\r\n          style=\"height: 600px; overflow: hidden\"\r\n        >\r\n          <v-tabs\r\n            v-model=\"tabs\"\r\n            vertical\r\n            background-color=\"#A00C0F\"\r\n            dark\r\n            flat\r\n            :slider-size=\"3\"\r\n            center-active\r\n          >\r\n            <div justify=\"center\" class=\"mx-3 my-3\">\r\n              <b style=\"font-size: 17px\"> Embarque </b>\r\n            </div>\r\n            <v-tab v-for=\"(boarding, i) in boardingGroup\" :key=\"i\">\r\n              <b style=\"font-size: 25px\">{{ `${i + 1}Â°` }}</b>\r\n            </v-tab>\r\n\r\n            <v-tabs-items v-model=\"tabs\">\r\n              <v-tab-item v-for=\"(boarding, i) in boardingGroup\" :key=\"i\">\r\n                <div class=\"my-2 ml-4\" style=\"height: 35px; overflow: hidden\">\r\n                  <b v-if=\"isNew\">{{ dataProforma.proformaValue }}</b>\r\n                  <b v-else>{{ boarding.invoice }}</b>\r\n\r\n                  <v-btn\r\n                    v-if=\"\r\n                      boarding.id &&\r\n                      !boarding.boardingCode &&\r\n                      editPermission &&\r\n                      boardingGroup.length > 1\r\n                    \"\r\n                    icon\r\n                    @click=\"deleteBoardingGroupById(boarding.id)\"\r\n                  >\r\n                    <v-icon> mdi-delete </v-icon>\r\n                  </v-btn>\r\n                </div>\r\n                <v-tabs flat v-model=\"tabsInside\">\r\n                  <v-tab href=\"#tab-1\">Follow-Up</v-tab>\r\n                  <v-tab href=\"#tab-2\">Materiais</v-tab>\r\n                  <v-tab href=\"#tab-3\">Financeiro</v-tab>\r\n                </v-tabs>\r\n\r\n                <v-tabs-items v-model=\"tabsInside\" class=\"pa-6\">\r\n                  <v-tab-item value=\"tab-1\">\r\n                    <EmbarqueFollowUp\r\n                      v-model=\"boarding.followUp\"\r\n                      :proformaBoardingData=\"boarding.followUpBoarding\"\r\n                      :proformaShipTripIntermediateStop=\"\r\n                        boarding.proformaShipTripIntermediateStop\r\n                      \"\r\n                      :proformaId=\"id\"\r\n                      :blNumber=\"boarding.boargindReferenceBL\"\r\n                      :readonly=\"!editPermission\"\r\n                    />\r\n                  </v-tab-item>\r\n                  <v-tab-item value=\"tab-2\">\r\n                    <proforma-materials\r\n                      :proformaCode=\"dataProforma.code\"\r\n                      :boardingGroupId=\"boarding.id\"\r\n                      :getAll=\"boardingGroup.length == 1\"\r\n                      :readonly=\"!editPermission\"\r\n                      :isFirstBoardingGroup=\"boarding.isFirstBoardingGroup\"\r\n                      @updateFullBoarding=\"updateFullBoarding($event)\"\r\n                    />\r\n                  </v-tab-item>\r\n                  <v-tab-item value=\"tab-3\">\r\n                    <proforma-financial\r\n                      v-model=\"boarding.payments\"\r\n                      :readonly=\"!editPermission\"\r\n                    />\r\n                  </v-tab-item>\r\n                </v-tabs-items>\r\n              </v-tab-item>\r\n            </v-tabs-items>\r\n          </v-tabs>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ModalConfirmSave from \"./modais/ModalConfirmSave.vue\";\r\nimport TopSection from \"@/components/TopSection.vue\";\r\nimport getRouterData from \"@/mixins/getRouterData.js\";\r\nimport validationRules from \"../../mixins/validationRules\";\r\nimport ProformaMaterials from \"./materiais/ProformaMaterials.vue\";\r\nimport ProformaFinancial from \"./financeiro/ProformaFinancial.vue\";\r\nimport EmbarqueFollowUp from \"./followUp/EmbarqueFollowUp.vue\";\r\nimport GeneralInformation from \"./informacoesGerais/GeneralInformation.vue\";\r\nimport Loading from \"../../components/Loading.vue\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport { toBase64 } from \"@/lib/helpers/base64\";\r\n\r\nconst moduleProformas = createNamespacedHelpers(\"ModuleProformas\");\r\nconst moduleCategoriaSituacao = createNamespacedHelpers(\r\n  \"ModuleCategoriaSituacao\"\r\n);\r\nconst moduleProformaMateriais = createNamespacedHelpers(\r\n  \"ModuleProformaMateriais\"\r\n);\r\n\r\nexport default {\r\n  data: () => ({\r\n    reloadWithFicticious: false,\r\n    loadingSave: false,\r\n    alertSuccessText: \"\",\r\n    alertSuccess: false,\r\n    tabs: null,\r\n    tabsInside: null,\r\n    isNew: false,\r\n    dialogConfirmSave: false,\r\n    boardingGroup: [],\r\n    dataProforma: {\r\n      proformaStatus: null,\r\n      proformaValue: null,\r\n      code: null,\r\n      shipmentLimitDate: null,\r\n      orderDate: null,\r\n      customerCorporateName: null,\r\n      customerPlant: null,\r\n      manufacturerName: null,\r\n      exporterName: null,\r\n      userId: null,\r\n    },\r\n    boardingNew: {\r\n      invoice: null,\r\n      boardingCode: null,\r\n      boargindReferenceBL: null,\r\n      boardingDate: null,\r\n      incoterm: null,\r\n      sequence: null,\r\n      quantity: null,\r\n      exporterId: null,\r\n      customerId: null,\r\n      materialId: null,\r\n      shipTrip: {},\r\n      followUp: {\r\n        shipmentType: null,\r\n        productionStatusId: null,\r\n        inspectionStatusId: null,\r\n        comercialInvoiceStatusId: null,\r\n        boardingStatusId: null,\r\n        deliveryStatusId: null,\r\n        productionObs: null,\r\n        boardingObs: null,\r\n        arrivalObs: null,\r\n        deliveryObs: null,\r\n        clearanceLocation: null,\r\n        deliveryLocation: null,\r\n        endDate: null,\r\n        deliveryDate: null,\r\n        inspectionReportFile: null,\r\n        inspectionReportFileName: null,\r\n        blFile: null,\r\n        blFileName: null,\r\n        boargindReferenceBL: null,\r\n        invoiceFile: null,\r\n        invoiceFileName: null,\r\n        observations: null,\r\n        incotermText: null,\r\n        listUsersDespachantes: [],\r\n      },\r\n      payments: [],\r\n      boardings: [],\r\n    },\r\n    nameRoute: \"ViewProformas\",\r\n    alertErrorText: \"\",\r\n    alertError: \"\",\r\n    vModelProforma: {},\r\n    loadingBoardings: true,\r\n  }),\r\n\r\n  computed: {\r\n    editPermission() {\r\n      return this.hasPermission(this.$PermissionNames.permissionProformaEdit);\r\n    },\r\n  },\r\n  methods: {\r\n    ...moduleProformas.mapActions({\r\n      getById: \"getById\",\r\n      updateProforma: \"update\",\r\n      getBoardings: \"getBoardings\",\r\n      deleteBoardingGroup: \"deleteBoardingGroup\",\r\n    }),\r\n    ...moduleCategoriaSituacao.mapActions({\r\n      getAllCategoryStatus: \"getAllSelect\",\r\n    }),\r\n    ...moduleProformaMateriais.mapActions({\r\n      getAnyMaterialsNotBoarded: \"getAnyMaterialsNotBoarded\",\r\n    }),\r\n\r\n    async checkUpdate() {\r\n      this.loadingSave = true;\r\n      let anyNotBoarded = await this.getAnyMaterialsNotBoarded({\r\n        proformaId: this.id,\r\n      });\r\n\r\n      let fictitiousBoarding = this.boardingGroup.filter(\r\n        (x) => x.boardingCode == null && x.id != null\r\n      );\r\n\r\n      if (anyNotBoarded && fictitiousBoarding.length == 0) {\r\n        this.$refs.modalConfirmSave.open();\r\n      } else {\r\n        let showMessage = false;\r\n        this.boardingGroup.forEach((x) => {\r\n          let boardingsFull = x.boardings.filter(\r\n            (y) => y.fullBoarding == false\r\n          );\r\n          if (boardingsFull.length > 0) showMessage = true;\r\n        });\r\n\r\n        if (showMessage && fictitiousBoarding.length == 0)\r\n          this.$refs.modalConfirmSave.open();\r\n        else this.updateData();\r\n      }\r\n    },\r\n\r\n    async deleteBoardingGroupById(boardingGroupId) {\r\n      await this.deleteBoardingGroup({ boardingGroupId: boardingGroupId });\r\n\r\n      if (this.boardingGroup.length == 1) {\r\n        this.boardingGroup = [];\r\n        this.boardingGroup.push({ ...this.boardingNew });\r\n      }\r\n\r\n      this.alertSuccessText = \"Proforma atualizada com sucesso!\";\r\n      this.alertSuccess = true;\r\n      await this.loadProformaData();\r\n      setTimeout(() => {\r\n        this.alertSuccess = false;\r\n      }, 3000);\r\n    },\r\n\r\n    cancelarUpdate() {\r\n      if (this.$route.params)\r\n        this.$router.push({\r\n          name: \"ViewProformas\",\r\n          params: {\r\n            isUpdate: true,\r\n            options: this.$route.params.options,\r\n            search: this.$route.params.search,\r\n          },\r\n        });\r\n      else\r\n        this.$router.push({\r\n          name: \"ViewProformas\",\r\n          params: { isUpdate: true },\r\n        });\r\n    },\r\n\r\n    updateDataWithFictitious() {\r\n      this.boardingGroup.push({ ...this.boardingNew });\r\n      this.reloadWithFicticious = true;\r\n      this.updateData();\r\n    },\r\n\r\n    validateFilesLength(value, i) {\r\n      var array = [\"invoice\", \"BL\"];\r\n      if (\r\n        (value && value.length > 25000000) ||\r\n        (value && value.size > 25000000)\r\n      ) {\r\n        this.alertError = true;\r\n        this.alertErrorText = `Arquivo ${array[i]} ultrapassa os 25MB`;\r\n        this.loadingSave = false;\r\n        setTimeout(() => {\r\n          this.alertError = false;\r\n        }, 5000);\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n\r\n    async updateData() {\r\n      this.loadingSave = true;\r\n      for (let i = 0; i < this.boardingGroup.length; i++) {\r\n        if (\r\n          !this.validateFilesLength(\r\n            this.boardingGroup[i].followUp.invoiceFile,\r\n            0\r\n          )\r\n        )\r\n          return;\r\n        if (this.boardingGroup[i].followUp.invoiceFile instanceof File) {\r\n          this.boardingGroup[i].followUp.invoiceFile = await toBase64(\r\n            this.boardingGroup[i].followUp.invoiceFile,\r\n            false\r\n          );\r\n        }\r\n        if (\r\n          this.boardingGroup[i].followUp.inspectionReportFile instanceof File\r\n        ) {\r\n          this.boardingGroup[i].followUp.inspectionReportFile = await toBase64(\r\n            this.boardingGroup[i].followUp.inspectionReportFile,\r\n            false\r\n          );\r\n        }\r\n        if (!this.validateFilesLength(this.boardingGroup[i].followUp.blFile, 1))\r\n          return;\r\n        if (this.boardingGroup[i].followUp.blFile instanceof File) {\r\n          this.boardingGroup[i].followUp.blFile = await toBase64(\r\n            this.boardingGroup[i].followUp.blFile,\r\n            false\r\n          );\r\n        }\r\n      }\r\n\r\n      this.dataProforma.boardingGroup = this.boardingGroup;\r\n      this.dataProforma.userId = this.dataProforma.userId == 0 ? null : this.dataProforma.userId;\r\n      \r\n      let result = await this.updateProforma(this.dataProforma);\r\n\r\n      if (result.data.success) {\r\n        this.alertSuccessText = \"Proforma atualizada com sucesso!\";\r\n        this.alertSuccess = true;\r\n        this.loadProformaData();\r\n        setTimeout(() => {\r\n          this.alertSuccess = false;\r\n        }, 3000);\r\n      } else this.loadingSave = false;\r\n    },\r\n\r\n    updateFullBoarding(item) {\r\n      let boardingGroup = this.boardingGroup.filter(\r\n        (x) => x.id == item.boardingGroupId\r\n      );\r\n\r\n      if (boardingGroup.length > 0 && boardingGroup[0].boardings.length > 0) {\r\n        let boarding = boardingGroup[0].boardings.filter(\r\n          (x) => x.id == item.boardingId\r\n        );\r\n        if (boarding.length > 0) boarding[0].fullBoarding = item.fullBoarding;\r\n        else\r\n          boarding.push({\r\n            id: item.boardingId,\r\n            fullBoarding: item.fullBoarding,\r\n          });\r\n      } else {\r\n        boardingGroup[0].boardings.push({\r\n          id: item.boardingId,\r\n          fullBoarding: item.fullBoarding,\r\n        });\r\n      }\r\n    },\r\n\r\n    async loadItemsProformaStatusSelect() {\r\n      this.getAllCategoryStatus(10)\r\n        .then((response) => {\r\n          this.itemsProformaStatus = response.data.result.items.map((x) => ({\r\n            value: x.id,\r\n            text: x.description,\r\n          }));\r\n        })\r\n        .catch(() => {\r\n          this.itemsProformaStatus = [];\r\n        });\r\n    },\r\n\r\n    async loadBoardingsData() {\r\n      if (this.id) {\r\n        this.loadingBoardings = true;\r\n        let response = await this.getBoardings(this.id);\r\n        if (response.data.result && response.data.result.length > 0) {\r\n          this.boardingGroup = response.data.result;\r\n          let boardingsPendency = this.boardingGroup.filter((x) => x.pendency);\r\n          if (boardingsPendency.length > 0) {\r\n            this.tabs = this.boardingGroup.findIndex(\r\n              (x) => x == boardingsPendency[0]\r\n            );\r\n            this.tabsInside = \"tab-2\";\r\n          } else if (this.reloadWithFicticious) {\r\n            this.tabs = this.boardingGroup.length - 1;\r\n            this.reloadWithFicticious = false;\r\n          }\r\n        } else {\r\n          this.isNew = true;\r\n        }\r\n        this.loadingBoardings = false;\r\n      }\r\n    },\r\n\r\n    async loadProformaData() {      \r\n      this.loadingSave = true;\r\n      let response = await this.getById(this.id);\r\n      this.dataProforma = response.data.result;\r\n\r\n      this.loadBoardingsData();\r\n\r\n      this.loadingSave = false;\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.boardingGroup.push({ ...this.boardingNew });\r\n    if (this.id) {\r\n      this.loadProformaData();\r\n      if (\r\n        this.hasPermission(this.$PermissionNames.permissionCategorySituationSee)\r\n      )\r\n        this.loadItemsProformaStatusSelect();\r\n    }\r\n  },\r\n\r\n  props: [\"id\"],\r\n  mixins: [validationRules, getRouterData],\r\n  components: {\r\n    TopSection,\r\n    ProformaMaterials,\r\n    ProformaFinancial,\r\n    EmbarqueFollowUp,\r\n    GeneralInformation,\r\n    Loading,\r\n    ModalConfirmSave,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.v-tab {\r\n  text-transform: none !important;\r\n}\r\n\r\n.background1 {\r\n  color: #c90c0f;\r\n  background: #fff;\r\n}\r\n\r\n.background2 {\r\n  color: #fff;\r\n  background: #c90c0f;\r\n}\r\n</style>\r\n"]}]}