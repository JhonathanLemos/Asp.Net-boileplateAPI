{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\ordemCompra\\financeiro.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\ordemCompra\\financeiro.vue","mtime":1680609356659},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KDQppbXBvcnQgTW9kYWxBZGRBbmRVcGRhdGVQYXltZW50cyBmcm9tICIuL01vZGFsQWRkQW5kVXBkYXRlUGF5bWVudHMudnVlIjsNCmNvbnN0IG1vZHVsZVBheW1lbnQgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiTW9kdWxlT3JkZW1EZUNvbXByYVBheW1lbnRzIik7DQpjb25zdCBtb2R1bGVDYXRlZ29yaWFTaXR1YWNhbyA9IGNyZWF0ZU5hbWVzcGFjZWRIZWxwZXJzKA0KICAiTW9kdWxlQ2F0ZWdvcmlhU2l0dWFjYW8iDQopOw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogWyJsaXN0UGF5bWVudHMiLCAiY3VycmVuY3kiXSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBoZWFkZXJzOiBbDQogICAgICB7IHRleHQ6ICIiLCB2YWx1ZTogImNvbDEiLCB3aWR0aDogIjUlIiB9LA0KICAgICAgeyB0ZXh0OiAiQ2F0ZWdvcmlhIiwgdmFsdWU6ICJjb2wyIiB9LA0KICAgICAgeyB0ZXh0OiAiRGF0YSBQcmV2aXN0YSIsIHZhbHVlOiAiY29sMyIgfSwNCiAgICAgIHsgdGV4dDogIkRhdGEgUmVhbGl6YWRhIiwgdmFsdWU6ICJjb2w0IiB9LA0KICAgICAgeyB0ZXh0OiAiVmFsb3IiLCB2YWx1ZTogImNvbDUiIH0sDQogICAgICB7IHRleHQ6ICJTaXR1YcOnw6NvIiwgdmFsdWU6ICJjb2w2IiB9LA0KICAgIF0sDQogICAgcm93czogW10sDQogICAgaWQ6IG51bGwsDQogICAgbW9kYWxFZGl0UGF5bWVudDogbnVsbCwNCiAgICBkaWFsb2dEZWxldGVDb25maXJtOiBmYWxzZSwNCiAgICBzdGF0dXM6IHRydWUsDQogICAgdG90YWxWYWx1ZVRhYmxlOiBudWxsLA0KICAgIHZhbG9yVG90YWxJcGk6IG51bGwsDQogICAgdGFibGVMb2FkaW5nOiB0cnVlLA0KICB9KSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubW9kdWxlUGF5bWVudC5tYXBBY3Rpb25zKHsNCiAgICAgIGdldEFsbEJ5UHVyY2hhc2U6ICJnZXRBbGxCeVB1cmNoYXNlIiwNCiAgICAgIGRlbGV0ZTogImRlbGV0ZSIsDQogICAgfSksDQoNCiAgICAuLi5tb2R1bGVDYXRlZ29yaWFTaXR1YWNhby5tYXBBY3Rpb25zKHsNCiAgICAgIGdldEJ5VHlwZTogImdldEJ5VHlwZSIsDQogICAgICBnZXRCeUlkOiAiZ2V0QnlJZCIsDQogICAgfSksDQoNCiAgICBidWlsZFJvd3MoZGF0YSkgew0KICAgICAgdGhpcy50b3RhbFZhbHVlVGFibGUgPSBudWxsOw0KICAgICAgZGF0YS5mb3JFYWNoKChlbGVtZW50KSA9PiB7DQogICAgICAgIHRoaXMudG90YWxWYWx1ZVRhYmxlID0gdGhpcy50b3RhbFZhbHVlVGFibGUgKyBlbGVtZW50LnRvdGFsVmFsdWU7DQogICAgICB9KTsNCg0KICAgICAgdGhpcy52YWxvclRvdGFsSXBpID0NCiAgICAgICAgdGhpcy50b3RhbFZhbHVlVGFibGUgKyAodGhpcy50b3RhbFZhbHVlVGFibGUgKiAzLjI1KSAvIDEwMDsNCiAgICAgIHRoaXMucm93cyA9IGRhdGEubWFwKChlKSA9PiAoew0KICAgICAgICBjb2wxOiBlLmlkLA0KICAgICAgICBjb2wyOiBlLnB1cmNoYXNlT3JkZXJQYXltZW50Q2F0ZWdvcnlEZXNjcmlwdGlvbiwNCiAgICAgICAgY29sMzogZS5leHBlY3RlZERhdGUsDQogICAgICAgIGNvbDQ6IGUuZGF0ZUNvbmNsdXNpb24sDQogICAgICAgIGNvbDU6IGUudG90YWxWYWx1ZSwNCiAgICAgICAgY29sNjogZS5wYXltZW50U2l0dWF0aW9uSXRlbXMsDQogICAgICB9KSk7DQogICAgfSwNCg0KICAgIHNldEl0ZW1Ub0RlbGV0ZShpZCkgew0KICAgICAgdGhpcy5kaWFsb2dEZWxldGVDb25maXJtID0gdHJ1ZTsNCiAgICAgIHRoaXMuaWRUb0RlbGV0ZSA9IGlkOw0KICAgIH0sDQoNCiAgICBzZXRTdWNjZXNzTWVzc2FnZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoInNldFN1Y2Nlc3NNZXNzYWdlIiwgdHJ1ZSk7DQogICAgfSwNCg0KICAgIGFzeW5jIGRlbGV0ZVBheW1lbnQoKSB7DQogICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmRlbGV0ZSh0aGlzLmlkVG9EZWxldGUpOw0KICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5nZXRQYXltZW50c0J5UHVyY2hhc2UoKTsNCiAgICAgICAgdGhpcy5kaWFsb2dEZWxldGVDb25maXJtID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIGdldFBheW1lbnRzQnlQdXJjaGFzZSgpIHsNCiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0QWxsQnlQdXJjaGFzZSh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOw0KICAgICAgdGhpcy5idWlsZFJvd3MocmVzcG9uc2UuZGF0YS5yZXN1bHQpOw0KICAgICAgdGhpcy50YWJsZUxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIHRoaXMuJGVtaXQoInNldExpc3RzVG9UcnVlIiwgdHJ1ZSk7DQogICAgICB0aGlzLiRlbWl0KCJzZXRMaXN0VG9GYWxzZSIsIGZhbHNlKTsNCiAgICB9LA0KDQogICAgc2V0RWRpdGlvbihpZCkgew0KICAgICAgdGhpcy5tb2RhbEVkaXRQYXltZW50ID0gdHJ1ZTsNCiAgICAgIHRoaXMuaWQgPSBpZDsNCiAgICB9LA0KDQogICAgYXN5bmMgc2V0Q2F0ZWdvcnkoaWQpIHsNCiAgICAgIHZhciBiID0gYXdhaXQgdGhpcy5nZXRCeUlkKGlkKTsNCiAgICAgIHJldHVybiBiLmRhdGEucmVzdWx0Ow0KICAgIH0sDQogIH0sDQoNCiAgd2F0Y2g6IHsNCiAgICBsaXN0UGF5bWVudHMoKSB7DQogICAgICBpZiAodGhpcy5saXN0UGF5bWVudHMpIHRoaXMuZ2V0UGF5bWVudHNCeVB1cmNoYXNlKCk7DQogICAgfSwNCiAgfSwNCg0KICBjb21wdXRlZDogew0KICAgIGVkaXRQZXJtaXNzaW9uKCkgew0KICAgICAgcmV0dXJuIHRoaXMuaGFzUGVybWlzc2lvbigNCiAgICAgICAgdGhpcy4kUGVybWlzc2lvbk5hbWVzLnBlcm1pc3Npb25QdXJjaGFzZU9yZGVyRWRpdA0KICAgICAgKTsNCiAgICB9LA0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRQYXltZW50c0J5UHVyY2hhc2UoKTsNCiAgfSwNCg0KICBjb21wb25lbnRzOiB7IE1vZGFsQWRkQW5kVXBkYXRlUGF5bWVudHMgfSwNCn07DQo="},{"version":3,"sources":["financeiro.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"financeiro.vue","sourceRoot":"src/views/ordemCompra","sourcesContent":["<template>\r\n  <div class=\"d-flex flex-column justify-space-between\">\r\n    <v-row class=\"mr-0 mt-0 mb-3\" justify=\"end\">\r\n      <v-btn\r\n        v-if=\"editPermission\"\r\n        rounded\r\n        small\r\n        color=\"#FEE066\"\r\n        class=\"asia-neutral--text mr-2 button\"\r\n        @click=\"$emit('addPayment')\"\r\n      >\r\n      <v-icon small icon class=\"mr-2\">mdi-plus</v-icon>\r\n      <div class=\"buttonText\">Adicionar Pagamento</div>\r\n      </v-btn>\r\n    </v-row>\r\n    <div class=\"flex-grow-1 rounded-lg pa-4 white elevation-5\">\r\n      <!-- Data Table -->\r\n      <v-data-table\r\n        disable-sort\r\n        :headers=\"editPermission ? headers : headers.filter((x) => x.value != 'col1')\"\r\n        :items=\"rows\"\r\n        :loading=\"tableLoading\"\r\n        noDataText=\"Nenhum registro encontrado\"\r\n        loading-text=\"Aguarde, carregando pagamentos...\"\r\n        :footer-props=\"{\r\n          itemsPerPageOptions: [10, 50, 100],\r\n          itemsPerPageText: 'Itens por Página',\r\n        }\"\r\n      >\r\n        <!-- Icone Edição -->\r\n        <template v-slot:[`item.col1`]=\"{ item }\">\r\n          <div class=\"d-flex flex-nowrap\">\r\n            <v-btn icon @click=\"setEdition(item.col1)\">\r\n              <v-icon>mdi-pencil</v-icon>\r\n            </v-btn>\r\n\r\n            <v-btn icon @click=\"setItemToDelete(item.col1)\">\r\n              <v-icon> mdi-delete </v-icon>\r\n            </v-btn>\r\n          </div>\r\n        </template>\r\n\r\n        <template v-slot:[`item.col3`]=\"{ item }\">\r\n          <div>{{ item.col3 | dateFormat }}</div>\r\n        </template>\r\n\r\n        <template v-slot:[`item.col4`]=\"{ item }\">\r\n          <div>{{ item.col4 | dateFormat }}</div>\r\n        </template>\r\n\r\n        <template v-slot:[`item.col5`]=\"{ item }\">\r\n          <div v-if=\"item.col5 && currency == 'R$'\">\r\n            {{ item.col5 | currencyFormatReal }}\r\n          </div>\r\n\r\n          <div v-else-if=\"item.col5 && currency == 'USD'\">\r\n            {{ item.col5 | currencyFormat }}\r\n          </div>\r\n        </template>\r\n        <!-- Status -->\r\n        <template v-slot:[`item.col6`]=\"{ item }\">\r\n          <v-chip\r\n            :color=\"item.col6[0] == '#FFFFFF' ? 'black' : item.col6[0]\"\r\n            outlined\r\n            style=\"font-weight: 500\"\r\n          >\r\n            {{ item.col6[1] }}\r\n          </v-chip>\r\n        </template>\r\n\r\n        <template v-slot:[`body.append`]>\r\n          <div class=\"d-flex align-center pa-2\" style=\"width: 280%\">\r\n            <span class=\"flex-nowrap mr-2\" style=\"font-size: 12px\"\r\n              >Valor total com IPI (3,25%)</span\r\n            >\r\n            <b v-if=\"currency == 'USD'\"\r\n              ><span style=\"font-size: 14px\">{{\r\n                valorTotalIpi | currencyFormat\r\n              }}</span></b\r\n            >\r\n\r\n            <b v-else-if=\"currency == 'R$'\"\r\n              ><span style=\"font-size: 14px\">{{\r\n                valorTotalIpi | currencyFormatReal\r\n              }}</span></b\r\n            >\r\n          </div>\r\n        </template>\r\n      </v-data-table>\r\n    </div>\r\n\r\n    <!-- DIALOG CONFIRM DELETE -->\r\n    <v-dialog v-model=\"dialogDeleteConfirm\" max-width=\"350px\">\r\n      <div class=\"white pa-6 d-flex flex-column align-center text-center\">\r\n        <v-icon style=\"font-size: 60px\" color=\"#F75A02\"> mdi-alert </v-icon>\r\n\r\n        <span\r\n          class=\"asia-neutral--text text--var-1 my-8\"\r\n          style=\"font-size: 15px\"\r\n        >\r\n          Deseja <b>remover</b> o <b>pagamento</b>? <br />\r\n          Esta ação <b>não</b> pode ser <b>desfeita</b>.\r\n        </span>\r\n\r\n        <div class=\"d-flex flex-row justify-end\">\r\n          <v-btn\r\n            rounded\r\n            large\r\n            text\r\n            class=\"mr-4\"\r\n            @click=\"dialogDeleteConfirm = false\"\r\n            >CANCELAR</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            rounded\r\n            large\r\n            color=\"#F75A02\"\r\n            class=\"white--text\"\r\n            @click=\"deletePayment()\"\r\n            >REMOVER</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-dialog>\r\n\r\n    <modal-add-and-update-payments\r\n      :id=\"id\"\r\n      :currency=\"currency\"\r\n      v-model=\"modalEditPayment\"\r\n      @getPayments=\"getPaymentsByPurchase\"\r\n      @setSuccessMessage=\"setSuccessMessage\"\r\n      @resetId=\"id = null\"\r\n    ></modal-add-and-update-payments>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\n\r\nimport ModalAddAndUpdatePayments from \"./ModalAddAndUpdatePayments.vue\";\r\nconst modulePayment = createNamespacedHelpers(\"ModuleOrdemDeCompraPayments\");\r\nconst moduleCategoriaSituacao = createNamespacedHelpers(\r\n  \"ModuleCategoriaSituacao\"\r\n);\r\nexport default {\r\n  props: [\"listPayments\", \"currency\"],\r\n  data: () => ({\r\n    headers: [\r\n      { text: \"\", value: \"col1\", width: \"5%\" },\r\n      { text: \"Categoria\", value: \"col2\" },\r\n      { text: \"Data Prevista\", value: \"col3\" },\r\n      { text: \"Data Realizada\", value: \"col4\" },\r\n      { text: \"Valor\", value: \"col5\" },\r\n      { text: \"Situação\", value: \"col6\" },\r\n    ],\r\n    rows: [],\r\n    id: null,\r\n    modalEditPayment: null,\r\n    dialogDeleteConfirm: false,\r\n    status: true,\r\n    totalValueTable: null,\r\n    valorTotalIpi: null,\r\n    tableLoading: true,\r\n  }),\r\n\r\n  methods: {\r\n    ...modulePayment.mapActions({\r\n      getAllByPurchase: \"getAllByPurchase\",\r\n      delete: \"delete\",\r\n    }),\r\n\r\n    ...moduleCategoriaSituacao.mapActions({\r\n      getByType: \"getByType\",\r\n      getById: \"getById\",\r\n    }),\r\n\r\n    buildRows(data) {\r\n      this.totalValueTable = null;\r\n      data.forEach((element) => {\r\n        this.totalValueTable = this.totalValueTable + element.totalValue;\r\n      });\r\n\r\n      this.valorTotalIpi =\r\n        this.totalValueTable + (this.totalValueTable * 3.25) / 100;\r\n      this.rows = data.map((e) => ({\r\n        col1: e.id,\r\n        col2: e.purchaseOrderPaymentCategoryDescription,\r\n        col3: e.expectedDate,\r\n        col4: e.dateConclusion,\r\n        col5: e.totalValue,\r\n        col6: e.paymentSituationItems,\r\n      }));\r\n    },\r\n\r\n    setItemToDelete(id) {\r\n      this.dialogDeleteConfirm = true;\r\n      this.idToDelete = id;\r\n    },\r\n\r\n    setSuccessMessage() {\r\n      this.$emit(\"setSuccessMessage\", true);\r\n    },\r\n\r\n    async deletePayment() {\r\n      var response = await this.delete(this.idToDelete);\r\n      if (response.status == 200) {\r\n        this.getPaymentsByPurchase();\r\n        this.dialogDeleteConfirm = false;\r\n      }\r\n    },\r\n\r\n    async getPaymentsByPurchase() {\r\n      var response = await this.getAllByPurchase(this.$route.params.id);\r\n      this.buildRows(response.data.result);\r\n      this.tableLoading = false;\r\n      this.$emit(\"setListsToTrue\", true);\r\n      this.$emit(\"setListToFalse\", false);\r\n    },\r\n\r\n    setEdition(id) {\r\n      this.modalEditPayment = true;\r\n      this.id = id;\r\n    },\r\n\r\n    async setCategory(id) {\r\n      var b = await this.getById(id);\r\n      return b.data.result;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    listPayments() {\r\n      if (this.listPayments) this.getPaymentsByPurchase();\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    editPermission() {\r\n      return this.hasPermission(\r\n        this.$PermissionNames.permissionPurchaseOrderEdit\r\n      );\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    this.getPaymentsByPurchase();\r\n  },\r\n\r\n  components: { ModalAddAndUpdatePayments },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.buttonText {\r\n  font-family: \"Inter\";\r\n  font-style: normal;\r\n  font-weight: 800;\r\n  font-size: 15px;\r\n  line-height: 21px;\r\n}\r\n\r\n.button\r\n{\r\n  width: 311px;\r\n  height: 40px;\r\n}\r\n</style>\r\n"]}]}