{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\permissoes\\perfilUsuario.vue?vue&type=style&index=0&id=34602e92&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\permissoes\\perfilUsuario.vue","mtime":1683311429850},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1683229778387},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1683229781560},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1683229779724},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudi1tZXNzYWdlcyAudGhlbWUtLWxpZ2h0IHsKICBkaXNwbGF5OiBub25lOwp9Ci5jaGVja2JveCA+Pj4gLnYtbWVzc2FnZXMgewogIG1pbi1oZWlnaHQ6IDBweCAhaW1wb3J0YW50Owp9Ci5jaGVja2JveCA+Pj4gLnYtbGFiZWwgewogIGZvbnQtc2l6ZTogMTRweDsKICBmb250LWZhbWlseTogaW50ZXI7CiAgY29sb3I6ICMxYTFhMWE7Cn0KLnYtYnRuLS1pY29uLnYtc2l6ZS0tZGVmYXVsdCAudi1pY29uLAoudi1idG4tLWZhYi52LXNpemUtLWRlZmF1bHQgLnYtaWNvbiB7CiAgZm9udC1zaXplOiAyMHB4ICFpbXBvcnRhbnQ7Cn0KLnYtYnRuLS1pY29uLnYtc2l6ZS0tZGVmYXVsdCB7CiAgaGVpZ2h0OiAwcHggIWltcG9ydGFudDsKICB3aWR0aDogMHB4ICFpbXBvcnRhbnQ7Cn0KLnYtaW5wdXQtLXNlbGVjdGlvbi1jb250cm9scyB7CiAgbWFyZ2luLXRvcDogMHB4ICFpbXBvcnRhbnQ7CiAgcGFkZGluZy10b3A6IDBweCAhaW1wb3J0YW50Owp9Ci5idG4gPj4+IC52LWJ0bl9fY29udGVudCB7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbiAhaW1wb3J0YW50Owp9Ci5jdXN0b20tYnRuLnYtYnRuOmhvdmVyIHsKICBjdXJzb3I6IGRlZmF1bHQ7Cn0KLmhvdmVyLWNsaWNrOmhvdmVyIHsKICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["perfilUsuario.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"perfilUsuario.vue","sourceRoot":"src/views/usuarios/permissoes","sourcesContent":["<template>\n  <div style=\"overflow: auto; width: 100%\">\n    <v-dialog v-model=\"warningPermissoes\" max-width=\"450px\">\n      <div\n        class=\"white d-flex flex-column align-center pa-4\"\n        style=\"border-radius: 5px\"\n      >\n        <v-icon style=\"font-size: 50px\" color=\"#F75A02\">mdi-alert</v-icon>\n        <span class=\"mx-4 mt-4\" style=\"text-align: justify\">\n          Ao retornar as permissões para o padrão do perfil do usuário, as\n          customizações efetuadas serão perdidas. Esta ação não poderá ser\n          desfeita. Deseja continuar?\n        </span>\n\n        <div class=\"d-flex mt-10\">\n          <v-btn\n            @click=\"warningPermissoes = false\"\n            style=\"font-size: 15px\"\n            rounded\n            class=\"mr-8\"\n            color=\"#1A1A1A\"\n            text\n            large\n            >CANCELAR</v-btn\n          >\n\n          <v-btn\n            @click=\"applyDefault()\"\n            style=\"font-size: 15px\"\n            dark\n            rounded\n            color=\"#F75A02\"\n            large\n            >CONTINUAR</v-btn\n          >\n        </div>\n      </div>\n    </v-dialog>\n\n    <v-dialog v-model=\"warningCustomizacao\" max-width=\"450px\">\n      <div\n        class=\"white d-flex flex-column align-center pa-4\"\n        style=\"border-radius: 5px\"\n      >\n        <v-icon style=\"font-size: 50px\" color=\"#F75A02\">mdi-alert</v-icon>\n        <span class=\"mx-4 mt-4\" style=\"text-align: center\">\n          Ao alterar o perfil do usuário, as customizações efetuadas serão\n          perdidas. Esta ação não poderá ser desfeita. Deseja continuar?\n        </span>\n\n        <div class=\"d-flex mt-10\">\n          <v-btn\n            @click=\"cancelChangeRoleProfile\"\n            style=\"font-size: 15px\"\n            rounded\n            class=\"mr-8\"\n            color=\"#1A1A1A\"\n            text\n            large\n            >CANCELAR</v-btn\n          >\n\n          <v-btn\n            style=\"font-size: 15px\"\n            dark\n            rounded\n            color=\"#F75A02\"\n            large\n            @click=\"changeProfile()\"\n            >CONTINUAR</v-btn\n          >\n        </div>\n      </div>\n    </v-dialog>\n\n    <v-dialog v-model=\"dialogNavio\" max-width=\"360px\">\n      <div class=\"white pa-5 d-flex flex-column align-center text-center\">\n        <v-icon style=\"font-size: 60px\" color=\"#E10000\">\n          mdi-alert-octagon\n        </v-icon>\n\n        <h4\n          class=\"myApi-neutral--text text--var-1 mb-8 mt-8\"\n          style=\"font-size: 15px\"\n        >\n          Para visualizar a viagem do navio, o sistema irá habilitar as opções\n          Follow-up Detalhado e Follow-up Resumido para o perfil selecionado.\n        </h4>\n\n        <div class=\"d-flex flex-row justify-end\">\n          <v-btn\n            style=\"background: #e10000\"\n            dark\n            rounded\n            large\n            text\n            class=\"mr-4\"\n            @click=\"dialogNavio = false\"\n            >FECHAR MENSAGEM</v-btn\n          >\n        </div>\n      </div>\n    </v-dialog>\n\n    <v-form ref=\"form\">\n      <div class=\"d-flex align-center mb-6\">\n        <v-select\n          :disabled=\"readonly\"\n          v-model=\"roleProfileComp\"\n          class=\"mr-8\"\n          :items=\"\n            user.userProfile == 1\n              ? itemsPerfilUsuarioCliente\n              : itemsPerfilUsuariomyApiMetals\n          \"\n          label=\"Perfil de Usuário\"\n          :rules=\"[rules.required]\"\n          validate-on-blur\n        >\n        </v-select>\n\n        <div class=\"d-flex flex-column justify-start\">\n          <v-btn\n            small\n            outlined\n            color=\"#107154\"\n            class=\"custom-btn px-12 mx-4 mb-2\"\n            style=\"font-weight: 800; font-size: 12px\"\n            rounded\n            v-if=\"user.isCustomized\"\n          >\n            <span style=\"text-transform: capitalize\">Customizado</span>\n          </v-btn>\n\n          <v-btn\n            small\n            outlined\n            color=\"#107154\"\n            class=\"custom-btn px-12 mx-4 mb-2\"\n            style=\"font-weight: 800; font-size: 12px\"\n            rounded\n            v-else\n          >\n            <span style=\"text-transform: capitalize\">Padrão</span>\n          </v-btn>\n\n          <span\n            @click=\"openWarningPermissoes()\"\n            class=\"mx-4 hover-click\"\n            style=\"font-weight: 600;\n              font-family: 'Inter';\n              font-size: 12px;\n              border-bottom: 1px solid;\n            \"\n          >\n            Retornar permissões para padrão\n          </span>\n        </div>\n      </div>\n    </v-form>\n\n    <v-expansion-panels class=\"d-flex flex-column\">\n      <v-expansion-panel style=\"width: 100%\">\n        <v-expansion-panel-header\n          class=\"myApi-text\"\n          style=\"color: #fff; background: #a10a0c\"\n        >\n          Aplicativo\n        </v-expansion-panel-header>\n\n        <v-expansion-panel-content>\n          <Loading\n            class=\"mt-3 pa-2 align-self-center\"\n            v-if=\"loading\"\n            :size=\"30\"\n          />\n          <div v-else class=\"d-flex flex-column mt-4\">\n            <v-checkbox\n              v-for=\"(appItem, i) in allAppList\"\n              :key=\"i\"\n              :disabled=\"isDisable(appItem)\"\n              v-model=\"appItem.isGranted\"\n              style=\"font-size: 8px\"\n              :color=\"defineColorSelectButton(appItem)\"\n              class=\"checkbox mb-3\"\n              :label=\"appItem.displayName\"\n              @click=\"checkboxClick(appItem)\"\n              @change=\"onChangePermission()\"\n            ></v-checkbox>\n          </div>\n        </v-expansion-panel-content>\n      </v-expansion-panel>\n\n      <v-expansion-panel v-if=\"!isAppProfile()\" style=\"width: 100%\">\n        <v-expansion-panel-header\n          class=\"myApi-text\"\n          style=\"color: #fff; background: #a10a0c\"\n        >\n          Administrativo\n        </v-expansion-panel-header>\n\n        <v-expansion-panel-content>\n          <Loading\n            class=\"mt-3 pa-2 align-self-center\"\n            v-if=\"loading\"\n            :size=\"30\"\n          />\n          <div v-else class=\"d-flex flex-column\">\n            <div class=\"d-flex my-2 mb-6\" style=\"width: 50%\">\n              <span style=\"width: 45%\" class=\"mr-10\">Menu</span>\n              <span style=\"width: 5%\" class=\"ml-10\">Habilita</span>\n            </div>\n\n            <div\n              v-for=\"(administrativeItem, i) in allAdministrativeList\"\n              :key=\"i\"\n              class=\"d-flex align-center mb-4\"\n              style=\"width: 50%\"\n            >\n              <div\n                class=\"d-flex align-center mr-10 flex-nowrap\"\n                style=\"width: 45%\"\n              >\n                <v-checkbox\n                  :disabled=\"readonly\"\n                  color=\"#C90C0F\"\n                  class=\"checkbox\"\n                  v-model=\"administrativeItem.isGranted\"\n                  :label=\"administrativeItem.displayName\"\n                  @change=\"onChangePermissionParent(administrativeItem)\"\n                ></v-checkbox>\n              </div>\n\n              <div\n                class=\"d-flex align-center ml-10\"\n                v-if=\"administrativeItem.isGranted\"\n                style=\"width: 5%\"\n              >\n                <div class=\"d-flex flex-column align-center ml-3\">\n                  <v-btn\n                    class=\"mb-2 mr-5 btn\"\n                    icon\n                    color=\"#C90C0F\"\n                    :disabled=\"readonly\"\n                  >\n                    <v-icon>mdi-eye</v-icon>\n                    <span style=\"font-size: 13px; text-transform: capitalize\"\n                      >Ver</span\n                    >\n                  </v-btn>\n                </div>\n\n                <div class=\"d-flex flex-column align-center ml-6\">\n                  <v-btn\n                    class=\"mb-2 ml-2 btn\"\n                    icon\n                    :style=\"{\n                      color: administrativeItem.childrenEdit.isGranted\n                        ? colorRed\n                        : colorGrey,\n                    }\"\n                    @click=\"\n                      changePermissionChild(administrativeItem.childrenEdit)\n                    \"\n                    :disabled=\"readonly\"\n                  >\n                    <v-icon>mdi-pencil</v-icon>\n                    <span style=\"font-size: 13px; text-transform: capitalize\"\n                      >Editar</span\n                    >\n                  </v-btn>\n                </div>\n              </div>\n            </div>\n          </div>\n        </v-expansion-panel-content>\n      </v-expansion-panel>\n    </v-expansion-panels>\n  </div>\n</template>\n\n<script>\nimport validationRules from \"@/mixins/validationRules.js\";\nimport Loading from \"../../../components/Loading.vue\";\n\nexport default {\n  props: [\"userId\", \"user\", \"readonly\"],\n\n  components: {\n    Loading,\n  },\n\n  computed: {\n    validateForm() {\n      return this.$refs.form.validate();\n    },\n    roleProfileComp: {\n      get: function () {\n        return this.user.roleProfile;\n      },\n      set: function (value) {\n        this.userProfileOld = this.user.roleProfile;\n        this.user.roleProfile = value;\n        if (this.user.isCustomized) {\n          this.warningCustomizacao = true;\n        } else {\n          this.getAllPermissions(true);\n          this.user.isCustomized = false;\n        }\n      },\n    },\n  },\n\n  data: () => ({\n    userProfileOld: null,\n    warningCustomizacao: false,\n    warningPermissoes: false,\n    loading: false,\n    allAppList: [],\n    allAdministrativeList: [],\n\n    itemsPerfilUsuariomyApiMetals: [\n      { text: \"myApi Metals | Marketing\", value: 1 },\n      { text: \"myApi Metals | Máquinas/Diversos\", value: 2 },\n      { text: \"myApi Metals | Intermediação com permissões\", value: 3 },\n      { text: \"myApi Metals | Intermediação sem permissões\", value: 4 },\n      { text: \"myApi Metals | Distribuição com permissões\", value: 5 },\n      { text: \"myApi Metals | Distribuição sem permissões\", value: 6 },\n      { text: \"myApi Metals | Direção\", value: 7 },\n    ],\n\n    itemsPerfilUsuarioCliente: [\n      { text: \"Cliente | Gerencial\", value: 8 },\n      { text: \"Cliente | Direção\", value: 9 },\n      { text: \"Cliente | Burocrático\", value: 10 },\n      { text: \"Cliente | Despachante\", value: 11 },\n    ],\n\n    colorGrey: \"#8C8C8C\",\n    colorRed: \"#C90C0F\",\n    dialogNavio: false,\n  }),\n\n  methods: {\n    isDisable(item) {\n      if (item.id == \"App.Home\" || item.id == \"App.Cotation\") {\n        return true;\n      }\n\n      return this.readonly;\n    },\n\n    defineColorSelectButton(item) {\n      if (item.id == \"App.Home\" || item.id == \"App.Cotation\") {\n        return \"#CCCCCC\";\n      }\n\n      return \"#C90C0F\";\n    },\n\n    cancelChangeRoleProfile() {\n      this.user.roleProfile = this.userProfileOld;\n      this.warningCustomizacao = false;\n    },\n\n    changeProfile() {\n      this.warningCustomizacao = false;\n      this.getAllPermissions(true);\n      this.user.isCustomized = false;\n    },\n\n    onChangePermissionParent(parent) {\n      if (!parent.isGranted) parent.childrenEdit.isGranted = false;\n      this.onChangePermission();\n    },\n\n    changePermissionChild(child) {\n      child.isGranted = !child.isGranted;\n      this.onChangePermission();\n    },\n\n    openWarningPermissoes() {\n      if (!this.readonly) this.warningPermissoes = true;\n    },\n\n    applyDefault() {\n      this.warningPermissoes = false;\n      this.getAllPermissions(true);\n      this.user.isCustomized = false;\n    },\n\n    getGrantedPermissions() {\n      let grantedPermissions = [];\n\n      this.allAppList.forEach((x) => {\n        if (x.isGranted) grantedPermissions.push(x.id);\n      });\n\n      this.allAdministrativeList.forEach((x) => {\n        if (x.isGranted) {\n          grantedPermissions.push(x.id);\n          if (x.childrenEdit.isGranted)\n            grantedPermissions.push(x.childrenEdit.id);\n        }\n      });\n\n      return grantedPermissions;\n    },\n\n    checkboxClick(item) {\n      if (item.id == \"App.FollowUpSummary\" && !item.isGranted) {\n        let objIndex = this.allAppList.findIndex(\n          (obj) => obj.id == \"App.FollowUpDetailed\"\n        );\n        this.allAppList[objIndex].isGranted = false;\n      }\n\n      if (item.id == \"App.FollowUpDetailed\" && item.isGranted) {\n        let objIndex = this.allAppList.findIndex(\n          (obj) => obj.id == \"App.FollowUpSummary\"\n        );\n        this.allAppList[objIndex].isGranted = true;\n      }\n\n      if (item.id == \"App.Ship\" && item.isGranted) {\n        let followSummaryIndex = this.allAppList.findIndex(\n          (obj) => obj.id == \"App.FollowUpSummary\"\n        );\n\n        let followUpDetailedIndex = this.allAppList.findIndex(\n          (obj) => obj.id == \"App.FollowUpDetailed\"\n        );\n\n        this.allAppList[followSummaryIndex].isGranted = true;\n        this.allAppList[followUpDetailedIndex].isGranted = true;\n\n        this.dialogNavio = true;\n      }\n    },\n\n    onChangePermission() {\n      let notDefaultPermissions = this.allAppList.filter(\n        (x) => x.isGranted != x.defaultValue\n      );\n\n      if (notDefaultPermissions.length > 0) {\n        this.user.isCustomized = true;\n        return;\n      }\n\n      notDefaultPermissions = this.allAdministrativeList.filter(\n        (x) => x.isGranted != x.defaultValue\n      );\n      if (notDefaultPermissions.length > 0) {\n        this.user.isCustomized = true;\n        return;\n      }\n\n      notDefaultPermissions = this.allAdministrativeList.filter(\n        (x) => x.childrenEdit.isGranted != x.childrenEdit.defaultValue\n      );\n      if (notDefaultPermissions.length > 0) {\n        this.user.isCustomized = true;\n        return;\n      }\n\n      this.user.isCustomized = false;\n    },\n\n    isAppProfile() {\n      if (\n        this.user.roleProfile == 8 ||\n        this.user.roleProfile == 9 ||\n        this.user.roleProfile == 10 ||\n        this.user.roleProfile == 11\n      )\n        return true;\n      else return false;\n    },\n\n    mapPermissions(permissions) {\n      return permissions.map((item) => ({\n        id: item.name,\n        displayName: item.displayName,\n        isGranted:\n          item.name == \"App.Home\" || item.name == \"App.Cotation\"\n            ? true\n            : item.isGranted,\n        defaultValue:\n          item.name == \"App.Home\" || item.name == \"App.Cotation\"\n            ? true\n            : item.defaultValue,\n        childrenEdit:\n          item.children.length > 0\n            ? {\n                id: item.children[0].name,\n                displayName: item.children[0].displayName,\n                isGranted: item.children[0].isGranted,\n                defaultValue: item.children[0].defaultValue,\n              }\n            : null,\n      }));\n    },\n\n    async getAllPermissions(isProfileChange) {\n      this.loadingPermissions = true;\n      await this.$store\n        .dispatch({\n          type: \"ModuleRoles/getAllPermissionsByProfile\",\n          data: {\n            userId: this.userId,\n            roleProfile: this.user.roleProfile,\n            isProfileChange: isProfileChange,\n          },\n        })\n        .then((result) => {\n          this.allAppList = this.mapPermissions(result.appPermissions);\n          this.allAdministrativeList = this.mapPermissions(\n            result.administrativePermissions\n          );\n          this.loadingPermissions = false;\n        });\n    },\n  },\n\n  mixins: [validationRules],\n};\n</script>\n\n<style scoped>\n.v-messages .theme--light {\n  display: none;\n}\n.checkbox >>> .v-messages {\n  min-height: 0px !important;\n}\n.checkbox >>> .v-label {\n  font-size: 14px;\n  font-family: inter;\n  color: #1a1a1a;\n}\n.v-btn--icon.v-size--default .v-icon,\n.v-btn--fab.v-size--default .v-icon {\n  font-size: 20px !important;\n}\n.v-btn--icon.v-size--default {\n  height: 0px !important;\n  width: 0px !important;\n}\n.v-input--selection-controls {\n  margin-top: 0px !important;\n  padding-top: 0px !important;\n}\n.btn >>> .v-btn__content {\n  flex-direction: column !important;\n}\n.custom-btn.v-btn:hover {\n  cursor: default;\n}\n.hover-click:hover {\n  cursor: pointer !important;\n}\n</style>\n"]}]}