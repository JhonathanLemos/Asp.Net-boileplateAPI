{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\customersDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\customersDialog.vue","mtime":1683311429860},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7IGRpYWxvZ1ZpbmN1bGFyQ2xpZW50ZTogbnVsbCwgdmFsdWU6IG51bGwgfSwKICBkYXRhOiAoKSA9PiAoewogICAgc2VhcmNoOiAiIiwKICAgIG5vcm1hbENsYXNzOiAiZC1mbGV4IGFsaWduLWNlbnRlciBwYS00IG14LTMgbXktMyIsCiAgICBjbGlja2VkQ2xhc3M6ICJkLWZsZXggYWxpZ24tY2VudGVyIHBhLTQgbXgtMyBteS0zIGdydXBvcyIsCiAgICBvbmx5Q3VzdG9tZXJzTGlzdDogW10sCiAgICBoaWRlT25seUN1c3RvbWVyczogbnVsbCwKICAgIG9ubHlDdXN0b21lcnNTZWxlY3RlZDogW10sCiAgICB2YWxpZGF0ZU9ubHlDdXN0b21lcnNDbGFzczogW10sCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIGN1c3RvbWVyc0RhdGE6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwogICAgICB9LAogICAgICBzZXQodikgewogICAgICAgIHRoaXMuJGVtaXQoImlucHV0Iiwgdik7CiAgICAgIH0sCiAgICB9LAogICAgZGlhbG9nOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2dWaW5jdWxhckNsaWVudGU7CiAgICAgIH0sCiAgICAgIHNldCgpIHsKICAgICAgICB0aGlzLm9ubHlDdXN0b21lcnNMaXN0ID0gW107CiAgICAgICAgdGhpcy5zZWFyY2hPbmx5Q3VzdG9tZXIgPSAiIjsKICAgICAgICB0aGlzLiRlbWl0KCJkaWFsb2dWaW5jdWxhckNsaWVudGUiLCBmYWxzZSk7CiAgICAgIH0sCiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBzZWFyY2goKSB7CiAgICAgIHRoaXMuc2VhcmNoT25seUN1c3RvbWVycygpOwogICAgfSwKCiAgICBjdXN0b21lcnNEYXRhKCkgewogICAgICBpZiAodGhpcy5jdXN0b21lcnNEYXRhKSB7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgICAgdGhpcy52YWxpZGF0ZU9ubHlDdXN0b21lcnNDbGFzcyA9IFtdOwogICAgICAgICAgdGhpcy5jdXN0b21lcnNEYXRhLmZvckVhY2goKHgpID0+IHsKICAgICAgICAgICAgdGhpcy52YWxpZGF0ZU9ubHlDdXN0b21lcnNDbGFzcy5wdXNoKHguaWQpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGlhbG9nKCkgewogICAgICBpZiAodGhpcy5kaWFsb2cpIHRoaXMuc2VhcmNoT25seUN1c3RvbWVycygpOwogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKCJNb2R1bGVDbGllbnRlcyIsIHsKICAgICAgZ2V0QWxsU2VsZWN0Q3VzdG9tZXJzOiAiZ2V0QWxsIiwKICAgICAgc2VhcmNoQW5kR2V0Q3VzdG9tZXJzV2l0aG91dElkOiAic2VhcmNoQW5kR2V0Q3VzdG9tZXJzV2l0aG91dElkIiwKICAgICAgZ2V0Q3VzdG9tZXJzQnlHcm91cDogImdldEN1c3RvbWVyc0J5R3JvdXAiLAogICAgICBnZXRDdXN0b21lckJ5SWQ6ICJnZXRCeUlkIiwKICAgIH0pLAoKICAgIGFzeW5jIHNlYXJjaE9ubHlDdXN0b21lcnNPbkNsZWFuKCkgewogICAgICB0aGlzLnNlYXJjaCA9ICIiOwogICAgICB0aGlzLnNlYXJjaE9ubHlDdXN0b21lcnMoKTsKICAgIH0sCgogICAgYXN5bmMgc2VhcmNoT25seUN1c3RvbWVycygpIHsKICAgICAgdGhpcy5oaWRlT25seUN1c3RvbWVycyA9IGZhbHNlOwogICAgICB2YXIgcGFnZSA9IFsKICAgICAgICB7CiAgICAgICAgICBzZWFyY2g6IHRoaXMuc2VhcmNoLAogICAgICAgIH0sCiAgICAgIF07CiAgICAgIHZhciByZXN1bHQgPSBhd2FpdCB0aGlzLnNlYXJjaEFuZEdldEN1c3RvbWVyc1dpdGhvdXRJZChwYWdlWzBdKTsKICAgICAgdmFyIGZpbHRlcmVkTGlzdCA9IHJlc3VsdC5kYXRhLnJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmN1c3RvbWVyc0RhdGEgJiYgdGhpcy5jdXN0b21lcnNEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmN1c3RvbWVyc0RhdGEuZm9yRWFjaCgodikgPT4gewogICAgICAgICAgZmlsdGVyZWRMaXN0ID0gZmlsdGVyZWRMaXN0LmZpbHRlcigoeCkgPT4geC5pZCAhPSB2LmN1c3RvbWVySWQpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLm9ubHlDdXN0b21lcnNMaXN0ID0gZmlsdGVyZWRMaXN0OwogICAgICBpZiAodGhpcy5vbmx5Q3VzdG9tZXJzTGlzdC5sZW5ndGggPT0gMCkgdGhpcy5oaWRlT25seUN1c3RvbWVycyA9IHRydWU7CiAgICB9LAoKICAgIHNldE9ubHlDdXN0b21lcnNJbkxpc3QoaXRlbSkgewogICAgICB2YXIgYWxyZWFkeUluTGlzdCA9IHRoaXMudmFsaWRhdGVPbmx5Q3VzdG9tZXJzQ2xhc3MuZmlsdGVyKAogICAgICAgICh4KSA9PiB4ID09IGl0ZW0uaWQKICAgICAgKVswXTsKICAgICAgaWYgKGFscmVhZHlJbkxpc3QpIHsKICAgICAgICB0aGlzLm9ubHlDdXN0b21lcnNTZWxlY3RlZCA9IHRoaXMub25seUN1c3RvbWVyc1NlbGVjdGVkLmZpbHRlcigKICAgICAgICAgICh4KSA9PiB4LmlkICE9IGl0ZW0uaWQKICAgICAgICApOwogICAgICAgIHRoaXMudmFsaWRhdGVPbmx5Q3VzdG9tZXJzQ2xhc3MgPQogICAgICAgICAgdGhpcy52YWxpZGF0ZU9ubHlDdXN0b21lcnNDbGFzcy5maWx0ZXIoKHgpID0+IHggIT0gaXRlbS5pZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vbmx5Q3VzdG9tZXJzU2VsZWN0ZWQucHVzaChpdGVtKTsKICAgICAgICB0aGlzLnZhbGlkYXRlT25seUN1c3RvbWVyc0NsYXNzLnB1c2goaXRlbS5pZCk7CiAgICAgIH0KICAgIH0sCgogICAgc2F2ZU9ubHlDdXN0b21lcnMoKSB7CiAgICAgIHZhciBjdXN0b21lcnMgPSBbXTsKCiAgICAgIGlmICh0aGlzLmN1c3RvbWVyc0RhdGEpCiAgICAgICAgdGhpcy5jdXN0b21lcnNEYXRhLmZvckVhY2goKHgpID0+IFtjdXN0b21lcnMucHVzaCh4KV0pOwoKICAgICAgaWYgKHRoaXMub25seUN1c3RvbWVyc1NlbGVjdGVkKSB7CiAgICAgICAgdGhpcy5vbmx5Q3VzdG9tZXJzU2VsZWN0ZWQuZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgICAgdmFyIG9iamVjdEN1c3RvbWVyID0geyB1c2VySWQ6IDAsIGN1c3RvbWVySWQ6IGVsZW1lbnQuaWQgfTsKICAgICAgICAgIGN1c3RvbWVycy5wdXNoKG9iamVjdEN1c3RvbWVyKTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5jdXN0b21lcnNEYXRhID0gW107CiAgICAgICAgdGhpcy5jdXN0b21lcnNEYXRhID0gY3VzdG9tZXJzOwogICAgICAgIHRoaXMuY3VzdG9tZXJzID0gY3VzdG9tZXJzOwogICAgICAgIHRoaXMub25seUN1c3RvbWVyc1NlbGVjdGVkID0gW107CiAgICAgIH0KICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICBzZWxlY3RBbGxDdXN0b21lcnNPbmx5KCkgewogICAgICBpZiAodGhpcy52YWxpZGF0ZU9ubHlDdXN0b21lcnNDbGFzcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy52YWxpZGF0ZU9ubHlDdXN0b21lcnNDbGFzcyA9IFtdOwogICAgICAgIHRoaXMub25seUN1c3RvbWVyc1NlbGVjdGVkID0gW107CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLm9ubHlDdXN0b21lcnNMaXN0LmZvckVhY2goKHgpID0+IHsKICAgICAgICB0aGlzLm9ubHlDdXN0b21lcnNTZWxlY3RlZC5wdXNoKHgpOwogICAgICAgIHRoaXMudmFsaWRhdGVPbmx5Q3VzdG9tZXJzQ2xhc3MucHVzaCh4LmlkKTsKICAgICAgfSk7CiAgICB9LAogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBpZiAoIXRoaXMub25seUN1c3RvbWVyc0xpc3QpIHRoaXMub25seUN1c3RvbWVyc0xpc3QgPSBbXTsKICAgIHRoaXMuc2VhcmNoT25seUN1c3RvbWVycygpOwogIH0sCn07Cg=="},{"version":3,"sources":["customersDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"customersDialog.vue","sourceRoot":"src/views/usuarios","sourcesContent":["<template>\n  <div>\n    <!-- DIALOG VINCULAR CLIENTE-->\n    <v-dialog v-model=\"dialog\" max-width=\"900px\" max-heigth=\"500px\">\n      <div class=\"white pa-4 d-flex flex-column\">\n        <div class=\"d-flex align-center justify-space-between\">\n          <h4 class=\"myApi-neutral--text text--var-1 pb-4 pt-5\">\n            Vincular Cliente ao Usuário\n          </h4>\n\n          <v-btn text rounded @click=\"dialog = false\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </div>\n\n        <v-divider></v-divider>\n\n        <div class=\"d-flex my-3\" style=\"width: 100%\">\n          <div\n            class=\"d-flex mr-3 my-3\"\n            style=\"background: #fae7e7; width: 25%; height: 50px\"\n          >\n            <div style=\"background: #a10a0c; width: 2px; height: 50px\"></div>\n            <div\n              class=\"d-flex align-center justify-space-between pa-3\"\n              style=\"width: 50px\"\n            >\n              <h3 style=\"margin-right: 100px\">Cliente</h3>\n              <v-icon color=\"#A10A0C\">mdi-menu-right</v-icon>\n            </div>\n          </div>\n\n          <div style=\"background: #a10a0c; width: 2px; height: 400px\"></div>\n\n          <div class=\"d-flex flex-column\" style=\"max-width: 35%\">\n            <div style=\"width: 100%\">\n              <v-text-field\n                clearable\n                solo\n                @click:clear=\"searchOnlyCustomersOnClean\"\n                label=\"Pesquisar por Cliente...\"\n                persistent-hint\n                class=\"mx-3 my-3\"\n                v-model=\"search\"\n                prepend-inner-icon=\"mdi-magnify\"\n              ></v-text-field>\n            </div>\n\n            <div style=\"height: 300px; overflow: scroll\">\n              <div\n                class=\"d-flex flex-column align-start mx-3\"\n                style=\"background: #fae7e7\"\n              ></div>\n              <h3\n                :class=\"normalClass\"\n                style=\"cursor: pointer\"\n                v-if=\"onlyCustomersList.length > 0\"\n                @click=\"selectAllCustomersOnly\"\n              >\n                {{\n                  onlyCustomersSelected.length > 0\n                    ? \"Limpar seleção\"\n                    : \"Selecionar Todos\"\n                }}\n              </h3>\n              <h3\n                @click=\"setOnlyCustomersInList(item)\"\n                v-for=\"(item, i) in onlyCustomersList\"\n                :key=\"i\"\n                style=\"cursor: pointer\"\n                :class=\"[\n                  validateOnlyCustomersClass.filter((x) => x == item.id)[0] ==\n                  item.id\n                    ? clickedClass\n                    : normalClass,\n                ]\"\n              >\n                {{ item.corporateName }}\n              </h3>\n              <span v-if=\"hideOnlyCustomers\" class=\"normalClass ml-4\"\n                >Nenhum cliente encontrado</span\n              >\n            </div>\n          </div>\n\n          <div style=\"background: #a10a0c; width: 2px; height: 400px\"></div>\n        </div>\n        <div style=\"width: 35%\"></div>\n\n        <v-divider></v-divider>\n\n        <div class=\"d-flex flex-row justify-end pt-5\">\n          <v-btn rounded large class=\"mr-3\" text @click=\"dialog = false\">\n            CANCELAR\n          </v-btn>\n\n          <v-btn\n            rounded\n            large\n            class=\"myApi-red white--text\"\n            :disabled=\"onlyCustomersSelected.length == 0\"\n            @click=\"saveOnlyCustomers\"\n            >SALVAR</v-btn\n          >\n        </div>\n      </div>\n    </v-dialog>\n    <!--FIM-->\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nexport default {\n  props: { dialogVincularCliente: null, value: null },\n  data: () => ({\n    search: \"\",\n    normalClass: \"d-flex align-center pa-4 mx-3 my-3\",\n    clickedClass: \"d-flex align-center pa-4 mx-3 my-3 grupos\",\n    onlyCustomersList: [],\n    hideOnlyCustomers: null,\n    onlyCustomersSelected: [],\n    validateOnlyCustomersClass: [],\n  }),\n  computed: {\n    customersData: {\n      get() {\n        return this.value;\n      },\n      set(v) {\n        this.$emit(\"input\", v);\n      },\n    },\n    dialog: {\n      get() {\n        return this.dialogVincularCliente;\n      },\n      set() {\n        this.onlyCustomersList = [];\n        this.searchOnlyCustomer = \"\";\n        this.$emit(\"dialogVincularCliente\", false);\n      },\n    },\n  },\n\n  watch: {\n    search() {\n      this.searchOnlyCustomers();\n    },\n\n    customersData() {\n      if (this.customersData) {\n        if (this.$route.params.id) {\n          this.validateOnlyCustomersClass = [];\n          this.customersData.forEach((x) => {\n            this.validateOnlyCustomersClass.push(x.id);\n          });\n        }\n      }\n    },\n    dialog() {\n      if (this.dialog) this.searchOnlyCustomers();\n    },\n  },\n\n  methods: {\n    ...mapActions(\"ModuleClientes\", {\n      getAllSelectCustomers: \"getAll\",\n      searchAndGetCustomersWithoutId: \"searchAndGetCustomersWithoutId\",\n      getCustomersByGroup: \"getCustomersByGroup\",\n      getCustomerById: \"getById\",\n    }),\n\n    async searchOnlyCustomersOnClean() {\n      this.search = \"\";\n      this.searchOnlyCustomers();\n    },\n\n    async searchOnlyCustomers() {\n      this.hideOnlyCustomers = false;\n      var page = [\n        {\n          search: this.search,\n        },\n      ];\n      var result = await this.searchAndGetCustomersWithoutId(page[0]);\n      var filteredList = result.data.result;\n\n      if (this.customersData && this.customersData.length > 0) {\n        this.customersData.forEach((v) => {\n          filteredList = filteredList.filter((x) => x.id != v.customerId);\n        });\n      }\n\n      this.onlyCustomersList = filteredList;\n      if (this.onlyCustomersList.length == 0) this.hideOnlyCustomers = true;\n    },\n\n    setOnlyCustomersInList(item) {\n      var alreadyInList = this.validateOnlyCustomersClass.filter(\n        (x) => x == item.id\n      )[0];\n      if (alreadyInList) {\n        this.onlyCustomersSelected = this.onlyCustomersSelected.filter(\n          (x) => x.id != item.id\n        );\n        this.validateOnlyCustomersClass =\n          this.validateOnlyCustomersClass.filter((x) => x != item.id);\n      } else {\n        this.onlyCustomersSelected.push(item);\n        this.validateOnlyCustomersClass.push(item.id);\n      }\n    },\n\n    saveOnlyCustomers() {\n      var customers = [];\n\n      if (this.customersData)\n        this.customersData.forEach((x) => [customers.push(x)]);\n\n      if (this.onlyCustomersSelected) {\n        this.onlyCustomersSelected.forEach((element) => {\n          var objectCustomer = { userId: 0, customerId: element.id };\n          customers.push(objectCustomer);\n        });\n\n        this.customersData = [];\n        this.customersData = customers;\n        this.customers = customers;\n        this.onlyCustomersSelected = [];\n      }\n      this.dialog = false;\n    },\n    selectAllCustomersOnly() {\n      if (this.validateOnlyCustomersClass.length > 0) {\n        this.validateOnlyCustomersClass = [];\n        this.onlyCustomersSelected = [];\n        return;\n      }\n\n      this.onlyCustomersList.forEach((x) => {\n        this.onlyCustomersSelected.push(x);\n        this.validateOnlyCustomersClass.push(x.id);\n      });\n    },\n  },\n\n  mounted() {\n    if (!this.onlyCustomersList) this.onlyCustomersList = [];\n    this.searchOnlyCustomers();\n  },\n};\n</script>\n<style scoped>\n.grupos {\n  background-color: #fae7e7;\n  border-left: 2px solid #a10a0c;\n  background-image: mdi-menu-right;\n}\n</style>\n"]}]}