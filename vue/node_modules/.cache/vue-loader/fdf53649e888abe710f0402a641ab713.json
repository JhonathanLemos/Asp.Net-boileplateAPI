{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\ordemCompra\\entregas\\primeiraEntrega\\PrimeiraEntregaInformacoesGerais.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\ordemCompra\\entregas\\primeiraEntrega\\PrimeiraEntregaInformacoesGerais.vue","mtime":1680609356658},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRGF0ZVBpY2tlciBmcm9tICJAL2NvbXBvbmVudHMvRGF0ZVBpY2tlciI7DQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHRpcG9zQ2F0ZWdvcmlhcyBmcm9tICJAL2xpYi9lbnVtVGlwb3NDYXRlZ29yaWFzLmpzIjsNCmNvbnN0IG1vZHVsZUNhdGVnb3JpYVNpdHVhY2FvID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoDQogICJNb2R1bGVDYXRlZ29yaWFTaXR1YWNhbyINCik7DQpjb25zdCBtb2R1bGVPcmRlbURlQ29tcHJhID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoIk1vZHVsZU9yZGVtRGVDb21wcmEiKTsNCnZhbGlkYXRpb25SdWxlczsNCmltcG9ydCB7IHRvQmFzZTY0IH0gZnJvbSAiQC9saWIvaGVscGVycy9iYXNlNjQiOw0KaW1wb3J0IHZhbGlkYXRpb25SdWxlcyBmcm9tICIuLi8uLi8uLi8uLi9taXhpbnMvdmFsaWRhdGlvblJ1bGVzIjsNCmltcG9ydCBNaXNzaW5nUGVybWlzc2lvbk1vZGFsIGZyb20gIkAvY29tcG9uZW50cy9NaXNzaW5nUGVybWlzc2lvbk1vZGFsLnZ1ZSI7DQoNCmNvbnN0IG1vZHVsZVB1cmNoYXNlRGVsaXZlcnkgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiTW9kdWxlRGVsaXZlcnkiKTsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBtaXhpbnM6IFt2YWxpZGF0aW9uUnVsZXNdLA0KICBwcm9wczogWyJ2YWx1ZSIsICJsaXN0TWF0ZXJpYWxzIiwgImluZGV4RGVsaXZlcnkiLCAiZmllbGRSZWZyZXNoIl0sDQogIGRhdGE6ICgpID0+ICh7DQogICAgZGF0YUVudHJlZ2E6ICIiLA0KICAgIGluZm9HZXJhaXNMaXN0OiB7DQogICAgICBwdXJjaGFzZU9yZGVyRGlzdHJpYnV0aW9uTWF0ZXJpYWw6IFtdLA0KICAgIH0sDQogICAgdGlwb1NpdHVhY2FvT3JkZW1Db21wcmE6IFtdLA0KICAgIGxvYWRpbmdCdG5TYXZlOiBudWxsLA0KICAgIGFsZXJ0RXJyb3I6IG51bGwsDQogICAgYWxlcnRFcnJvclRleHQ6IG51bGwsDQogICAgZmlsZXM6IFtdLA0KICAgIGxvYWRpbmc6IHRydWUsDQogIH0pLA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tb2R1bGVPcmRlbURlQ29tcHJhLm1hcEFjdGlvbnMoew0KICAgICAgc2V0SWZJc1VwZGF0ZWQ6ICJzZXRJZklzVXBkYXRlZCIsDQogICAgfSksDQogICAgLi4ubW9kdWxlQ2F0ZWdvcmlhU2l0dWFjYW8ubWFwQWN0aW9ucyh7IGdldEJ5VHlwZTogImdldEJ5VHlwZSIgfSksDQogICAgLi4ubW9kdWxlUHVyY2hhc2VEZWxpdmVyeS5tYXBBY3Rpb25zKHsNCiAgICAgIHVwZGF0ZTogInVwZGF0ZSIsDQogICAgICBjcmVhdGU6ICJjcmVhdGUiLA0KICAgIH0pLA0KICAgIGFzeW5jIHNldENhdGVnb3JpZXMoKSB7DQogICAgICB2YXIgaXRlbXMgPSBhd2FpdCB0aGlzLmdldEJ5VHlwZSgNCiAgICAgICAgdGlwb3NDYXRlZ29yaWFzLmVudW1UaXBvc0NhdGVnb3JpYXNSZXF1ZXN0LnNpdHVhY2FvRW50cmVnYQ0KICAgICAgKTsNCiAgICAgIGl0ZW1zLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgdGhpcy50aXBvU2l0dWFjYW9PcmRlbUNvbXByYS5wdXNoKHsNCiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5pZCwNCiAgICAgICAgICB0ZXh0OiBlbGVtZW50LmRlc2NyaXB0aW9uLA0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBhc3luYyBzYXZlSW5mb3MoKSB7DQogICAgICBpZiAoIXRoaXMuaGFzUGVybWlzc2lvbih0aGlzLiRQZXJtaXNzaW9uTmFtZXMucGVybWlzc2lvbkNhdGVnb3J5U2l0dWF0aW9uU2VlKSAmJg0KICAgICAgICAhdGhpcy5pbmZvR2VyYWlzTGlzdC5kZWxpdmVyeVN0YXR1c0lkKSB7DQogICAgICAgIHRoaXMuJHJlZnMubWlzc2luZ1Blcm1pc3Npb25Nb2RhbC5vcGVuKCk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGVsc2UgaWYgKCF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgcmV0dXJuOw0KICAgICAgdmFyIGl0ZW1zID0gew0KICAgICAgICBpZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLA0KICAgICAgICBpc1VwZGF0ZWQ6IHRydWUsDQogICAgICB9Ow0KICAgICAgYXdhaXQgdGhpcy5zZXRJZklzVXBkYXRlZChpdGVtcyk7DQogICAgICB0aGlzLmxvYWRpbmdCdG5TYXZlID0gdHJ1ZTsNCiAgICAgIHRoaXMuaW5mb0dlcmFpc0xpc3QucHVyY2hhc2VPcmRlckRpc3RyaWJ1dGlvbk1hdGVyaWFsID0NCiAgICAgICAgdGhpcy5saXN0TWF0ZXJpYWxzOw0KICAgICAgdmFyIGZpbGVzID0gW107DQogICAgICBpZiAodGhpcy5pbmZvR2VyYWlzTGlzdC5maWxlcykgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5mb0dlcmFpc0xpc3QuZmlsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5pbmZvR2VyYWlzTGlzdC5maWxlc1tpXTsNCiAgICAgICAgICB2YXIgdG9CYXNlID0gYXdhaXQgdG9CYXNlNjQoZWxlbWVudCwgZmFsc2UpOw0KICAgICAgICAgIGZpbGVzLnB1c2goeyBGaWxlOiB0b0Jhc2UsIEZpbGVOYW1lOiBlbGVtZW50Lm5hbWUgfSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuaW5mb0dlcmFpc0xpc3QuZmlsZXMgPSBmaWxlczsNCg0KICAgICAgdmFyIHJlc3BvbnNlID0gbnVsbDsNCiAgICAgIGlmICghdGhpcy5pbmZvR2VyYWlzTGlzdC5pZCkgew0KICAgICAgICBpZiAodGhpcy5oYXNQZXJtaXNzaW9uKHRoaXMuJFBlcm1pc3Npb25OYW1lcy5wZXJtaXNzaW9uQ2F0ZWdvcnlTaXR1YXRpb25TZWUpKQ0KICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jcmVhdGUodGhpcy5pbmZvR2VyYWlzTGlzdCk7DQogICAgICAgIGVsc2UgDQogICAgICAgICAgdGhpcy4kcmVmcy5taXNzaW5nUGVybWlzc2lvbk1vZGFsLm9wZW4oKTsNCiAgICAgIH0NCiAgICAgIGVsc2UgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnVwZGF0ZSh0aGlzLmluZm9HZXJhaXNMaXN0KTsNCg0KICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nQnRuU2F2ZSA9IGZhbHNlOw0KDQogICAgICAgIHRoaXMuJGVtaXQoInN1Y2Nlc3MiLCAiRW50cmVnYSBzYWx2YSBjb20gc3VjZXNzbyEiKTsNCiAgICAgIH0NCiAgICAgIHRoaXMubG9hZGluZ0J0blNhdmUgPSBmYWxzZTsNCiAgICB9LA0KDQogICAgYnVpbGRGaWxlcygpIHsNCiAgICAgIHZhciB0ZXN0ZSA9IFtdOw0KICAgICAgaWYgKCF0aGlzLmluZm9HZXJhaXNMaXN0LmZpbGVzKSByZXR1cm47DQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5mb0dlcmFpc0xpc3QuZmlsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgaWYgKHRoaXMuaW5mb0dlcmFpc0xpc3QuZmlsZXNbaV0gaW5zdGFuY2VvZiBGaWxlKSByZXR1cm47DQogICAgICAgIHRlc3RlLnB1c2goDQogICAgICAgICAgbmV3IEZpbGUoDQogICAgICAgICAgICBbdGhpcy5pbmZvR2VyYWlzTGlzdC5maWxlc1tpXS5maWxlXSwNCiAgICAgICAgICAgIHRoaXMuaW5mb0dlcmFpc0xpc3QuZmlsZXNbaV0uZmlsZU5hbWUNCiAgICAgICAgICAgICAgPyB0aGlzLmluZm9HZXJhaXNMaXN0LmZpbGVzW2ldLmZpbGVOYW1lDQogICAgICAgICAgICAgIDogdGhpcy5pbmZvR2VyYWlzTGlzdC5maWxlc1tpXS5uYW1lLA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICB0eXBlOiAiYmFzZTY0IiwNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApDQogICAgICAgICk7DQogICAgICB9DQogICAgICB0aGlzLmZpbGVzID0gdGVzdGU7DQogICAgICB0aGlzLmluZm9HZXJhaXNMaXN0LmZpbGVzID0gdGVzdGU7DQogICAgfSwNCg0KICAgIHZhbGlkYXRlTGVuZ3RoKGZpbGVzKSB7DQogICAgICBpZiAoIWZpbGVzKSByZXR1cm47DQogICAgICB2YXIgbGVuZ3RoID0gbnVsbDsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgY29uc3QgZWxlbWVudCA9IGZpbGVzW2ldOw0KICAgICAgICBsZW5ndGggPSBsZW5ndGggKyBlbGVtZW50LnNpemU7DQogICAgICB9DQoNCiAgICAgIGlmIChsZW5ndGggPiAyNTAwMDAwMCkgew0KICAgICAgICB0aGlzLmluZm9HZXJhaXNMaXN0LmZpbGVzID0gW107DQogICAgICAgIHRoaXMuJGVtaXQoInNldEluZGV4IiwgdGhpcy5pbmRleERlbGl2ZXJ5LCB0aGlzLmluZm9HZXJhaXNMaXN0KTsNCiAgICAgICAgdGhpcy5hbGVydEVycm9yID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5hbGVydEVycm9yVGV4dCA9ICJPIHRhbWFuaG8gZG9zIGFycXVpdm9zIGRldmUgc2VyIGluZmVyaW9yIMOgIDI1TUIiOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmFsZXJ0RXJyb3IgPSBmYWxzZTsNCiAgICAgICAgfSwgNTAwMCk7DQogICAgICB9DQogICAgfSwNCg0KICAgIGRvd25sb2FkRmlsZXMoKSB7DQogICAgICBpZiAodGhpcy5pdGVtc1RvRG93bmxvYWQpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLml0ZW1zVG9Eb3dubG9hZC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLml0ZW1zVG9Eb3dubG9hZFtpXTsNCiAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsNCiAgICAgICAgICBhLmhyZWYgPSAiZGF0YTppbWFnZS9qcGc7YmFzZTY0LCIgKyBlbGVtZW50LmZpbGU7DQogICAgICAgICAgYS5kb3dubG9hZCA9IGVsZW1lbnQuZmlsZU5hbWU7DQogICAgICAgICAgYS5jbGljaygpOw0KICAgICAgICAgIGEucmVtb3ZlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgdmFsdWUobmV3VmFsdWUpIHsNCiAgICAgIHRoaXMuaW5mb0dlcmFpc0xpc3QgPSBuZXdWYWx1ZTsNCiAgICAgIHRoaXMuaXRlbXNUb0Rvd25sb2FkID0gdGhpcy5pbmZvR2VyYWlzTGlzdC5maWxlczsNCiAgICAgIHRoaXMuYnVpbGRGaWxlcygpOw0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgfSwNCg0KICAgIGluZm9HZXJhaXNMaXN0OiB7DQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB0aGlzLmluZm9HZXJhaXNMaXN0KTsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICB9LA0KICAgIH0sDQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBlZGl0UGVybWlzc2lvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLmhhc1Blcm1pc3Npb24oDQogICAgICAgIHRoaXMuJFBlcm1pc3Npb25OYW1lcy5wZXJtaXNzaW9uUHVyY2hhc2VPcmRlckVkaXQNCiAgICAgICk7DQogICAgfSwNCiAgfSwNCg0KICBtb3VudGVkKCkgew0KICAgIGlmICh0aGlzLmhhc1Blcm1pc3Npb24odGhpcy4kUGVybWlzc2lvbk5hbWVzLnBlcm1pc3Npb25DYXRlZ29yeVNpdHVhdGlvblNlZSkpDQogICAgICB0aGlzLnNldENhdGVnb3JpZXMoKTsNCiAgfSwNCg0KICBjb21wb25lbnRzOiB7DQogICAgRGF0ZVBpY2tlciwNCiAgICBNaXNzaW5nUGVybWlzc2lvbk1vZGFsLA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["PrimeiraEntregaInformacoesGerais.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PrimeiraEntregaInformacoesGerais.vue","sourceRoot":"src/views/ordemCompra/entregas/primeiraEntrega","sourcesContent":["<template>\r\n  <div class=\"white\" style=\"width: 98%\">\r\n    <MissingPermissionModal \r\n      ref=\"missingPermissionModal\"\r\n    />\r\n    <v-alert\r\n      type=\"error\"\r\n      transition=\"slide-y-transition\"\r\n      dismissible\r\n      v-show=\"alertError\"\r\n      dense\r\n      class=\"mt-2\"\r\n      width=\"100%\"\r\n      >{{ alertErrorText }}</v-alert\r\n    >\r\n    <!-- INFORMAÇÕES GERAIS -->\r\n    <v-form ref=\"form\" :key=\"fieldRefresh\">\r\n      <div class=\"d-flex\">\r\n        <v-select\r\n          v-if=\"hasPermission($PermissionNames.permissionCategorySituationSee)\"\r\n          :disabled=\"!editPermission\"\r\n          clearable\r\n          style=\"width: 33%\"\r\n          class=\"mr-4\"\r\n          label=\"Situação da Entrega\"\r\n          :loading=\"loading\"\r\n          :items=\"tipoSituacaoOrdemCompra\"\r\n          v-model=\"infoGeraisList.deliveryStatusId\"\r\n          :rules=\"[rules.required]\"\r\n          validate-on-blur\r\n        ></v-select>\r\n        <v-text-field\r\n          v-else\r\n          disabled\r\n          style=\"width: 33%\"\r\n          class=\"mr-4\"\r\n          label=\"Situação da Entrega\"\r\n          :loading=\"loading\"\r\n          v-model=\"infoGeraisList.deliveryStatusDescription\"\r\n          :rules=\"[rules.required]\"\r\n          validate-on-blur\r\n        >\r\n        </v-text-field>\r\n\r\n        <DatePicker\r\n          label=\"Data Entrega\"\r\n          style=\"width: 33%\"\r\n          class=\"mr-4\"\r\n          v-model=\"infoGeraisList.deliveryDate\"\r\n          :required=\"true\"   \r\n          :disabled=\"!editPermission\"\r\n        ></DatePicker>\r\n\r\n        <v-text-field\r\n          clearable\r\n          style=\"width: 33%\"\r\n          label=\"Transportadora (opcional)\"\r\n          v-model=\"infoGeraisList.shippingCompany\"\r\n          :loading=\"loading\"\r\n          :disabled=\"!editPermission\"\r\n        ></v-text-field>\r\n      </div>\r\n\r\n      <div class=\"d-flex\" style=\"width: 100%\">\r\n        <v-text-field\r\n          clearable\r\n          style=\"width: 33%\"\r\n          class=\"mr-4\"\r\n          label=\"Placa Veículo (opcional)\"\r\n          v-model=\"infoGeraisList.vehiclePlate\"\r\n          :loading=\"loading\"\r\n          :disabled=\"!editPermission\"\r\n        ></v-text-field>\r\n\r\n        <v-text-field\r\n          clearable\r\n          style=\"width: 33%\"\r\n          class=\"mr-4\"\r\n          label=\"Nota Fiscal (opcional)\"\r\n          v-model=\"infoGeraisList.receipt\"\r\n          :loading=\"loading\"\r\n          :disabled=\"!editPermission\"\r\n        ></v-text-field>\r\n        <div style=\"width: 33%\"></div>\r\n      </div>\r\n      <v-file-input\r\n        persistent-hint\r\n        hint=\"Formato permitido: PDF. Tamanho máximo: 25 MB\"\r\n        clearable\r\n        style=\"width: 100%\"\r\n        label=\"Nota Fiscal (opcional)\"\r\n        append-icon=\"mdi-download\"\r\n        @click:append=\"downloadFiles\"\r\n        v-model=\"infoGeraisList.files\"\r\n        @change=\"validateLength(infoGeraisList.files)\"\r\n        :loading=\"loading\"\r\n        multiple\r\n        accept=\"application/pdf\"\r\n        :disabled=\"!editPermission\"\r\n      >\r\n        <template v-slot:selection=\"{ index, text }\">\r\n          <v-chip\r\n            v-if=\"index < 1 && infoGeraisList.files.length == 1\"\r\n            color=\"red accent-4\"\r\n            dark\r\n            label\r\n            small\r\n          >\r\n            {{ text }}\r\n          </v-chip>\r\n\r\n          <span\r\n            v-else-if=\"index === 1\"\r\n            class=\"text-overline grey--text text--darken-3 mx-2\"\r\n          >\r\n            +{{ infoGeraisList.files.length }} Arquivo(s)\r\n          </span>\r\n        </template>\r\n      </v-file-input>\r\n      <v-textarea\r\n        clearable\r\n        class=\"mt-6\"\r\n        outlined\r\n        label=\"Observações\"\r\n        v-model=\"infoGeraisList.receiptObservation\"\r\n        :disabled=\"!editPermission\"\r\n      ></v-textarea>\r\n\r\n      <div class=\"d-flex flex-row justify-end\" style=\"margin-top: 68px\">\r\n        <v-btn\r\n          v-if=\"editPermission\"\r\n          rounded\r\n          class=\"asia-red white--text mb-4\"\r\n          :loading=\"loadingBtnSave\"\r\n          @click=\"saveInfos\"\r\n          >SALVAR</v-btn\r\n        >\r\n      </div>\r\n    </v-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DatePicker from \"@/components/DatePicker\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport tiposCategorias from \"@/lib/enumTiposCategorias.js\";\r\nconst moduleCategoriaSituacao = createNamespacedHelpers(\r\n  \"ModuleCategoriaSituacao\"\r\n);\r\nconst moduleOrdemDeCompra = createNamespacedHelpers(\"ModuleOrdemDeCompra\");\r\nvalidationRules;\r\nimport { toBase64 } from \"@/lib/helpers/base64\";\r\nimport validationRules from \"../../../../mixins/validationRules\";\r\nimport MissingPermissionModal from \"@/components/MissingPermissionModal.vue\";\r\n\r\nconst modulePurchaseDelivery = createNamespacedHelpers(\"ModuleDelivery\");\r\n\r\nexport default {\r\n  mixins: [validationRules],\r\n  props: [\"value\", \"listMaterials\", \"indexDelivery\", \"fieldRefresh\"],\r\n  data: () => ({\r\n    dataEntrega: \"\",\r\n    infoGeraisList: {\r\n      purchaseOrderDistributionMaterial: [],\r\n    },\r\n    tipoSituacaoOrdemCompra: [],\r\n    loadingBtnSave: null,\r\n    alertError: null,\r\n    alertErrorText: null,\r\n    files: [],\r\n    loading: true,\r\n  }),\r\n\r\n  methods: {\r\n    ...moduleOrdemDeCompra.mapActions({\r\n      setIfIsUpdated: \"setIfIsUpdated\",\r\n    }),\r\n    ...moduleCategoriaSituacao.mapActions({ getByType: \"getByType\" }),\r\n    ...modulePurchaseDelivery.mapActions({\r\n      update: \"update\",\r\n      create: \"create\",\r\n    }),\r\n    async setCategories() {\r\n      var items = await this.getByType(\r\n        tiposCategorias.enumTiposCategoriasRequest.situacaoEntrega\r\n      );\r\n      items.forEach((element) => {\r\n        this.tipoSituacaoOrdemCompra.push({\r\n          value: element.id,\r\n          text: element.description,\r\n        });\r\n      });\r\n    },\r\n\r\n    async saveInfos() {\r\n      if (!this.hasPermission(this.$PermissionNames.permissionCategorySituationSee) &&\r\n        !this.infoGeraisList.deliveryStatusId) {\r\n        this.$refs.missingPermissionModal.open();\r\n        return;\r\n      }\r\n      else if (!this.$refs.form.validate()) return;\r\n      var items = {\r\n        id: this.$route.params.id,\r\n        isUpdated: true,\r\n      };\r\n      await this.setIfIsUpdated(items);\r\n      this.loadingBtnSave = true;\r\n      this.infoGeraisList.purchaseOrderDistributionMaterial =\r\n        this.listMaterials;\r\n      var files = [];\r\n      if (this.infoGeraisList.files) {\r\n        for (let i = 0; i < this.infoGeraisList.files.length; i++) {\r\n          const element = this.infoGeraisList.files[i];\r\n          var toBase = await toBase64(element, false);\r\n          files.push({ File: toBase, FileName: element.name });\r\n        }\r\n      }\r\n      this.infoGeraisList.files = files;\r\n\r\n      var response = null;\r\n      if (!this.infoGeraisList.id) {\r\n        if (this.hasPermission(this.$PermissionNames.permissionCategorySituationSee))\r\n          response = await this.create(this.infoGeraisList);\r\n        else \r\n          this.$refs.missingPermissionModal.open();\r\n      }\r\n      else response = await this.update(this.infoGeraisList);\r\n\r\n      if (response.status == 200) {\r\n        this.loadingBtnSave = false;\r\n\r\n        this.$emit(\"success\", \"Entrega salva com sucesso!\");\r\n      }\r\n      this.loadingBtnSave = false;\r\n    },\r\n\r\n    buildFiles() {\r\n      var teste = [];\r\n      if (!this.infoGeraisList.files) return;\r\n      for (let i = 0; i < this.infoGeraisList.files.length; i++) {\r\n        if (this.infoGeraisList.files[i] instanceof File) return;\r\n        teste.push(\r\n          new File(\r\n            [this.infoGeraisList.files[i].file],\r\n            this.infoGeraisList.files[i].fileName\r\n              ? this.infoGeraisList.files[i].fileName\r\n              : this.infoGeraisList.files[i].name,\r\n            {\r\n              type: \"base64\",\r\n            }\r\n          )\r\n        );\r\n      }\r\n      this.files = teste;\r\n      this.infoGeraisList.files = teste;\r\n    },\r\n\r\n    validateLength(files) {\r\n      if (!files) return;\r\n      var length = null;\r\n      for (let i = 0; i < files.length; i++) {\r\n        const element = files[i];\r\n        length = length + element.size;\r\n      }\r\n\r\n      if (length > 25000000) {\r\n        this.infoGeraisList.files = [];\r\n        this.$emit(\"setIndex\", this.indexDelivery, this.infoGeraisList);\r\n        this.alertError = true;\r\n        this.alertErrorText = \"O tamanho dos arquivos deve ser inferior à 25MB\";\r\n        setTimeout(() => {\r\n          this.alertError = false;\r\n        }, 5000);\r\n      }\r\n    },\r\n\r\n    downloadFiles() {\r\n      if (this.itemsToDownload) {\r\n        for (let i = 0; i < this.itemsToDownload.length; i++) {\r\n          const element = this.itemsToDownload[i];\r\n          var a = document.createElement(\"a\");\r\n          a.href = \"data:image/jpg;base64,\" + element.file;\r\n          a.download = element.fileName;\r\n          a.click();\r\n          a.remove();\r\n        }\r\n      }\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    value(newValue) {\r\n      this.infoGeraisList = newValue;\r\n      this.itemsToDownload = this.infoGeraisList.files;\r\n      this.buildFiles();\r\n      this.loading = false;\r\n    },\r\n\r\n    infoGeraisList: {\r\n      deep: true,\r\n      handler() {\r\n        this.$emit(\"input\", this.infoGeraisList);\r\n        this.loading = false;\r\n      },\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    editPermission() {\r\n      return this.hasPermission(\r\n        this.$PermissionNames.permissionPurchaseOrderEdit\r\n      );\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    if (this.hasPermission(this.$PermissionNames.permissionCategorySituationSee))\r\n      this.setCategories();\r\n  },\r\n\r\n  components: {\r\n    DatePicker,\r\n    MissingPermissionModal,\r\n  },\r\n};\r\n</script>\r\n"]}]}