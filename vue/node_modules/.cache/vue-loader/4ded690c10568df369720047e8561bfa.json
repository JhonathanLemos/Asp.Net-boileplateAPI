{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\clientes\\grupoClientes\\vinculoClientes\\CustomerLinkModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\clientes\\grupoClientes\\vinculoClientes\\CustomerLinkModal.vue","mtime":1680609356640},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IEF1dG9Db21wbGV0ZUZpbHRlckFzeW5jIGZyb20gIkAvY29tcG9uZW50cy9BdXRvQ29tcGxldGVGaWx0ZXJBc3luYy52dWUiOw0KY29uc3QgbW9kdWxlQ2xpZW50ZXMgPSBjcmVhdGVOYW1lc3BhY2VkSGVscGVycygiTW9kdWxlQ2xpZW50ZXMiKTsNCmNvbnN0IG1vZHVsZUNsaWVudEdyb3VwID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoIk1vZHVsZUdydXBvQ2xpZW50ZXMiKTsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQ3VzdG9tZXJMaW5rTW9kYWwiLA0KICBwcm9wczogWyJzaG93TW9kYWwiLCAidmFsdWUiLCAibGlzdCJdLA0KDQogIGRhdGE6ICgpID0+ICh7DQogICAgZGF0YUl0ZW06IHsNCiAgICAgIHVubGluazogZmFsc2UsDQogICAgfSwNCiAgICBjdXN0b21lckRhdGE6IFtdLA0KICAgIGRpc3BsYXlBdXRvQ29tcGxldGU6IG51bGwsDQogICAgbGlua0RpYWxvZzogZmFsc2UsDQogICAgdW5saW5rQWxlcnQ6IGZhbHNlLA0KICAgIGNvbmZpcm1MaW5rOiBmYWxzZSwNCiAgICBsaW5rQWxlcnQ6IGZhbHNlLA0KICB9KSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubW9kdWxlQ2xpZW50ZXMubWFwQWN0aW9ucyh7DQogICAgICBnZXRDdXN0b21lckJ5SWQ6ICJnZXRCeUlkIiwNCiAgICAgIGdldEN1c3RvbWVyQnlWYWx1ZTogImdldEJ5VmFsdWUiLA0KICAgIH0pLA0KICAgIC4uLm1vZHVsZUNsaWVudEdyb3VwLm1hcEFjdGlvbnMoew0KICAgICAgY2hlY2tSZWxhdGlvbjogImNoZWNrUmVsYXRpb24iLA0KICAgIH0pLA0KDQogICAgYXN5bmMgc2hvd0xpbmtEaWFsb2coKSB7DQogICAgICB0aGlzLmxpbmtEaWFsb2cgPSB0cnVlOw0KICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybSkgdGhpcy4kcmVmcy5mb3JtLnJlc2V0KCk7DQogICAgfSwNCg0KICAgIGFzeW5jIGNvbmZpcm1EaWFsb2coKSB7DQogICAgICB0aGlzLmNvbmZpcm1MaW5rID0gdHJ1ZTsNCiAgICB9LA0KDQogICAgYXN5bmMgY2hlY2tDdXN0b21lclJlbGF0aW9uKGl0ZW0pIHsNCiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2hlY2tSZWxhdGlvbihpdGVtLnZhbHVlKTsNCiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnJlc3VsdCkgew0KICAgICAgICB0aGlzLmNvbmZpcm1MaW5rID0gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubGlua0RhdGEoKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgYXN5bmMgY2hlY2tJbk1lbW9yeUN1c3RvbWVyKGl0ZW0pIHsNCiAgICAgIGxldCBzdG9yZSA9IHRoaXMuJHN0b3JlLnN0YXRlLk1vZHVsZUdydXBvQ2xpZW50ZXMubGlua2luZ0xpc3Q7DQogICAgICBpZiAoc3RvcmUubGVuZ3RoICE9IDApIHsNCiAgICAgICAgbGV0IG9iaiA9IHN0b3JlLmZpbmQoKG8pID0+IG8uaWQgPT09IGl0ZW0udmFsdWUpOw0KICAgICAgICBpZiAob2JqICE9IHVuZGVmaW5lZCkgdGhpcy5saW5rQWxlcnQgPSB0cnVlOw0KICAgICAgICBlbHNlIHRoaXMuY2hlY2tDdXN0b21lclJlbGF0aW9uKGl0ZW0pOw0KICAgICAgfSBlbHNlIHRoaXMuY2hlY2tDdXN0b21lclJlbGF0aW9uKGl0ZW0pOw0KICAgIH0sDQoNCiAgICBhc3luYyBsb2FkQ3VzdG9tZXIocmVxdWVzdCkgew0KICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRDdXN0b21lckJ5VmFsdWUocmVxdWVzdCk7DQogICAgICByZXNwb25zZS5kYXRhLnJlc3VsdC5mb3JFYWNoKChlKSA9PiB7DQogICAgICAgIHRoaXMuY3VzdG9tZXJEYXRhLnB1c2goew0KICAgICAgICAgIHRleHQ6DQogICAgICAgICAgICBlLmNvZGUgKw0KICAgICAgICAgICAgIiB8ICIgKw0KICAgICAgICAgICAgZS5jb3Jwb3JhdGVOYW1lICsNCiAgICAgICAgICAgICIgfCAiICsNCiAgICAgICAgICAgIChlLnBsYW50ID09IG51bGwgPyAiLSIgOiBlLnBsYW50KSwNCiAgICAgICAgICB2YWx1ZTogZS5pZCwNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyRGF0YTsNCiAgICB9LA0KDQogICAgYXN5bmMgdW5saW5rRGF0YShpdGVtKSB7DQogICAgICBsZXQgaW5kZXggPSB0aGlzLmN1c3RvbWVyR3JvdXBEYXRhLmN1c3RvbWVycy5pbmRleE9mKGl0ZW0pOw0KICAgICAgdGhpcy4kZW1pdCgib24tc2F2ZSIsIHRoaXMuY3VzdG9tZXJHcm91cERhdGEuY3VzdG9tZXJzLnNwbGljZShpbmRleCwgMSkpOw0KICAgICAgdGhpcy5jbG9zZVVubGlua0FsZXJ0KCk7DQogICAgfSwNCg0KICAgIGFzeW5jIGxpbmtEYXRhKCkgew0KICAgICAgdGhpcy4kZW1pdCgib24tc2F2ZSIsIHRoaXMuZGF0YUl0ZW0pOw0KICAgICAgdGhpcy5jbG9zZUxpbmtNb2RhbCgpOw0KICAgIH0sDQoNCiAgICBhc3luYyBtYXJrTGlua0RhdGEoKSB7DQogICAgICB0aGlzLmRhdGFJdGVtLnVubGluayA9IHRydWU7DQogICAgICB0aGlzLiRlbWl0KCJvbi1zYXZlIiwgdGhpcy5kYXRhSXRlbSk7DQogICAgICB0aGlzLmNsb3NlTGlua01vZGFsKCk7DQogICAgfSwNCg0KICAgIGlzT25MaXN0KGl0ZW0pIHsNCiAgICAgIGxldCBpdGVtcyA9IHRoaXMubGlzdC5maWx0ZXIoKHgpID0+IHguaWQgPT0gaXRlbS52YWx1ZSkNCiAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAwKQ0KICAgICAgICB0aGlzLmxpbmtBbGVydCA9IHRydWUNCiAgICAgIGVsc2UgDQogICAgICAgIHRoaXMuY2hlY2tDdXN0b21lclJlbGF0aW9uKGl0ZW0pDQogICAgfSwNCg0KICAgIGNsb3NlTGlua01vZGFsKCkgew0KICAgICAgdGhpcy5saW5rRGlhbG9nID0gZmFsc2U7DQogICAgfSwNCiAgICBjbG9zZUxpbmtBbGVydCgpIHsNCiAgICAgIHRoaXMubGlua0FsZXJ0ID0gZmFsc2U7DQogICAgfSwNCiAgICBjbG9zZUNvbmZpcm1MaW5rKCkgew0KICAgICAgdGhpcy5jb25maXJtTGluayA9IGZhbHNlOw0KICAgIH0sDQogIH0sDQoNCiAgY29tcG9uZW50czogeyBBdXRvQ29tcGxldGVGaWx0ZXJBc3luYyB9LA0KfTsNCg=="},{"version":3,"sources":["CustomerLinkModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"CustomerLinkModal.vue","sourceRoot":"src/views/clientes/grupoClientes/vinculoClientes","sourcesContent":["<template>\r\n  <div>\r\n    <!-- DIALOG VINCULAR -->\r\n    <v-dialog v-model=\"linkDialog\" max-width=\"650px\">\r\n      <v-form ref=\"form\">\r\n        <div class=\"white pa-4 d-flex flex-column\">\r\n          <div class=\"d-flex align-center justify-space-between\">\r\n            <h4 class=\"asia-neutral--text text--var-1 pb-4 pt-5\">\r\n              Vincular Cliente\r\n            </h4>\r\n\r\n            <v-btn text rounded @click=\"closeLinkModal()\">\r\n              <v-icon>mdi-close</v-icon>\r\n            </v-btn>\r\n          </div>\r\n\r\n          <v-divider></v-divider>\r\n\r\n          <div class=\"mb-3\">\r\n            <AutoCompleteFilterAsync\r\n              :searchStore=\"loadCustomer\"\r\n              displayText=\"corporateName\"\r\n              v-model=\"dataItem\"\r\n              returnObject\r\n              hint=\"Busque pela Razão Social, Código ou Planta.\"\r\n              placeholder=\"Digite 3 caracteres\"\r\n              :displayAutoComplete=\"displayAutoComplete\"\r\n            ></AutoCompleteFilterAsync>\r\n          </div>\r\n\r\n          <v-divider></v-divider>\r\n\r\n          <div class=\"d-flex flex-row justify-end pt-4\">\r\n            <v-btn\r\n              rounded\r\n              text\r\n              class=\"asia-red white--text\"\r\n              @click=\"isOnList(dataItem)\"\r\n            >\r\n              VINCULAR\r\n            </v-btn>\r\n          </div>\r\n        </div>\r\n      </v-form>\r\n    </v-dialog>\r\n\r\n    <!-- DIALOG LINK - EXISTING DATA -->\r\n    <v-dialog v-model=\"linkAlert\" max-width=\"350px\">\r\n      <div class=\"white pa-2 d-flex flex-column\" style=\"overflow: hidden\">\r\n        <div class=\"flex-row d-flex justify-end\">\r\n          <v-btn icon @click=\"closeLinkAlert()\">\r\n            <v-icon>mdi-close</v-icon>\r\n          </v-btn>\r\n        </div>\r\n\r\n        <v-icon class=\"align-center\" style=\"font-size: 60px\" color=\"asia-red\">\r\n          mdi-alert-circle-outline\r\n        </v-icon>\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5 text-center\">\r\n          Este cliente já está vinculado à este grupo de clientes.\r\n        </h4>\r\n      </div>\r\n    </v-dialog>\r\n\r\n    <!-- DIALOG LINK -->\r\n    <v-dialog v-model=\"confirmLink\" max-width=\"350px\">\r\n      <div class=\"white pa-8 d-flex flex-column align-center text-center\">\r\n        <v-icon style=\"font-size: 60px\" color=\"asia-red\">\r\n          mdi-alert-circle-outline\r\n        </v-icon>\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5\">\r\n          Este cliente já está vinculado a outro grupo de clientes. Ao vincular\r\n          o cliente neste novo grupo, o mesmo será removido do grupo atual.\r\n          Deseja vincular?\r\n        </h4>\r\n\r\n        <div class=\"d-flex flex-row justify-end\">\r\n          <v-btn rounded large text class=\"mr-4\" @click=\"closeConfirmLink()\"\r\n            >CANCELAR</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"asia-red white--text\"\r\n            @click=\"\r\n              markLinkData();\r\n              confirmLink = false;\r\n            \"\r\n          >\r\n            VINCULAR</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport AutoCompleteFilterAsync from \"@/components/AutoCompleteFilterAsync.vue\";\r\nconst moduleClientes = createNamespacedHelpers(\"ModuleClientes\");\r\nconst moduleClientGroup = createNamespacedHelpers(\"ModuleGrupoClientes\");\r\n\r\nexport default {\r\n  name: \"CustomerLinkModal\",\r\n  props: [\"showModal\", \"value\", \"list\"],\r\n\r\n  data: () => ({\r\n    dataItem: {\r\n      unlink: false,\r\n    },\r\n    customerData: [],\r\n    displayAutoComplete: null,\r\n    linkDialog: false,\r\n    unlinkAlert: false,\r\n    confirmLink: false,\r\n    linkAlert: false,\r\n  }),\r\n\r\n  methods: {\r\n    ...moduleClientes.mapActions({\r\n      getCustomerById: \"getById\",\r\n      getCustomerByValue: \"getByValue\",\r\n    }),\r\n    ...moduleClientGroup.mapActions({\r\n      checkRelation: \"checkRelation\",\r\n    }),\r\n\r\n    async showLinkDialog() {\r\n      this.linkDialog = true;\r\n      if (this.$refs.form) this.$refs.form.reset();\r\n    },\r\n\r\n    async confirmDialog() {\r\n      this.confirmLink = true;\r\n    },\r\n\r\n    async checkCustomerRelation(item) {\r\n      var response = await this.checkRelation(item.value);\r\n      if (response.data.result) {\r\n        this.confirmLink = true;\r\n      } else {\r\n        this.linkData();\r\n      }\r\n    },\r\n\r\n    async checkInMemoryCustomer(item) {\r\n      let store = this.$store.state.ModuleGrupoClientes.linkingList;\r\n      if (store.length != 0) {\r\n        let obj = store.find((o) => o.id === item.value);\r\n        if (obj != undefined) this.linkAlert = true;\r\n        else this.checkCustomerRelation(item);\r\n      } else this.checkCustomerRelation(item);\r\n    },\r\n\r\n    async loadCustomer(request) {\r\n      var response = await this.getCustomerByValue(request);\r\n      response.data.result.forEach((e) => {\r\n        this.customerData.push({\r\n          text:\r\n            e.code +\r\n            \" | \" +\r\n            e.corporateName +\r\n            \" | \" +\r\n            (e.plant == null ? \"-\" : e.plant),\r\n          value: e.id,\r\n        });\r\n      });\r\n      return this.customerData;\r\n    },\r\n\r\n    async unlinkData(item) {\r\n      let index = this.customerGroupData.customers.indexOf(item);\r\n      this.$emit(\"on-save\", this.customerGroupData.customers.splice(index, 1));\r\n      this.closeUnlinkAlert();\r\n    },\r\n\r\n    async linkData() {\r\n      this.$emit(\"on-save\", this.dataItem);\r\n      this.closeLinkModal();\r\n    },\r\n\r\n    async markLinkData() {\r\n      this.dataItem.unlink = true;\r\n      this.$emit(\"on-save\", this.dataItem);\r\n      this.closeLinkModal();\r\n    },\r\n\r\n    isOnList(item) {\r\n      let items = this.list.filter((x) => x.id == item.value)\r\n      if (items.length > 0)\r\n        this.linkAlert = true\r\n      else \r\n        this.checkCustomerRelation(item)\r\n    },\r\n\r\n    closeLinkModal() {\r\n      this.linkDialog = false;\r\n    },\r\n    closeLinkAlert() {\r\n      this.linkAlert = false;\r\n    },\r\n    closeConfirmLink() {\r\n      this.confirmLink = false;\r\n    },\r\n  },\r\n\r\n  components: { AutoCompleteFilterAsync },\r\n};\r\n</script>"]}]}