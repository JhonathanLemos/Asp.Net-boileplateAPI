{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\authenticate\\ViewAuth.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\authenticate\\ViewAuth.vue","mtime":1683311360348},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IE5vdmFTZW5oYSBmcm9tICIuLi8uLi9jb21wb25lbnRzL05vdmFTZW5oYS52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWaWV3TG9naW4iLAoKICBkYXRhOiAoKSA9PiAoewogICAgc2hvdzogZmFsc2UsCiAgICBydWxlczogewogICAgICByZXF1aXJlZDogKHZhbHVlKSA9PiAhIXZhbHVlIHx8ICJQcmVlbmNoYSBlc3RlIGNhbXBvISIsCiAgICB9LAogICAgdmFsaWQ6IHRydWUsCiAgICBvYmplY3Q6IG51bGwsCiAgICBsb2FkaW5nQnRuOiBmYWxzZSwKICAgIG9wZW5Nb2RhbE5ld1Bhc3NXb3JkOiBudWxsLAogICAgaW5wdXREYXRhOiB7CiAgICAgIHJlbWVtYmVyQ2xpZW50OiB0cnVlLAogICAgfSwKICAgIGxvYWRpbmdCdG5TYXZlOiBmYWxzZSwKICAgIGFsZXJ0RXJyb3I6IGZhbHNlLAogICAgYWxlcnRFcnJvclRleHQ6IG51bGwsCiAgICBhbGVydFN1Y2Nlc3M6IGZhbHNlLAogICAgYWxlcnRTdWNjZXNzVGV4dDogbnVsbCwKICB9KSwKCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucygiTW9kdWxlU2Vzc2lvbiIsIHsKICAgICAgZ2V0Q3VycmVudExvZ2luSW5mb3JtYXRpb25zOiAiZ2V0Q3VycmVudExvZ2luSW5mb3JtYXRpb24iLAogICAgICBsb2dpbjogImxvZ2luIiwKICAgICAgZmlyc3RMb2dpbjogImZpcnN0TG9naW4iLAogICAgfSksCgogICAgYXN5bmMgc3VjY2Vzc0NoYW5nZVBhc3N3b3JkKCkgewogICAgICB0aGlzLmFsZXJ0U3VjY2VzcyA9IHRydWU7CiAgICAgIHRoaXMuYWxlcnRTdWNjZXNzVGV4dCA9ICJTZW5oYSBhbHRlcmFkYSBjb20gc3VjZXNzbyI7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuYWxlcnRTdWNjZXNzID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9LCA1MDAwKTsKICAgICAgYXdhaXQgdGhpcy5zZXRTdG9yYWdlVXNlckluZm8oKTsKICAgIH0sCgogICAgYXN5bmMgZmlyc3RMb2dpbk1ldGhvZCh2KSB7CiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmlyc3RMb2dpbih2KTsKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSA1MDApIHsKICAgICAgICB0aGlzLmxvYWRpbmdCdG4gPSBmYWxzZTsKICAgICAgICB0aGlzLmFsZXJ0RXJyb3IgPSB0cnVlOwogICAgICAgIHRoaXMuYWxlcnRFcnJvclRleHQgPSByZXNwb25zZS5kYXRhLmVycm9yLm1lc3NhZ2U7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmFsZXJ0RXJyb3IgPSBmYWxzZTsKICAgICAgICB9LCA1MDAwKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS5yZXN1bHQpIHsKICAgICAgICB0aGlzLm9wZW5Nb2RhbE5ld1Bhc3NXb3JkID0gdHJ1ZTsKICAgICAgICB0aGlzLm9iamVjdCA9IHsKICAgICAgICAgIHVzZXJOYW1lT3JFbWFpbEFkZHJlc3M6IHRoaXMuaW5wdXREYXRhLnVzZXJOYW1lT3JFbWFpbEFkZHJlc3MsCiAgICAgICAgICBwYXNzd29yZDogdi5wYXNzd29yZCwKICAgICAgICAgIHJlbWVtYmVyQ2xpZW50OiB0cnVlLAogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgdHJ5QXV0aGVudGljYXRlKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICB0aGlzLmFsZXJ0RXJyb3IgPSBmYWxzZTsKICAgICAgICB0aGlzLmxvYWRpbmdCdG4gPSB0cnVlOwoKICAgICAgICB2YXIgcmVzdWx0ID0gYXdhaXQgdGhpcy5maXJzdExvZ2luTWV0aG9kKHRoaXMuaW5wdXREYXRhKTsKICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHJldHVybjsKCiAgICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5sb2dpbih0aGlzLmlucHV0RGF0YSk7CgogICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLnNldFN0b3JhZ2VVc2VySW5mbygpOwogICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBhc3luYyBzZXRTdG9yYWdlVXNlckluZm8oKSB7CiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudExvZ2luSW5mb3JtYXRpb25zKCk7CiAgICAgIGxldCB1c2VySW5mbyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnVzZXI7CiAgICAgIGxldCB1c2VySW5pdGlhbHMgPSAoCiAgICAgICAgdXNlckluZm8ubmFtZS5jaGFyQXQoMCkgKyB1c2VySW5mby5zdXJuYW1lLmNoYXJBdCgwKQogICAgICApLnRvVXBwZXJDYXNlKCk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyRW1haWwiLCB1c2VySW5mby5lbWFpbEFkZHJlc3MpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlck5hbWUiLCB1c2VySW5mby5uYW1lKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJTdXJuYW1lIiwgdXNlckluZm8uc3VybmFtZSk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VySW5pdGlhbHMiLCB1c2VySW5pdGlhbHMpOwogICAgfSwKCiAgICByZXNldFBhcmVudCh2KSB7CiAgICAgIHRoaXMubG9hZGluZ0J0biA9IHY7CiAgICAgIHRoaXMuaW5wdXREYXRhID0gW107CiAgICB9LAogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIE5vdmFTZW5oYSwKICB9LAp9Owo="},{"version":3,"sources":["ViewAuth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ViewAuth.vue","sourceRoot":"src/views/authenticate","sourcesContent":["<template>\n  <v-app>\n    <div class=\"d-flex justify-center mb-6 mt-12\">\n      <NovaSenha @resetParent=\"resetParent\" @closeModal=\"loadingBtnSave = false\" @success=\"successChangePassword\"\n        :object=\"object\" v-model=\"openModalNewPassWord\"></NovaSenha>\n\n\n        <div class=\"containerForm ma-2 pa-2\">\n        <h2 class=\"myApi-neutral--text text--var-1 \">Acesso</h2>\n\n        <v-form class=\"form-login text-center\" ref=\"form\" v-model=\"valid\">\n          <v-alert dismissible type=\"error\" v-show=\"alertError\" transition=\"scroll-y-transition\" class=\"mt-6 mb-8\"\n            style=\"text-align: left\">{{ alertErrorText }}</v-alert>\n\n          <v-alert dismissible type=\"success\" v-show=\"alertSuccess\" transition=\"scroll-y-transition\" class=\"mt-6 mb-8\"\n            style=\"text-align: left\">{{ alertSuccessText }}</v-alert>\n\n          <v-text-field label=\"Login\" v-model=\"inputData.userNameOrEmailAddress\" outlined :rules=\"[rules.required]\"\n            validate-on-blur color=\"myApi-neutral\"></v-text-field>\n\n          <v-text-field label=\"Senha\" v-model=\"inputData.password\" :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\n            :rules=\"[rules.required]\" :type=\"show ? 'text' : 'password'\" v-on:keyup.enter=\"tryAuthenticate()\"\n            @click:append=\"show = !show\" outlined validate-on-blur color=\"myApi-neutral\"></v-text-field>\n\n          <v-btn rounded large class=\"myApi-red white--text\" @click=\"tryAuthenticate()\"\n            :loading=\"loadingBtn\">ACESSAR</v-btn>\n        </v-form>\n      </div>\n\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport NovaSenha from \"../../components/NovaSenha.vue\";\n\nexport default {\n  name: \"ViewLogin\",\n\n  data: () => ({\n    show: false,\n    rules: {\n      required: (value) => !!value || \"Preencha este campo!\",\n    },\n    valid: true,\n    object: null,\n    loadingBtn: false,\n    openModalNewPassWord: null,\n    inputData: {\n      rememberClient: true,\n    },\n    loadingBtnSave: false,\n    alertError: false,\n    alertErrorText: null,\n    alertSuccess: false,\n    alertSuccessText: null,\n  }),\n\n  methods: {\n    ...mapActions(\"ModuleSession\", {\n      getCurrentLoginInformations: \"getCurrentLoginInformation\",\n      login: \"login\",\n      firstLogin: \"firstLogin\",\n    }),\n\n    async successChangePassword() {\n      this.alertSuccess = true;\n      this.alertSuccessText = \"Senha alterada com sucesso\";\n      setTimeout(() => {\n        this.alertSuccess = false;\n        return location.reload();\n      }, 5000);\n      await this.setStorageUserInfo();\n    },\n\n    async firstLoginMethod(v) {\n      var response = await this.firstLogin(v);\n      if (response.status == 500) {\n        this.loadingBtn = false;\n        this.alertError = true;\n        this.alertErrorText = response.data.error.message;\n        setTimeout(() => {\n          this.alertError = false;\n        }, 5000);\n        return false;\n      } else if (response.data.result) {\n        this.openModalNewPassWord = true;\n        this.object = {\n          userNameOrEmailAddress: this.inputData.userNameOrEmailAddress,\n          password: v.password,\n          rememberClient: true,\n        };\n        return true;\n      } else {\n        return null;\n      }\n    },\n\n    async tryAuthenticate() {\n      if (this.$refs.form.validate()) {\n        this.alertError = false;\n        this.loadingBtn = true;\n\n        var result = await this.firstLoginMethod(this.inputData);\n        if (result != null) return;\n\n        var response = await this.login(this.inputData);\n\n        if (response.status == 200) {\n          await this.setStorageUserInfo();\n          return location.reload();\n        }\n      }\n    },\n\n    async setStorageUserInfo() {\n      let response = await this.getCurrentLoginInformations();\n      let userInfo = response.data.result.user;\n      let userInitials = (\n        userInfo.name.charAt(0) + userInfo.surname.charAt(0)\n      ).toUpperCase();\n      localStorage.setItem(\"userEmail\", userInfo.emailAddress);\n      localStorage.setItem(\"userName\", userInfo.name);\n      localStorage.setItem(\"userSurname\", userInfo.surname);\n      localStorage.setItem(\"userInitials\", userInitials);\n    },\n\n    resetParent(v) {\n      this.loadingBtn = v;\n      this.inputData = [];\n    },\n  },\n\n  components: {\n    NovaSenha,\n  },\n};\n</script>\n\n<style>\n.wrap-login {\n  height: 100%;\n}\n\n.bg-login {\n  background-color: rgb(32, 32, 32);\n}\n\n.container-login {\n  width: 40%;\n}\n\n.form-login {\n  width: 100%;\n}\n.containerForm{\n  width: 30%;\n  padding: 20px;\n  margin: 0;\n}\n</style>\n"]}]}