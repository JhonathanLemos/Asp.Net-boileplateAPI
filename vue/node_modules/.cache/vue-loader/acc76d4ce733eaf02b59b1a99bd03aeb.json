{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\viagensNavios\\ViewViagensNavios.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\viagensNavios\\ViewViagensNavios.vue","mtime":1680609356674},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVG9wU2VjdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvVG9wU2VjdGlvbi52dWUiOw0KaW1wb3J0IEFjdGlvbnNUYWJsZSBmcm9tICJAL2NvbXBvbmVudHMvQWN0aW9uc1RhYmxlLnZ1ZSI7DQppbXBvcnQgZ2V0Um91dGVyRGF0YSBmcm9tICJAL21peGlucy9nZXRSb3V0ZXJEYXRhLmpzIjsNCmltcG9ydCBkYXRhVGFibGUgZnJvbSAiQC9taXhpbnMvZGF0YVRhYmxlLmpzIjsNCmltcG9ydCBjcnVkQ29udHJvbGxlciBmcm9tICJAL21peGlucy9jcnVkQ29udHJvbGxlci5qcyI7DQppbXBvcnQgdmFsaWRhdGlvblJ1bGVzIGZyb20gIkAvbWl4aW5zL3ZhbGlkYXRpb25SdWxlcy5qcyI7DQppbXBvcnQgeyBjb252ZXJ0VGltZVN0YW1wIH0gZnJvbSAiQC9saWIvdGltZVN0YW1wLmpzIjsNCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhOiAoKSA9PiAoew0KICAgIC8vIExJU1RBR0VNIERFIFZJQUdFTlMNCiAgICBoZWFkZXJzOiBbDQogICAgICB7IHRleHQ6ICIiLCB2YWx1ZTogImNvbDEiLCB3aWR0aDogIjEwJSIgfSwNCiAgICAgIHsgdGV4dDogIk5hdmlvIiwgdmFsdWU6ICJjb2wyIiB9LA0KICAgICAgeyB0ZXh0OiAiUG9ydG8gZGUgT3JpZ2VtIiwgdmFsdWU6ICJjb2wzIiB9LA0KICAgICAgeyB0ZXh0OiAiRVREIiwgdmFsdWU6ICJjb2w0IiB9LA0KICAgICAgeyB0ZXh0OiAiUG9ydG8gZGUgRGVzdGlubyIsIHZhbHVlOiAiY29sNSIgfSwNCiAgICAgIHsgdGV4dDogIkVUQSIsIHZhbHVlOiAiY29sNiIgfSwNCiAgICAgIHsgdGV4dDogIlNpdHVhw6fDo28iLCB2YWx1ZTogImNvbDciLCBhbGlnbjogImNlbnRlciIgfSwNCiAgICBdLA0KICAgIHJvd3M6IFtdLA0KICAgIGI6IDEsDQogICAgDQogICAgLy8gUEFSQURBUyBJTlRFUk1FRElBUklBUw0KICAgIG1vZGFsSW50ZXJtZWRpYXRlU3RvcHM6IGZhbHNlLA0KICAgIGhlYWRlcnNJbnRlcm1lZGlhdGVTdG9wczogWw0KICAgICAgeyB0ZXh0OiAiIiwgdmFsdWU6ICJjb2wxIiB9LA0KICAgICAgeyB0ZXh0OiAiUG9ydG8gSW50ZXJtZWRpw6FyaW8iLCB2YWx1ZTogImNvbDIiIH0sDQogICAgICB7IHRleHQ6ICJEYXRhIEVzdGltYWRhIENoZWdhZGEiLCB2YWx1ZTogImNvbDMiIH0sDQogICAgICB7IHRleHQ6ICJEYXRhIENoZWdhZGEiLCB2YWx1ZTogImNvbDQiIH0sDQogICAgXSwNCiAgICByb3dzSW50ZXJtZWRpYXRlU3RvcHM6IFtdLA0KICAgIGxvYWRpbmdJbnRlcm1lZGlhdGVTdG9wczogZmFsc2UsDQogICAgY3VycmVudFRyaXA6IHsNCiAgICAgIGlkOiBudWxsLA0KICAgICAgaWRlbnRpZmljYXRpb246IG51bGwsDQogICAgfSwNCiAgICB2YWxpZEZvcm1JbnRlcm1lZGlhdGVTdG9wczogdHJ1ZSwNCiAgICBkYXRhQWRkSW50ZXJtZWRpYXRlU3RvcDoge30sDQogICAgbG9hZGluZ0J0bkludGVybWVkaWF0ZVN0b3BzOiBmYWxzZSwNCiAgICBhbGVydFZhbGlkYXRpb25Qcm9mb3JtYTogbnVsbCwNCiAgfSksDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBlZGl0UGVybWlzc2lvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLmhhc1Blcm1pc3Npb24odGhpcy4kUGVybWlzc2lvbk5hbWVzLnBlcm1pc3Npb25TaGlwVHJpcEVkaXQpDQogICAgfSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucygiTW9kdWxlUGFyYWRhc0ludGVybWVkaWFyaWFzIiwgew0KICAgICAgZ2V0QWxsU3RvcHM6ICJnZXRBbGxTdG9wcyIsDQogICAgICBjcmVhdGVTdG9wOiAiY3JlYXRlIiwNCiAgICAgIGRlbGV0ZVN0b3A6ICJkZWxldGVTdG9wIiwNCiAgICB9KSwNCiAgICAuLi5tYXBBY3Rpb25zKCJNb2R1bGVWaWFnZW5zTmF2aW9zIiwgeyB2ZXJpZnlJZkV4aXN0c1Byb2Zvcm1hc0J5SWQ6ICJ2ZXJpZnlJZkV4aXN0c1Byb2Zvcm1hc0J5SWQiIH0pLA0KICAgIA0KICAgIGFzeW5jIGRlbGV0ZVNoaXBUcmlwKGluZGV4LCBpZCl7DQogICAgICB0aGlzLmRlbGV0ZUl0ZW0oMSwgaWQpOw0KICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgdGhpcy52ZXJpZnlJZkV4aXN0c1Byb2Zvcm1hc0J5SWQoaWQpOw0KICAgICAgaWYgKCFyZXNwb25zZS5kYXRhLnJlc3VsdCkNCiAgICAgIHsNCiAgICAgICAgdGhpcy5hbGVydFZhbGlkYXRpb25Qcm9mb3JtYSA9IHRydWU7DQogICAgICB9DQogICAgICBlbHNlDQogICAgICB0aGlzLmRlbGV0ZUl0ZW0oMik7DQogICAgfSwNCiAgICBhZGRJdGVtKHZhbHVlKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIG5hbWU6ICJWaWV3QWRkVmlhZ2Vuc05hdmlvcyIsDQogICAgICAgIHBhcmFtczogeyBpZDogdmFsdWUuY29sMSB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBidWlsZFJvd3MoZGF0YSkgew0KICAgICAgdGhpcy5yb3dzID0gZGF0YS5tYXAoDQogICAgICAgIChlKSA9PiAoDQogICAgICAgICAgew0KICAgICAgICAgICAgY29sMTogZS5pZCwNCiAgICAgICAgICAgIGNvbDI6IGUuc2hpcCA/IGUuc2hpcC5uYW1lIDogIiIsDQogICAgICAgICAgICBjb2wzOiB0aGlzLmdldFBvcnRvT3JpZ2VtKGUpLA0KICAgICAgICAgICAgY29sNDogew0KICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmdldEVURChlKSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBjb2w1OiBlLmRlc3RpbmF0aW9uUG9ydCA/IGUuZGVzdGluYXRpb25Qb3J0Lm5hbWUgOiAiIiwNCiAgICAgICAgICAgIGNvbDY6IHsNCiAgICAgICAgICAgICAgdGV4dDogZS5ldGEsDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgY29sNzogew0KICAgICAgICAgICAgICB0ZXh0OiBlLnN0YXR1cywNCiAgICAgICAgICAgICAgY29sb3I6IGUuc3RhdHVzID09PSB0cnVlID8gInN1Y2Nlc3MiIDogImdyZXkiLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9DQogICAgICAgICkNCiAgICAgICk7DQogICAgfSwNCg0KICAgIGdldEVURChpdGVtKXsNCiAgICAgIGxldCBvcmlnaW5TdG9wID0gaXRlbS5pbnRlcm1lZGlhdGVTdG9wcy5maWx0ZXIoKHgpID0+IHguaXNPcmlnaW4pDQogICAgICBpZiAob3JpZ2luU3RvcC5sZW5ndGggPiAwKQ0KICAgICAgICByZXR1cm4gb3JpZ2luU3RvcFswXS5lc3RpbWF0ZWREZWxpdmVyeURhdGUNCiAgICAgIGVsc2UNCiAgICAgICAgcmV0dXJuICcnDQogICAgfSwNCg0KICAgIGdldFBvcnRvT3JpZ2VtKGl0ZW0pew0KICAgICAgbGV0IG9yaWdpblBvcnQgPSBpdGVtLmludGVybWVkaWF0ZVN0b3BzLmZpbHRlcigoeCkgPT4geC5pc09yaWdpbikNCiAgICAgIGlmIChvcmlnaW5Qb3J0Lmxlbmd0aCA+IDApDQogICAgICAgIHJldHVybiBvcmlnaW5Qb3J0WzBdLm9yaWdpblBvcnROYW1lDQogICAgICBlbHNlDQogICAgICAgIHJldHVybiAnJw0KICAgIH0sDQoNCiAgICAvLyBQQVJBREFTIElOVEVSTUVESUFSSUFTDQogICAgYXN5bmMgb3BlbkludGVybWVkaWF0ZVN0b3BzTGlzdCh0cmlwSWQsIGlkZW50aWZpY2F0aW9uKSB7DQogICAgICB0aGlzLmN1cnJlbnRUcmlwLmlkID0gdHJpcElkOw0KICAgICAgdGhpcy5jdXJyZW50VHJpcC5pZGVudGlmaWNhdGlvbiA9IGlkZW50aWZpY2F0aW9uOw0KICAgICAgdGhpcy5kYXRhQWRkSW50ZXJtZWRpYXRlU3RvcC5zaGlwVHJpcElkID0gdHJpcElkOw0KICAgICAgdGhpcy5tb2RhbEludGVybWVkaWF0ZVN0b3BzID0gdHJ1ZTsNCiAgICAgIHRoaXMubGlzdEludGVybWVkaWF0ZVN0b3BzKCk7DQogICAgfSwNCg0KICAgIGNsb3NlTW9kYWxTdG9wc0xpc3QoKSB7DQogICAgICB0aGlzLmtleSsrOw0KICAgICAgdGhpcy5tb2RhbEludGVybWVkaWF0ZVN0b3BzID0gZmFsc2U7DQogICAgICB0aGlzLnJvd3NJbnRlcm1lZGlhdGVTdG9wcyA9IFtdOw0KICAgICAgdGhpcy4kcmVmcy5mb3JtSW50ZXJtZWRpYXRlU3RvcHMucmVzZXQoKTsNCiAgICB9LA0KDQogICAgYXN5bmMgbGlzdEludGVybWVkaWF0ZVN0b3BzKCkgew0KICAgICAgdGhpcy5sb2FkaW5nSW50ZXJtZWRpYXRlU3RvcHMgPSB0cnVlOw0KDQogICAgICB0aGlzLmdldEFsbFN0b3BzKHRoaXMuY3VycmVudFRyaXAuaWQpDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMucm93c0ludGVybWVkaWF0ZVN0b3BzID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQuaXRlbXMubWFwKCh4KSA9PiAoew0KICAgICAgICAgICAgY29sMTogeC5pZCwNCiAgICAgICAgICAgIGNvbDI6DQogICAgICAgICAgICAgIHguaW50ZXJtZWRpYXRlUG9ydC5hYmJyZXZpYXRpb24gKyAiIHwgIiArIHguaW50ZXJtZWRpYXRlUG9ydC5uYW1lLA0KICAgICAgICAgICAgY29sMzogY29udmVydFRpbWVTdGFtcCh4LmVzdGltYXRlZEFycml2YWxEYXRlKS5zbGljZSgwLCAtOCksDQogICAgICAgICAgICBjb2w0OiB4LmFycml2YWxEYXRlLA0KICAgICAgICAgIH0pKTsNCg0KICAgICAgICAgIHRoaXMubG9hZGluZ0ludGVybWVkaWF0ZVN0b3BzID0gZmFsc2U7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgLy9QTE9UQVIgRVJSTw0KICAgICAgICAgIHRoaXMucm93c0ludGVybWVkaWF0ZVN0b3BzID0gW107DQogICAgICAgICAgdGhpcy5sb2FkaW5nSW50ZXJtZWRpYXRlU3RvcHMgPSBmYWxzZTsNCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIGFzeW5jIGFkZEludGVybWVkaWF0ZVN0b3AoKSB7DQogICAgICBpZiAodGhpcy4kcmVmcy5mb3JtSW50ZXJtZWRpYXRlU3RvcHMudmFsaWRhdGUoKSkgew0KICAgICAgICB0aGlzLmxvYWRpbmdCdG5JbnRlcm1lZGlhdGVTdG9wcyA9IHRydWU7DQoNCiAgICAgICAgdGhpcy5jcmVhdGVTdG9wKHRoaXMuZGF0YUFkZEludGVybWVkaWF0ZVN0b3ApDQogICAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5saXN0SW50ZXJtZWRpYXRlU3RvcHMoKTsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZ0J0bkludGVybWVkaWF0ZVN0b3BzID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1JbnRlcm1lZGlhdGVTdG9wcy5yZXNldCgpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgIC8vIFBMT1RBUiBFUlJPDQogICAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIHJlbW92ZUludGVybWVkaWF0ZVN0b3AoaWRJbnRlcm1lZGlhdGVTdG9wKSB7DQogICAgICB0aGlzLmxvYWRpbmdJbnRlcm1lZGlhdGVTdG9wcyA9IHRydWU7DQoNCiAgICAgIHRoaXMuZGVsZXRlU3RvcChpZEludGVybWVkaWF0ZVN0b3ApDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxpc3RJbnRlcm1lZGlhdGVTdG9wcygpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIC8vIFBMT1RBUiBFUlJPDQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQoNCiAgbWl4aW5zOiBbDQogICAgdmFsaWRhdGlvblJ1bGVzLA0KICAgIGdldFJvdXRlckRhdGEsDQogICAgZGF0YVRhYmxlKHsgc3RvcmU6ICJNb2R1bGVWaWFnZW5zTmF2aW9zIiB9KSwNCiAgICBjcnVkQ29udHJvbGxlcih7IHN0b3JlOiAiTW9kdWxlVmlhZ2Vuc05hdmlvcyIgfSksDQogIF0sDQogIGNvbXBvbmVudHM6IHsgVG9wU2VjdGlvbiwgQWN0aW9uc1RhYmxlIH0sDQp9Ow0K"},{"version":3,"sources":["ViewViagensNavios.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ViewViagensNavios.vue","sourceRoot":"src/views/viagensNavios","sourcesContent":["<template>\r\n  <div\r\n    class=\"d-flex flex-column justify-space-between mx-10\"\r\n    style=\"width: 100%; height: 98vh\"\r\n  >\r\n    <top-section></top-section>\r\n\r\n    <actions-table\r\n      :params=\"getRouterData\"\r\n      labelSearch=\"Pesquisar por Navio, Porto de Origem ou Porto de Destino\"\r\n      :disableButton=\"!editPermission\"\r\n      v-on:clickAdd=\"$router.push(`/home/viagensNaviosCreate`)\"\r\n    ></actions-table>\r\n    <v-alert\r\n      type=\"error\"\r\n      dense\r\n      class=\"ml-auto\"\r\n      style=\"width: 40%;\"\r\n      outlined\r\n      v-show=\"displayModalError\"\r\n      transition=\"fade-transition\"\r\n      >{{ displayModalErrorText }}</v-alert\r\n    >\r\n\r\n    <div\r\n      style=\"overflow-y: auto\"\r\n      class=\"flex-grow-1 rounded-lg pa-4 white elevation-5\"\r\n    >\r\n      <!-- DATA TABLE -->\r\n      <v-data-table\r\n        style=\"font-size: 10px\"\r\n        :key=\"key\"\r\n        disable-sort\r\n        :headers=\"headers\"\r\n        :items=\"rows\"\r\n        :options.sync=\"options\"\r\n        :page=\"page\"\r\n        :server-items-length=\"totalItems\"\r\n        noDataText=\"Nenhum registro encontrado\"\r\n        :loading=\"tableLoading\"\r\n        loading-text=\"Aguarde, carregando viagens...\"\r\n        :footer-props=\"{\r\n          itemsPerPageOptions: [10, 50, 100],\r\n          itemsPerPageText: 'Itens por Página',\r\n        }\"\r\n      >\r\n        <!-- ICONES MANUTENÇÃO -->\r\n        <template v-slot:[`item.col1`]=\"{ item }\">\r\n          <div v-if=\"editPermission\" class=\"mr-1\">\r\n            <v-btn\r\n              icon\r\n              @click=\"\r\n                $router.push({ path: `/home/viagensNaviosUpdate/${item.col1}` })\r\n              \"\r\n            >\r\n              <v-icon> mdi-pencil </v-icon>\r\n            </v-btn>\r\n\r\n            <v-btn icon @click=\"deleteShipTrip(1, item.col1)\">\r\n              <v-icon> mdi-delete </v-icon>\r\n            </v-btn>\r\n          </div>\r\n          <div v-else class=\"mr-1\">\r\n            <v-btn icon @click=\"$router.push({ path: `/home/viagensNaviosUpdate/${item.col1}` })\">\r\n              <v-icon> mdi-eye </v-icon>\r\n            </v-btn>\r\n          </div>\r\n        </template>\r\n\r\n        <!-- STATUS -->\r\n        <template v-slot:[`item.col7`]=\"{ item }\">\r\n          <v-chip :color=\"item.col7.color\" outlined>\r\n            {{ item.col7.text | AbertaFechada }}\r\n          </v-chip>\r\n        </template>\r\n\r\n        <!-- DATA DE EMBARQUE -->\r\n        <template v-slot:[`item.col4`]=\"{ item }\">\r\n          {{ item.col4.text | dateFormat }}\r\n        </template>\r\n\r\n        <!-- DATA DE CHEGADA -->\r\n        <template v-slot:[`item.col6`]=\"{ item }\">\r\n          {{ item.col6.text | dateFormat }}\r\n        </template>\r\n      </v-data-table>\r\n    </div>\r\n\r\n    <!-- DIALOG CONFIRM DELETE -->\r\n    <v-dialog v-model=\"alertValidationProforma\" max-width=\"450px\">\r\n      <div class=\"white pa-8 d-flex flex-column align-center text-center\">\r\n        <v-icon style=\"font-size: 60px\" color=\"asia-red\"\r\n          >mdi-alert-circle-outline</v-icon\r\n        >\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5\">\r\n          Esta viagem possui proforma(s) vinculada(s). Deseja excluir a viagem?\r\n        </h4>\r\n\r\n        <div class=\"d-flex flex-row justify-end\">\r\n          <v-btn\r\n            rounded\r\n            large\r\n            text\r\n            class=\"mr-4\"\r\n            @click=\"alertValidationProforma = false\"\r\n            >CANCELAR</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"asia-red white--text\"\r\n            @click=\"deleteItem(2), alertValidationProforma = false\"\r\n            :loading=\"loadingBtnDelete\"\r\n            >EXCLUIR</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TopSection from \"@/components/TopSection.vue\";\r\nimport ActionsTable from \"@/components/ActionsTable.vue\";\r\nimport getRouterData from \"@/mixins/getRouterData.js\";\r\nimport dataTable from \"@/mixins/dataTable.js\";\r\nimport crudController from \"@/mixins/crudController.js\";\r\nimport validationRules from \"@/mixins/validationRules.js\";\r\nimport { convertTimeStamp } from \"@/lib/timeStamp.js\";\r\nimport { mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  data: () => ({\r\n    // LISTAGEM DE VIAGENS\r\n    headers: [\r\n      { text: \"\", value: \"col1\", width: \"10%\" },\r\n      { text: \"Navio\", value: \"col2\" },\r\n      { text: \"Porto de Origem\", value: \"col3\" },\r\n      { text: \"ETD\", value: \"col4\" },\r\n      { text: \"Porto de Destino\", value: \"col5\" },\r\n      { text: \"ETA\", value: \"col6\" },\r\n      { text: \"Situação\", value: \"col7\", align: \"center\" },\r\n    ],\r\n    rows: [],\r\n    b: 1,\r\n    \r\n    // PARADAS INTERMEDIARIAS\r\n    modalIntermediateStops: false,\r\n    headersIntermediateStops: [\r\n      { text: \"\", value: \"col1\" },\r\n      { text: \"Porto Intermediário\", value: \"col2\" },\r\n      { text: \"Data Estimada Chegada\", value: \"col3\" },\r\n      { text: \"Data Chegada\", value: \"col4\" },\r\n    ],\r\n    rowsIntermediateStops: [],\r\n    loadingIntermediateStops: false,\r\n    currentTrip: {\r\n      id: null,\r\n      identification: null,\r\n    },\r\n    validFormIntermediateStops: true,\r\n    dataAddIntermediateStop: {},\r\n    loadingBtnIntermediateStops: false,\r\n    alertValidationProforma: null,\r\n  }),\r\n\r\n  computed: {\r\n    editPermission() {\r\n      return this.hasPermission(this.$PermissionNames.permissionShipTripEdit)\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...mapActions(\"ModuleParadasIntermediarias\", {\r\n      getAllStops: \"getAllStops\",\r\n      createStop: \"create\",\r\n      deleteStop: \"deleteStop\",\r\n    }),\r\n    ...mapActions(\"ModuleViagensNavios\", { verifyIfExistsProformasById: \"verifyIfExistsProformasById\" }),\r\n    \r\n    async deleteShipTrip(index, id){\r\n      this.deleteItem(1, id);\r\n      var response = await this.verifyIfExistsProformasById(id);\r\n      if (!response.data.result)\r\n      {\r\n        this.alertValidationProforma = true;\r\n      }\r\n      else\r\n      this.deleteItem(2);\r\n    },\r\n    addItem(value) {\r\n      this.$router.push({\r\n        name: \"ViewAddViagensNavios\",\r\n        params: { id: value.col1 },\r\n      });\r\n    },\r\n    async buildRows(data) {\r\n      this.rows = data.map(\r\n        (e) => (\r\n          {\r\n            col1: e.id,\r\n            col2: e.ship ? e.ship.name : \"\",\r\n            col3: this.getPortoOrigem(e),\r\n            col4: {\r\n              text: this.getETD(e),\r\n            },\r\n            col5: e.destinationPort ? e.destinationPort.name : \"\",\r\n            col6: {\r\n              text: e.eta,\r\n            },\r\n            col7: {\r\n              text: e.status,\r\n              color: e.status === true ? \"success\" : \"grey\",\r\n            },\r\n          }\r\n        )\r\n      );\r\n    },\r\n\r\n    getETD(item){\r\n      let originStop = item.intermediateStops.filter((x) => x.isOrigin)\r\n      if (originStop.length > 0)\r\n        return originStop[0].estimatedDeliveryDate\r\n      else\r\n        return ''\r\n    },\r\n\r\n    getPortoOrigem(item){\r\n      let originPort = item.intermediateStops.filter((x) => x.isOrigin)\r\n      if (originPort.length > 0)\r\n        return originPort[0].originPortName\r\n      else\r\n        return ''\r\n    },\r\n\r\n    // PARADAS INTERMEDIARIAS\r\n    async openIntermediateStopsList(tripId, identification) {\r\n      this.currentTrip.id = tripId;\r\n      this.currentTrip.identification = identification;\r\n      this.dataAddIntermediateStop.shipTripId = tripId;\r\n      this.modalIntermediateStops = true;\r\n      this.listIntermediateStops();\r\n    },\r\n\r\n    closeModalStopsList() {\r\n      this.key++;\r\n      this.modalIntermediateStops = false;\r\n      this.rowsIntermediateStops = [];\r\n      this.$refs.formIntermediateStops.reset();\r\n    },\r\n\r\n    async listIntermediateStops() {\r\n      this.loadingIntermediateStops = true;\r\n\r\n      this.getAllStops(this.currentTrip.id)\r\n        .then((response) => {\r\n          this.rowsIntermediateStops = response.data.result.items.map((x) => ({\r\n            col1: x.id,\r\n            col2:\r\n              x.intermediatePort.abbreviation + \" | \" + x.intermediatePort.name,\r\n            col3: convertTimeStamp(x.estimatedArrivalDate).slice(0, -8),\r\n            col4: x.arrivalDate,\r\n          }));\r\n\r\n          this.loadingIntermediateStops = false;\r\n        })\r\n        .catch(() => {\r\n          //PLOTAR ERRO\r\n          this.rowsIntermediateStops = [];\r\n          this.loadingIntermediateStops = false;\r\n        });\r\n    },\r\n\r\n    async addIntermediateStop() {\r\n      if (this.$refs.formIntermediateStops.validate()) {\r\n        this.loadingBtnIntermediateStops = true;\r\n\r\n        this.createStop(this.dataAddIntermediateStop)\r\n          .then(() => {\r\n            this.listIntermediateStops();\r\n            this.loadingBtnIntermediateStops = false;\r\n            this.$refs.formIntermediateStops.reset();\r\n          })\r\n          .catch(() => {\r\n            // PLOTAR ERRO\r\n          });\r\n      }\r\n    },\r\n\r\n    async removeIntermediateStop(idIntermediateStop) {\r\n      this.loadingIntermediateStops = true;\r\n\r\n      this.deleteStop(idIntermediateStop)\r\n        .then(() => {\r\n          this.listIntermediateStops();\r\n        })\r\n        .catch(() => {\r\n          // PLOTAR ERRO\r\n        });\r\n    },\r\n  },\r\n\r\n  mixins: [\r\n    validationRules,\r\n    getRouterData,\r\n    dataTable({ store: \"ModuleViagensNavios\" }),\r\n    crudController({ store: \"ModuleViagensNavios\" }),\r\n  ],\r\n  components: { TopSection, ActionsTable },\r\n};\r\n</script>\r\n"]}]}