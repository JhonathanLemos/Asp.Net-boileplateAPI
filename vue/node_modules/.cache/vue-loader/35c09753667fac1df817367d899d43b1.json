{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\proformas\\materiais\\ProformaMaterials.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\proformas\\materiais\\ProformaMaterials.vue","mtime":1680609356666},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTG9hZGluZyBmcm9tICJAL2NvbXBvbmVudHMvTG9hZGluZy52dWUiOw0KaW1wb3J0IHsgY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMgfSBmcm9tICJ2dWV4IjsNCmNvbnN0IG1vZHVsZVByb2Zvcm1hTWF0ZXJpYWlzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoDQogICJNb2R1bGVQcm9mb3JtYU1hdGVyaWFpcyINCik7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlByb2Zvcm1hTWF0ZXJpYWxzIiwNCiAgcHJvcHM6IFsiYm9hcmRpbmdHcm91cElkIiwgInByb2Zvcm1hQ29kZSIsICJnZXRBbGwiLCAicmVhZG9ubHkiLCAiaXNGaXJzdEJvYXJkaW5nR3JvdXAiXSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBwYWdlOiAxLA0KICAgIG9wdGlvbnM6IHt9LA0KICAgIHRvdGFsSXRlbXM6IDAsDQogICAgdGFibGVMb2FkaW5nOiBmYWxzZSwNCiAgICBoZWFkZXJzTWF0ZXJpYWlzOiBbDQogICAgICB7IHRleHQ6ICJDw7NkaWdvIiwgdmFsdWU6ICJtYXRlcmlhbC5jb2RlIiB9LA0KICAgICAgeyB0ZXh0OiAiRGVzY3Jpw6fDo28iLCB2YWx1ZTogIm1hdGVyaWFsLmRlc2NyaXB0aW9uIiwgd2lkdGg6ICIzNSUiIH0sDQogICAgICB7IHRleHQ6ICJQcm92aXNpb25hZG8iLCB2YWx1ZTogInByb3Zpc2lvbmVkUXRkIiB9LA0KICAgICAgeyB0ZXh0OiAiRW1iYXJjYWRvIiwgdmFsdWU6ICJxdWFudGl0eSIgfSwNCiAgICAgIHsgdGV4dDogIlZhbG9yIFVuaXTDoXJpbyIsIHZhbHVlOiAidW5pdGFyeVZhbHVlIiB9LA0KICAgICAgeyB0ZXh0OiAiVmFsb3IgVG90YWwiLCB2YWx1ZTogInRvdGFsVmFsdWUiIH0sDQogICAgICB7IHRleHQ6ICJFbWJhcnF1ZSBUb3RhbCIsIHZhbHVlOiAiZnVsbEJvYXJkaW5nIiwgc29ydGFibGU6ICJmYWxzZSIgfSwNCiAgICBdLA0KICAgIHJvd3NNYXRlcmlhaXM6IFtdLA0KICAgIHRvdGFsTG9hZGluZzogZmFsc2UsDQogICAgdG90YWxRdWFudGl0eTogMCwNCiAgfSksDQogIHdhdGNoOiB7DQogICAgb3B0aW9uczogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5sb2FkSXRlbXMoKTsNCiAgICAgICAgdGhpcy5sb2FkVG90YWxRdWFudGl0eSgpOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgfSwNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgLi4ubW9kdWxlUHJvZm9ybWFNYXRlcmlhaXMubWFwQWN0aW9ucyhbDQogICAgICAiZ2V0TWF0ZXJpYWxzQnlCb2FyZGluZyIsDQogICAgICAiZ2V0Qm9hcmRpbmdNYXRlcmlhbHNUb3RhbFF1YW50aXR5IiwNCiAgICBdKSwNCiAgICBhc3luYyBsb2FkVG90YWxRdWFudGl0eSgpIHsNCiAgICAgIHRoaXMudG90YWxMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIHRoaXMudG90YWxRdWFudGl0eSA9IGF3YWl0IHRoaXMuZ2V0Qm9hcmRpbmdNYXRlcmlhbHNUb3RhbFF1YW50aXR5KHsNCiAgICAgICAgYm9hcmRpbmdHcm91cElkOiB0aGlzLmJvYXJkaW5nR3JvdXBJZCwNCiAgICAgICAgcHJvZm9ybWFJZDogdGhpcy5wcm9mb3JtYUNvZGUsDQogICAgICB9KTsNCiAgICAgIHRoaXMudG90YWxMb2FkaW5nID0gZmFsc2U7DQogICAgfSwNCiAgICBhc3luYyBsb2FkSXRlbXMoKSB7DQogICAgICBsZXQgeyBwYWdlLCBpdGVtc1BlclBhZ2UgfSA9IHRoaXMub3B0aW9uczsNCiAgICAgIGxldCBwYWdlTnVtYmVyID0gcGFnZSA+IDAgPyBwYWdlIC0gMSA6IDA7DQogICAgICB0aGlzLnRhYmxlTG9hZGluZyA9IHRydWU7DQoNCiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0TWF0ZXJpYWxzQnlCb2FyZGluZyh7DQogICAgICAgIHBhZ2VOdW1iZXI6IHBhZ2VOdW1iZXIsDQogICAgICAgIGl0ZW1zUGVyUGFnZTogaXRlbXNQZXJQYWdlLA0KICAgICAgICBwcm9mb3JtYUlkOiB0aGlzLnByb2Zvcm1hQ29kZSwNCiAgICAgICAgYm9hcmRpbmdHcm91cElkOiB0aGlzLmJvYXJkaW5nR3JvdXBJZCwNCiAgICAgICAgZ2V0QWxsTWF0ZXJpYWxzOiB0aGlzLmdldEFsbCB8fCB0aGlzLmlzRmlyc3RCb2FyZGluZ0dyb3VwLA0KICAgICAgfSk7DQoNCiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgIHRoaXMudG90YWxJdGVtcyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0LnRvdGFsQ291bnQ7DQogICAgICAgIHRoaXMubnVtYmVyT2ZQYWdlcyA9IE1hdGguY2VpbCh0aGlzLnRvdGFsSXRlbXMgLyBpdGVtc1BlclBhZ2UpOw0KICAgICAgICB0aGlzLnJvd3NNYXRlcmlhaXMgPSByZXNwb25zZS5kYXRhLnJlc3VsdC5pdGVtczsNCiAgICAgIH0NCg0KICAgICAgdGhpcy50YWJsZUxvYWRpbmcgPSBmYWxzZTsNCiAgICB9LA0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgTG9hZGluZywNCiAgfSwNCn07DQo="},{"version":3,"sources":["ProformaMaterials.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProformaMaterials.vue","sourceRoot":"src/views/proformas/materiais","sourcesContent":["<template>\r\n  <div\r\n    style=\"overflow: auto; height: 500px\"\r\n    class=\"rounded-lg pa-2 white elevation-5\"\r\n  >\r\n    <v-data-table\r\n      class=\"elevation-1\"\r\n      id=\"table\"\r\n      disable-sort\r\n      :headers=\"headersMateriais\"\r\n      :items=\"rowsMateriais\"\r\n      :options.sync=\"options\"\r\n      :page=\"page\"\r\n      :server-items-length=\"totalItems\"\r\n      noDataText=\"Nenhum registro encontrado\"\r\n      :loading=\"tableLoading\"\r\n      loading-text=\"Aguarde, carregando materiais...\"\r\n      :footer-props=\"{\r\n        itemsPerPageOptions: [10, 50, 100],\r\n        itemsPerPageText: 'Ítens por Página',\r\n      }\"\r\n    >\r\n      <template v-slot:[`footer.prepend`]>\r\n        <Loading v-if=\"totalLoading\" />\r\n        <p v-else class=\"mb-0 text--var-2\" style=\"font-size: 14px\">\r\n          Valor total dos materiais: {{ totalQuantity | currencyFormat }}\r\n        </p>\r\n      </template>\r\n      <template v-slot:[`item.quantity`]=\"{ item }\">\r\n        {{ item.quantity | quantityTons }}\r\n      </template>\r\n\r\n      <template v-slot:[`item.provisionedQtd`]=\"{ item }\">\r\n        {{ item.provisionedQtd | quantityTons }}\r\n        {{\r\n          item.material.materialType\r\n            ? item.material.materialType == 0 || item.material.materialType == 1\r\n              ? \"ton(s)\"\r\n              : \"unidade(s)\"\r\n            : null\r\n        }}\r\n      </template>\r\n      <template v-slot:[`item.unitaryValue`]=\"{ item }\">\r\n        {{ item.unitaryValue | quantityUsd }}\r\n      </template>\r\n\r\n      <template v-slot:[`item.totalValue`]=\"{ item }\">\r\n        {{\r\n          ((item.quantity ? item.quantity : item.provisionedQtd) *\r\n            item.unitaryValue)\r\n            | currencyFormat\r\n        }}\r\n      </template>\r\n      <template v-slot:[`item.fullBoarding`]=\"{ item }\">\r\n        <v-row justify=\"center\">\r\n          <v-checkbox\r\n            v-model=\"item.fullBoarding\"\r\n            :disabled=\"!item.quantity\"\r\n            @change=\"$emit('updateFullBoarding', item)\"\r\n          />\r\n        </v-row>\r\n      </template>\r\n    </v-data-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loading from \"@/components/Loading.vue\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nconst moduleProformaMateriais = createNamespacedHelpers(\r\n  \"ModuleProformaMateriais\"\r\n);\r\n\r\nexport default {\r\n  name: \"ProformaMaterials\",\r\n  props: [\"boardingGroupId\", \"proformaCode\", \"getAll\", \"readonly\", \"isFirstBoardingGroup\"],\r\n  data: () => ({\r\n    page: 1,\r\n    options: {},\r\n    totalItems: 0,\r\n    tableLoading: false,\r\n    headersMateriais: [\r\n      { text: \"Código\", value: \"material.code\" },\r\n      { text: \"Descrição\", value: \"material.description\", width: \"35%\" },\r\n      { text: \"Provisionado\", value: \"provisionedQtd\" },\r\n      { text: \"Embarcado\", value: \"quantity\" },\r\n      { text: \"Valor Unitário\", value: \"unitaryValue\" },\r\n      { text: \"Valor Total\", value: \"totalValue\" },\r\n      { text: \"Embarque Total\", value: \"fullBoarding\", sortable: \"false\" },\r\n    ],\r\n    rowsMateriais: [],\r\n    totalLoading: false,\r\n    totalQuantity: 0,\r\n  }),\r\n  watch: {\r\n    options: {\r\n      handler() {\r\n        this.loadItems();\r\n        this.loadTotalQuantity();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...moduleProformaMateriais.mapActions([\r\n      \"getMaterialsByBoarding\",\r\n      \"getBoardingMaterialsTotalQuantity\",\r\n    ]),\r\n    async loadTotalQuantity() {\r\n      this.totalLoading = true;\r\n      this.totalQuantity = await this.getBoardingMaterialsTotalQuantity({\r\n        boardingGroupId: this.boardingGroupId,\r\n        proformaId: this.proformaCode,\r\n      });\r\n      this.totalLoading = false;\r\n    },\r\n    async loadItems() {\r\n      let { page, itemsPerPage } = this.options;\r\n      let pageNumber = page > 0 ? page - 1 : 0;\r\n      this.tableLoading = true;\r\n\r\n      let response = await this.getMaterialsByBoarding({\r\n        pageNumber: pageNumber,\r\n        itemsPerPage: itemsPerPage,\r\n        proformaId: this.proformaCode,\r\n        boardingGroupId: this.boardingGroupId,\r\n        getAllMaterials: this.getAll || this.isFirstBoardingGroup,\r\n      });\r\n\r\n      if (response.status == 200) {\r\n        this.totalItems = response.data.result.totalCount;\r\n        this.numberOfPages = Math.ceil(this.totalItems / itemsPerPage);\r\n        this.rowsMateriais = response.data.result.items;\r\n      }\r\n\r\n      this.tableLoading = false;\r\n    },\r\n  },\r\n  components: {\r\n    Loading,\r\n  },\r\n};\r\n</script>\r\n"]}]}