{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\components\\ParadasCreate.vue?vue&type=style&index=0&id=876fe95c&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\components\\ParadasCreate.vue","mtime":1680609356593},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1683229778387},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1683229781560},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1683229779724},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5wYXJhZGFzVGV4dCB7DQogIGNvbG9yOiAjOGM4YzhjICFpbXBvcnRhbnQ7DQogIGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50Ow0KICBtYXJnaW4tbGVmdDogOHB4ICFpbXBvcnRhbnQ7DQp9DQoNCi52LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXIgew0KICBoZWlnaHQ6IDQwcHggIWltcG9ydGFudDsNCiAgbWFyZ2luOiBhdXRvOw0KfQ0KDQouc3BhbiB7DQogIGRpc3BsYXk6IGZsZXg7DQogIG1hcmdpbjogYXV0bzsNCiAgcGFkZGluZzogNXB4Ow0KICBoZWlnaHQ6IDMwcHg7DQp9DQoNCi5yZW1vdmVJdGVtIHsNCiAgd2lkdGg6IDE2MHB4Ow0KICBmbG9hdDogcmlnaHQ7DQogIG1hcmdpbi10b3A6IDglOw0KICBwYWRkaW5nOiAwOw0KfQ0K"},{"version":3,"sources":["ParadasCreate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+hBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ParadasCreate.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <v-dialog v-model=\"openModalAlert\" persistent max-width=\"450px\">\r\n      <div\r\n        class=\"white pa-8 d-flex flex-column align-center text-center\"\r\n        style=\"overflow: auto\"\r\n      >\r\n        <v-icon style=\"font-size: 60px\" color=\"warning\">mdi-alert</v-icon>\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5\">\r\n          Esta parada da viagem do navio possui proforma(s) vinculada(s). Deseja\r\n          excluir a parada?\r\n        </h4>\r\n\r\n        <div class=\"d-flex flex-row justify-end\">\r\n          <v-btn rounded large text class=\"mr-4\" @click=\"openModalAlert = false\"\r\n            >Não</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"warning white--text\"\r\n            @click=\"removeParadaFromList(indexToRemove)\"\r\n            >Sim</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-dialog>\r\n    <ModalRelacionarProformas\r\n      @selectedProforma=\"selectedProformaMethod\"\r\n      @closeModalRelationShip=\"closeModalRelationShip\"\r\n      :display=\"displayModal\"\r\n      :index=\"index\"\r\n      @setError=\"setError\"\r\n      :error=\"error\"\r\n    ></ModalRelacionarProformas>\r\n    <h1 class=\"mt-3\" style=\"font-size: 45px\">\r\n      Paradas\r\n      <v-btn\r\n        v-if=\"!readonly\"\r\n        fab\r\n        small\r\n        class=\"mx-3 asia-red white--text elevation-0\"\r\n        :disabled=\"disabled\"\r\n        @click=\"generateNewStop\"\r\n      >\r\n        <v-icon>mdi-plus</v-icon>\r\n      </v-btn>\r\n    </h1>\r\n    <v-card class=\"d-flex mt-4\" style=\"width: 80%; height: auto\">\r\n      <v-expansion-panels>\r\n        <v-expansion-panel v-for=\"(stop, i) in stopList\" :key=\"i\">\r\n          <v-expansion-panel-header v-if=\"stop.id != 0\">\r\n            <span class=\"span\">\r\n              <h5 v-if=\"stop.isOrigin\" style=\"width: auto !important\">\r\n                ORIGEM {{ stop.originPortName }}\r\n              </h5>\r\n              <h5 v-else style=\"width: auto !important\">\r\n                {{ stop.originPortName }}\r\n              </h5>\r\n              <p class=\"paradasText\">\r\n                ETA {{ stop.estimatedArrivalDate | dateFormat }}\r\n              </p>\r\n              <p class=\"paradasText\">\r\n                ETD {{ stop.estimatedDeliveryDate | dateFormat }}\r\n              </p>\r\n            </span>\r\n          </v-expansion-panel-header>\r\n          <v-expansion-panel-header v-else-if=\"stop.id == 0\">\r\n            <span\r\n              v-if=\"stop.isOrigin\"\r\n              class=\"span\"\r\n              style=\"font-size: 12px; font-weight: bold\"\r\n              >ORIGEM</span\r\n            >\r\n            <span v-else class=\"span\" style=\"font-size: 12px; font-weight: bold\"\r\n              >NOVA PARADA</span\r\n            >\r\n          </v-expansion-panel-header>\r\n          <v-expansion-panel-content>\r\n            <div class=\"d-flex\" style=\"width: 100%\">\r\n              <v-text-field v-show=\"false\" v-model=\"stop.id\"></v-text-field>\r\n              <v-select\r\n                v-if=\"hasPermission($PermissionNames.permissionPortSee)\"\r\n                :disabled=\"readonly\"\r\n                :items=\"itemsPorts\"\r\n                v-model=\"stopList[i].originPortId\"\r\n                label=\"Porto de origem\"\r\n                style=\"width: 50%\"\r\n                :rules=\"[rules.required]\"\r\n              >\r\n              </v-select>\r\n              <v-text-field\r\n                v-else\r\n                disabled\r\n                style=\"width: 50%\"\r\n                label=\"Porto de origem\"\r\n                v-model=\"stopList[i].originPortName\"\r\n              >\r\n              </v-text-field>\r\n              <v-select\r\n                v-if=\"hasPermission($PermissionNames.permissionNamedPortAgentSee)\"\r\n                :disabled=\"readonly\"\r\n                v-model=\"stopList[i].portAgentId\"\r\n                :items=\"itemsAgents\"\r\n                label=\"Agente Portuário\"\r\n                class=\"ml-4\"\r\n                style=\"width: 50%\"\r\n              ></v-select>\r\n              <v-text-field\r\n                v-else\r\n                disabled\r\n                class=\"ml-4\"\r\n                style=\"width: 50%\"\r\n                label=\"Agente portuário\"\r\n                v-model=\"stopList[i].portAgentName\"\r\n              >\r\n              </v-text-field>\r\n            </div>\r\n            <div class=\"d-flex\">\r\n              <DatePicker\r\n                :disabled=\"readonly\"\r\n                v-model=\"stopList[i].estimatedArrivalDate\"\r\n                label=\"ETA\"\r\n                style=\"width: 25%\"\r\n                :required=\"true\"\r\n              ></DatePicker>\r\n              <v-autocomplete\r\n                v-if=\"hasPermission($PermissionNames.permissionCategorySituationSee)\"\r\n                :disabled=\"readonly\"\r\n                label=\"Situação ETA\"\r\n                :loading=\"loadingStatus\"\r\n                v-model=\"stopList[i].etaStatus\"\r\n                :items=\"tipoSituacaoETA\"\r\n                :rules=\"[rules.required]\"\r\n                style=\"width: 25%\"\r\n                class=\"ml-4\"\r\n                item-text=\"description\"\r\n                return-object\r\n              >\r\n                <template v-slot:no-data>\r\n                  <div class=\"px-4\">Sem dados disponíveis</div>\r\n                </template>\r\n              </v-autocomplete>\r\n              <v-text-field\r\n                v-else\r\n                disabled\r\n                class=\"ml-4\"\r\n                label=\"Situação ETA\"\r\n                style=\"width: 25%\"\r\n                v-model=\"stopList[i].etaStatusName\"\r\n              >\r\n              </v-text-field>\r\n              <DatePicker\r\n                :disabled=\"readonly\"\r\n                v-model=\"stopList[i].estimatedDeliveryDate\"\r\n                class=\"ml-4\"\r\n                label=\"ETD\"\r\n                style=\"width: 25%\"\r\n                :required=\"true\"\r\n              ></DatePicker>\r\n              <v-autocomplete\r\n                v-if=\"hasPermission($PermissionNames.permissionCategorySituationSee)\"\r\n                :disabled=\"readonly\"\r\n                label=\"Situação ETD\"\r\n                :loading=\"loadingStatus\"\r\n                v-model=\"stopList[i].etdStatus\"\r\n                :items=\"tipoSituacaoETD\"\r\n                :rules=\"[rules.required]\"\r\n                style=\"width: 25%\"\r\n                class=\"ml-4\"\r\n                item-text=\"description\"\r\n                return-object\r\n              >\r\n                <template v-slot:no-data>\r\n                  <div class=\"px-4\">Sem dados disponíveis</div>\r\n                </template>\r\n              </v-autocomplete>\r\n              <v-text-field\r\n                v-else\r\n                disabled\r\n                class=\"ml-4\"\r\n                label=\"Situação ETD\"\r\n                style=\"width: 25%\"\r\n                v-model=\"stopList[i].etdStatusName\"\r\n              >\r\n              </v-text-field>\r\n            </div>\r\n            <h5 class=\"mt-4\">\r\n              Relacionar Proforma\r\n              <v-btn\r\n                v-if=\"!readonly && hasPermission($PermissionNames.permissionProformaSee)\"\r\n                fab\r\n                small\r\n                :disabled=\"disabled\"\r\n                class=\"mx-3 asia-red white--text elevation-0\"\r\n                @click=\"setIndexForStop(i), (displayModal = true)\"\r\n              >\r\n                <v-icon>mdi-plus</v-icon>\r\n              </v-btn>\r\n            </h5>\r\n            <div class=\"d-flex justify-space-between\">\r\n              <v-data-table\r\n                class=\"ml-4\"\r\n                disable-sort\r\n                :headers=\"\r\n                  readonly ? headers.filter((x) => x.value != 'col1') : headers\r\n                \"\r\n                hide-default-footer\r\n                :items=\"returnProformaList(i)\"\r\n                noDataText=\"Nenhum registro encontrado\"\r\n                loading-text=\"Aguarde, carregando viagens...\"\r\n                style=\"font-size: 10px; width: 50%; height: auto\"\r\n              >\r\n                <template v-slot:[`item.col1`]=\"{ item }\">\r\n                  <v-btn\r\n                    v-if=\"hasPermission($PermissionNames.permissionProformaSee)\"\r\n                    @click=\"removeItemFromRelacao(item, i)\"\r\n                    class=\"ma-2\"\r\n                    text\r\n                    icon\r\n                  >\r\n                    <v-icon class=\"mr-1\">mdi-link-variant-remove</v-icon>\r\n                  </v-btn>\r\n                </template>\r\n              </v-data-table>\r\n\r\n              <v-btn\r\n                v-if=\"!stop.isOrigin && !readonly\"\r\n                @click=\"validateProformas(i, stop)\"\r\n                text\r\n                class=\"removeItem mt-auto\"\r\n                :disabled=\"disabled\"\r\n              >\r\n                <v-icon color=\"error\"> mdi-delete </v-icon>Excluir Parada</v-btn\r\n              >\r\n            </div>\r\n          </v-expansion-panel-content>\r\n        </v-expansion-panel>\r\n      </v-expansion-panels>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport crudController from \"@/mixins/crudController.js\";\r\nimport validationRules from \"@/mixins/validationRules.js\";\r\nimport DatePicker from \"./DatePicker.vue\";\r\nimport tiposCategorias from \"@/lib/enumTiposCategorias.js\";\r\nimport ModalRelacionarProformas from \"../views/viagensNavios/modalRelacionarProformas.vue\";\r\nconst modulePorts = createNamespacedHelpers(\"ModulePortos\");\r\nconst moduleAgents = createNamespacedHelpers(\"ModuleAgentesPortuarios\");\r\nconst moduleShipTrips = createNamespacedHelpers(\"ModuleViagensNavios\");\r\nconst moduleParadas = createNamespacedHelpers(\"ModuleParadasIntermediarias\");\r\nconst moduleCategoriaSituacao = createNamespacedHelpers(\r\n  \"ModuleCategoriaSituacao\"\r\n);\r\n\r\nexport default {\r\n  props: [\"value\", \"disabled\", \"readonly\"],\r\n  data: () => ({\r\n    stopList: [],\r\n    openModalAlert: null,\r\n    indexToRemove: null,\r\n    headers: [\r\n      { text: \"\", value: \"col1\" },\r\n      { text: \"Proforma\", value: \"col2\" },\r\n      { text: \"Embarque\", value: \"col3\" },\r\n      { text: \"Planta\", value: \"col4\" },\r\n      { text: \"Razão Social\", value: \"col5\" },\r\n    ],\r\n    dataNewItem: {\r\n      id: 0,\r\n      etdStatus: null,\r\n      stopEtdDate: \"\",\r\n      estimatedDeliveryDate: null,\r\n      etaStatus: null,\r\n      stopEtaDate: null,\r\n      estimatedArrivalDate: null,\r\n      portAgentId: null,\r\n      originPortId: null,\r\n      isOrigin: false,\r\n    },\r\n    disableButtonRelacionar: null,\r\n    isAdd: null,\r\n    error: null,\r\n    index: null,\r\n    selectedProforma: [],\r\n    proformas: [],\r\n    menu3: false,\r\n    menu4: false,\r\n    itemsPorts: [],\r\n    itemsAgents: [],\r\n    tipoSituacaoETA: [],\r\n    tipoSituacaoETD: [],\r\n    loadingStatus: false,\r\n    displayModal: false,\r\n    isListing: null,\r\n  }),\r\n\r\n  methods: {\r\n    ...modulePorts.mapActions({ getAllPorts: \"getAllSelect\" }),\r\n    ...moduleAgents.mapActions({ getAllAgents: \"getAllSelect\" }),\r\n    ...moduleParadas.mapActions({ getStopByShipTrip: \"getStopByShipTrip\" }),\r\n    ...moduleCategoriaSituacao.mapActions({ getByType: \"getByType\" }),\r\n    ...moduleShipTrips.mapActions({\r\n      getById: \"getById\",\r\n      getShipTripByShip: \"getShipTripByShip\",\r\n    }),\r\n\r\n    async getPorts() {\r\n      var response = await this.getAllPorts();\r\n      response.data.result.items.forEach((element) => {\r\n        this.itemsPorts.push({\r\n          value: element.id,\r\n          text: element.abbreviation + \" | \" + element.name,\r\n        });\r\n      });\r\n    },\r\n\r\n    async getAgents() {\r\n      var response = await this.getAllAgents();\r\n      response.data.result.items.forEach((element) => {\r\n        this.itemsAgents.push({\r\n          value: element.id,\r\n          text: element.name,\r\n        });\r\n      });\r\n    },\r\n\r\n    formatDate(date) {\r\n      if (!date) return null;\r\n      const [year, month, day] = date.split(\"-\");\r\n      return `${day}/${month}/${year}`;\r\n    },\r\n\r\n    generateNewStop() {\r\n      this.isAdd = true;\r\n      this.stopList.push({ ...this.dataNewItem });\r\n\r\n      if (this.stopList.length == 1) this.stopList[0].isOrigin = true;\r\n    },\r\n\r\n    async verifyIfIsEdit() {\r\n      var id = this.$route.params.id;\r\n      if (id != null) {\r\n        this.setProformasInList();\r\n      }\r\n    },\r\n\r\n    validateProformas(i, stop) {\r\n      if (stop.proformaShipTripIntermediateStop.length > 0) {\r\n        this.openModalAlert = true;\r\n        this.indexToRemove = i;\r\n      } else this.removeParadaFromList(i);\r\n    },\r\n\r\n    removeParadaFromList(i) {\r\n      this.openModalAlert = false;\r\n      this.isListing = true;\r\n      this.stopList[i].index = i;\r\n      this.proformas = this.proformas.filter((x) => x.index != i);\r\n      this.stopList = this.stopList.filter((x) => x.index != i);\r\n    },\r\n\r\n    setError(v) {\r\n      this.error = v;\r\n    },\r\n\r\n    selectedProformaMethod(a, index) {\r\n      a.index = index;\r\n      let verifyIfExists = [];\r\n      if (a.boardingGroup)\r\n        verifyIfExists = this.proformas.filter(\r\n          (x) =>\r\n            x.id == a.id &&\r\n            x.boardingGroup &&\r\n            x.boardingGroup.id == a.boardingGroup.id\r\n        );\r\n      else verifyIfExists = this.proformas.filter((x) => x.id == a.id);\r\n\r\n      if (verifyIfExists.length > 0) {\r\n        this.error = true;\r\n        return;\r\n      }\r\n\r\n      // todas as proformas cadastradas sao adds aqui\r\n      this.proformas.push(a);\r\n\r\n      //filtro pelo index quais eu quero\r\n      var proformas = this.proformas.filter((x) => x.index == index);\r\n\r\n      this.stopList[index].proformas = [];\r\n      this.stopList[index].proformaShipTripIntermediateStop = [];\r\n      proformas.forEach((proforma) => {\r\n        this.stopList[index].proformas.push(proforma);\r\n      });\r\n      this.stopList[index].index = index;\r\n      this.displayModal = false;\r\n    },\r\n\r\n    setProformasInList() {\r\n      if (this.isAdd) return;\r\n      for (let i = 0; i < this.stopList.length; i++) {\r\n        if (!this.stopList[i].proformaShipTripIntermediateStop) return;\r\n\r\n        this.stopList[i].proformaShipTripIntermediateStop.forEach((x) => {\r\n          x.proforma.boardingGroup = x.boardingGroup;\r\n        });\r\n\r\n        var proformas = this.stopList[i].proformaShipTripIntermediateStop.map(\r\n          (x) => x.proforma\r\n        );\r\n\r\n        if (this.isListing) {\r\n          this.proformas = [];\r\n          for (let index = 0; index < proformas.length; index++) {\r\n            proformas[index].index = i;\r\n            this.proformas.push(proformas[index]);\r\n          }\r\n          this.isListing = false;\r\n        } else {\r\n          for (let index = 0; index < proformas.length; index++) {\r\n            proformas[index].index = i;\r\n            this.proformas.push(proformas[index]);\r\n          }\r\n        }\r\n      }\r\n      this.isAdd = false;\r\n    },\r\n\r\n    returnProformaList(i) {\r\n      var prof = this.proformas.filter((x) => x.index == i);\r\n      var item = prof.map((x) => ({\r\n        col1: x.id,\r\n        col2: x.proformaValue,\r\n        col3: x.boardingGroup ? x.boardingGroup.invoice : \"\",\r\n        col4: x.plant,\r\n        col5: x.customerName,\r\n        col6: i,\r\n      }));\r\n      return item;\r\n    },\r\n\r\n    removeItemFromRelacao(item, i) {\r\n      var allProformasWithoutIndex = this.proformas.filter((x) => x.index != i);\r\n      var allProformasWithIndex = this.proformas.filter((x) => x.index == i);\r\n\r\n      if (item.col3) {\r\n        let itemToRemove = allProformasWithIndex.filter(\r\n          (x) =>\r\n            x.boardingGroup &&\r\n            x.boardingGroup.invoice == item.col3 &&\r\n            x.id == item.col1\r\n        )[0];\r\n\r\n        allProformasWithIndex = allProformasWithIndex.filter(\r\n          (x) => x != itemToRemove\r\n        );\r\n      } else {\r\n        let itemToRemove = allProformasWithIndex.filter(\r\n          (x) => !x.boardingGroup && x.id == item.col1\r\n        )[0];\r\n\r\n        allProformasWithIndex = allProformasWithIndex.filter(\r\n          (x) => x != itemToRemove\r\n        );\r\n      }\r\n\r\n      this.proformas = [];\r\n      this.stopList[i].proformas = [];\r\n      this.stopList[i].proformaShipTripIntermediateStop = [];\r\n\r\n      allProformasWithIndex.forEach((x) => {\r\n        this.proformas.push(x);\r\n        this.stopList[i].proformas.push(x);\r\n      });\r\n\r\n      allProformasWithoutIndex.forEach((x) => {\r\n        this.proformas.push(x);\r\n      });\r\n    },\r\n\r\n    setIndexForStop(index) {\r\n      this.index = index;\r\n    },\r\n\r\n    closeModalRelationShip(bool) {\r\n      this.displayModal = bool;\r\n    },\r\n\r\n    async loadStatus() {\r\n      this.loadingStatus = true;\r\n      this.tipoSituacaoETA = await this.getByType(\r\n        tiposCategorias.enumTiposCategoriasRequest.situacaoETA\r\n      );\r\n      this.tipoSituacaoETD = await this.getByType(\r\n        tiposCategorias.enumTiposCategoriasRequest.situacaoETD\r\n      );\r\n      this.loadingStatus = false;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    stopList: {\r\n      immediate: true,\r\n      deep: true,\r\n      handler(newValue) {\r\n        this.$emit(\"input\", newValue);\r\n      },\r\n    },\r\n\r\n    value() {\r\n      if (this.value && this.value.length > 0) {\r\n        this.stopList = this.value;\r\n        this.verifyIfIsEdit();\r\n      }\r\n    },\r\n    success() {\r\n      if (this.success) this.$router.push({ path: `/home/viagensNavios` });\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    if (this.hasPermission(this.$PermissionNames.permissionPortSee))\r\n      this.getPorts();\r\n    if (this.hasPermission(this.$PermissionNames.permissionNamedPortAgentSee))\r\n      this.getAgents();\r\n    if (this.hasPermission(this.$PermissionNames.permissionCategorySituationSee))\r\n      this.loadStatus();\r\n  },\r\n  mixins: [\r\n    crudController({ store: \"ModuleParadasIntermediarias\" }),\r\n    validationRules,\r\n  ],\r\n\r\n  components: { DatePicker, ModalRelacionarProformas },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.paradasText {\r\n  color: #8c8c8c !important;\r\n  font-size: 12px !important;\r\n  margin-left: 8px !important;\r\n}\r\n\r\n.v-expansion-panel-header {\r\n  height: 40px !important;\r\n  margin: auto;\r\n}\r\n\r\n.span {\r\n  display: flex;\r\n  margin: auto;\r\n  padding: 5px;\r\n  height: 30px;\r\n}\r\n\r\n.removeItem {\r\n  width: 160px;\r\n  float: right;\r\n  margin-top: 8%;\r\n  padding: 0;\r\n}\r\n</style>\r\n"]}]}