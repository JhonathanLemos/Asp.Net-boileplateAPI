{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\clientes\\grupoClientes\\vinculoClientes\\CustomerListComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\clientes\\grupoClientes\\vinculoClientes\\CustomerListComponent.vue","mtime":1680609356640},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBjcmVhdGVOYW1lc3BhY2VkSGVscGVycyB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IENhdGVnb3J5Qm9vbGVhbkNoaXAgZnJvbSAiQC9jb21wb25lbnRzL0NhdGVnb3J5Qm9vbGVhbkNoaXAudnVlIjsNCmltcG9ydCB2YWxpZGF0aW9uUnVsZXMgZnJvbSAiQC9taXhpbnMvdmFsaWRhdGlvblJ1bGVzLmpzIjsNCmltcG9ydCBDdXN0b21lckxpbmtNb2RhbCBmcm9tICIuL0N1c3RvbWVyTGlua01vZGFsLnZ1ZSI7DQppbXBvcnQgTG9hZGluZyBmcm9tICIuLi8uLi8uLi8uLi9jb21wb25lbnRzL0xvYWRpbmcudnVlIjsNCmNvbnN0IG1vZHVsZUNsaWVudGVzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoIk1vZHVsZUNsaWVudGVzIik7DQpjb25zdCBtb2R1bGVHcnVwb0NsaWVudGVzID0gY3JlYXRlTmFtZXNwYWNlZEhlbHBlcnMoIk1vZHVsZUdydXBvQ2xpZW50ZXMiKTsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7IEN1c3RvbWVyTGlua01vZGFsLCBDYXRlZ29yeUJvb2xlYW5DaGlwLCBMb2FkaW5nIH0sDQogIG5hbWU6ICJDdXN0b21lckxpc3RDb21wb25lbnQiLA0KICBwcm9wczogWyJ2YWx1ZSIsICJyZWFkb25seSJdLA0KICBtaXhpbnM6IFt2YWxpZGF0aW9uUnVsZXNdLA0KDQogIGRhdGE6ICgpID0+ICh7DQogICAgY3VzdG9tZXJIZWFkZXI6IFsNCiAgICAgIHsgdGV4dDogIiIsIHZhbHVlOiAiaWQiLCB3aWR0aDogIjUlIiB9LA0KICAgICAgeyB0ZXh0OiAiUGVuZMOqbmNpYSIsIHZhbHVlOiAicGVuZGVuY3kiLCB3aWR0aDogIjEwJSIgfSwNCiAgICAgIHsgdGV4dDogIkNsaWVudGUiLCB2YWx1ZTogImNvcnBvcmF0ZU5hbWUiLCB3aWR0aDogIjQwJSIgfSwNCiAgICAgIHsgdGV4dDogIkNOUEoiLCB2YWx1ZTogImNucGoiLCB3aWR0aDogIjI1JSIgfSwNCiAgICAgIHsgdGV4dDogIlNpdHVhw6fDo28iLCB2YWx1ZTogInN0YXR1cyIsIHdpZHRoOiAiMTAlIiB9LA0KICAgIF0sDQoNCiAgICBjdXN0b21lckdyb3VwRGF0YTogew0KICAgICAgbmFtZTogbnVsbCwNCiAgICAgIGN1c3RvbWVyczogW10sDQogICAgICBzdGF0dXM6IHRydWUsDQogICAgfSwNCiAgICB1bmxpbmtBbGVydDogZmFsc2UsDQogICAgdW5saW5rSWQ6IG51bGwsDQogIH0pLA0KDQogIHdhdGNoOiB7DQogICAgZGlzcGxheSgpIHsNCiAgICAgIHRoaXMuZGlzcGxheUF1dG9Db21wbGV0ZSA9IHRoaXMuZGlzcGxheTsNCiAgICB9LA0KDQogICAgdmFsdWUobmV3VmFsdWUpIHsNCiAgICAgIHRoaXMuY3VzdG9tZXJHcm91cERhdGEgPSBuZXdWYWx1ZTsNCiAgICB9LA0KDQogICAgY3VzdG9tZXJHcm91cERhdGE6IHsNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMuY3VzdG9tZXJHcm91cERhdGEpOw0KICAgICAgfSwNCiAgICB9LA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tb2R1bGVDbGllbnRlcy5tYXBBY3Rpb25zKHsNCiAgICAgIGdldEN1c3RvbWVyQnlJZDogImdldEJ5SWQiLA0KICAgICAgZ2V0Q3VzdG9tZXJCeVZhbHVlOiAiZ2V0QnlWYWx1ZSIsDQogICAgfSksDQoNCiAgICAuLi5tb2R1bGVHcnVwb0NsaWVudGVzLm1hcEFjdGlvbnMoew0KICAgICAgZ2xvYmFsTGlzdDogImdsb2JhbExpc3QiLA0KICAgICAgcmVtb3ZlT2xkUmVsYXRpb246ICJyZW1vdmVPbGRSZWxhdGlvbiIsDQogICAgfSksDQoNCiAgICBhc3luYyBhZGRUb0xpc3QoaXRlbSkgew0KICAgICAgdmFyIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRDdXN0b21lckJ5SWQoaXRlbS52YWx1ZSk7DQogICAgICBsZXQgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YS5yZXN1bHQ7DQogICAgICBsZXQgbXlEYXRhID0gew0KICAgICAgICBwZW5kZW5jeTogcmVzdWx0LmN1c3RvbWVyVHlwZS5sZW5ndGggPT0gMCA/IDAgOiAxLA0KICAgICAgICBjb2RlOiByZXN1bHQuY29kZSwNCiAgICAgICAgY29ycG9yYXRlTmFtZTogcmVzdWx0LmNvcnBvcmF0ZU5hbWUsDQogICAgICAgIGNucGo6IHJlc3VsdC5jbnBqLA0KICAgICAgICBjdXN0b21lclR5cGU6IHJlc3VsdC5jdXN0b21lclR5cGUsDQogICAgICAgIHBsYW50OiByZXN1bHQucGxhbnQsDQogICAgICAgIHJlc3BvbnNpYmxlOiByZXN1bHQucmVzcG9uc2libGUsDQogICAgICAgIGVtYWlsOiByZXN1bHQuZW1haWwsDQogICAgICAgIGFkZHJlc3NJZDogcmVzdWx0LmFkZHJlc3NJZCwNCiAgICAgICAgcGhvbmU6IHJlc3VsdC5waG9uZSwNCiAgICAgICAgbWF0ZXJpYWxUeXBlOiByZXN1bHQubWF0ZXJpYWxUeXBlLA0KICAgICAgICBzdGF0dXM6IHJlc3VsdC5zdGF0dXMsDQogICAgICAgIHVubGluazogaXRlbS51bmxpbmssDQogICAgICAgIGlkOiByZXN1bHQuaWQsDQogICAgICB9Ow0KICAgICAgdGhpcy5jdXN0b21lckdyb3VwRGF0YS5jdXN0b21lcnMucHVzaChteURhdGEpOw0KICAgICAgYXdhaXQgdGhpcy5nbG9iYWxMaXN0KG15RGF0YSk7DQogICAgfSwNCg0KICAgIGFzeW5jIHVubGlua0RhdGEoaXRlbSkgew0KICAgICAgdGhpcy51bmxpbmtBbGVydCA9IHRydWU7DQogICAgICB0aGlzLnVubGlua0lkID0gaXRlbS5pZDsNCiAgICB9LA0KDQogICAgYXN5bmMgdW5saW5rSXRlbSgpIHsNCiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVtb3ZlT2xkUmVsYXRpb24odGhpcy51bmxpbmtJZCk7DQogICAgICAgICAgICANCiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKQ0KICAgICAgICB0aGlzLmN1c3RvbWVyR3JvdXBEYXRhLmN1c3RvbWVycyA9IHRoaXMuY3VzdG9tZXJHcm91cERhdGEuY3VzdG9tZXJzLmZpbHRlcih4ID0+IHguaWQgIT0gdGhpcy51bmxpbmtJZCk7DQoNCiAgICAgIHRoaXMuY2xvc2VVbmxpbmtBbGVydCgpOw0KICAgIH0sDQoNCiAgICBhc3luYyBsaW5rSXRlbSgpIHsNCiAgICAgIHRoaXMuJHJlZnMuY3VzdG9tZXJMaW5rTW9kYWwuc2hvd0xpbmtEaWFsb2coe30pOw0KICAgIH0sDQoNCiAgICBjbG9zZVVubGlua0FsZXJ0KCkgew0KICAgICAgdGhpcy51bmxpbmtBbGVydCA9IGZhbHNlOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["CustomerListComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"CustomerListComponent.vue","sourceRoot":"src/views/clientes/grupoClientes/vinculoClientes","sourcesContent":["<template>\r\n  <div>\r\n    <!-- DIALOG DESVINCULAR -->\r\n    <v-dialog v-model=\"unlinkAlert\" max-width=\"350px\">\r\n      <div class=\"white pa-8 d-flex flex-column align-center text-center\">\r\n        <v-icon style=\"font-size: 60px\" color=\"asia-red\">\r\n          mdi-alert-circle-outline\r\n        </v-icon>\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5\">\r\n          Deseja excluir o vínculo do cliente ao grupo de cliente?\r\n        </h4>\r\n\r\n        <div class=\"d-flex flex-row justify-end\">\r\n          <v-btn rounded large text class=\"mr-4\" @click=\"closeUnlinkAlert()\"\r\n            >CANCELAR</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"asia-red white--text\"\r\n            @click=\"unlinkItem()\"\r\n          >\r\n            EXCLUIR</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-dialog>\r\n    <customer-link-modal ref=\"customerLinkModal\" :list=\"customerGroupData.customers\" @on-save=\"addToList\" />\r\n    <div\r\n      class=\"d-flex pa-2 rounded-lg align-center\"\r\n      style=\"background: #f5f5f5; heigth: 20%\"\r\n    > \r\n      <div v-if=\"!readonly\">\r\n        <v-switch\r\n          v-model=\"customerGroupData.status\"\r\n          :label=\"customerGroupData.status ? 'Ativo' : 'Inativo'\"\r\n          color=\"asia-red\"\r\n          class=\"mr-6\"\r\n        ></v-switch>\r\n      </div>\r\n      <div v-else>\r\n        <v-chip class=\"mt-2 mr-6\" outlined :color=\"customerGroupData.status ? 'green' : 'red'\">\r\n          {{ (customerGroupData.status == true ? 'Ativo' : 'Inativo') }}\r\n        </v-chip>\r\n      </div>\r\n      <v-text-field\r\n        :readonly=\"readonly\"\r\n        :clearable=\"!readonly\"\r\n        label=\"Nome do Grupo\"\r\n        v-model=\"customerGroupData.name\"\r\n        :rules=\"[rules.required]\"\r\n      ></v-text-field>\r\n    </div>\r\n\r\n    <div class=\"mt-6\">\r\n      <div class=\"d-flex justify-space-between\">\r\n        <h4>Clientes Vinculados</h4>\r\n        <v-btn\r\n          v-if=\"!readonly\"\r\n          rounded\r\n          dense\r\n          style=\"background: #fee066\"\r\n          class=\"black--text\"\r\n          @click=\"linkItem()\"\r\n        >\r\n          <v-icon class=\"mr-2\">mdi-link-variant-remove</v-icon>\r\n          VINCULAR\r\n        </v-btn>\r\n      </div>\r\n    </div>\r\n    <div style=\"overflow: auto\">\r\n      <v-data-table\r\n        ref=\"customersTable\"\r\n        class=\"elevation-1\"\r\n        disable-sort\r\n        :headers=\"readonly ? \r\n          customerHeader.filter(x => x.value != 'id') : customerHeader\"\r\n        :items=\"customerGroupData.customers\"\r\n        noDataText=\"Nenhum registro encontrado\"\r\n        hide-default-footer\r\n        style=\"overflow: auto\"\r\n      >\r\n        <template v-slot:[`item.id`]=\"{ item }\">\r\n          <div class=\"d-flex flex-nowrap\">\r\n            <v-btn class=\"mr-2\" icon @click=\"unlinkData(item)\">\r\n              <v-icon> mdi-link-variant-remove </v-icon>\r\n            </v-btn>\r\n          </div>\r\n        </template>\r\n\r\n        <template v-slot:[`item.corporateName`]=\"{ item }\">\r\n          {{\r\n            item.code +\r\n            \" | \" +\r\n            item.corporateName +\r\n            \" | \" +\r\n            (item.plant == null ? \"-\" : item.plant)\r\n          }}\r\n        </template>\r\n\r\n        <template v-slot:[`item.pendency`]=\"{ item }\">\r\n          <v-icon color=\"orange\" v-if=\"item.pendency == 0\"> mdi-alert </v-icon>\r\n        </template>\r\n\r\n        <template v-slot:[`item.status`]=\"{ item }\">\r\n          <Loading :startContent=\"true\" v-if=\"!item.status\" />\r\n          <category-boolean-chip\r\n          v-else\r\n            :status=\" item.status\"\r\n          />\r\n        </template>\r\n      </v-data-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport CategoryBooleanChip from \"@/components/CategoryBooleanChip.vue\";\r\nimport validationRules from \"@/mixins/validationRules.js\";\r\nimport CustomerLinkModal from \"./CustomerLinkModal.vue\";\r\nimport Loading from \"../../../../components/Loading.vue\";\r\nconst moduleClientes = createNamespacedHelpers(\"ModuleClientes\");\r\nconst moduleGrupoClientes = createNamespacedHelpers(\"ModuleGrupoClientes\");\r\n\r\nexport default {\r\n  components: { CustomerLinkModal, CategoryBooleanChip, Loading },\r\n  name: \"CustomerListComponent\",\r\n  props: [\"value\", \"readonly\"],\r\n  mixins: [validationRules],\r\n\r\n  data: () => ({\r\n    customerHeader: [\r\n      { text: \"\", value: \"id\", width: \"5%\" },\r\n      { text: \"Pendência\", value: \"pendency\", width: \"10%\" },\r\n      { text: \"Cliente\", value: \"corporateName\", width: \"40%\" },\r\n      { text: \"CNPJ\", value: \"cnpj\", width: \"25%\" },\r\n      { text: \"Situação\", value: \"status\", width: \"10%\" },\r\n    ],\r\n\r\n    customerGroupData: {\r\n      name: null,\r\n      customers: [],\r\n      status: true,\r\n    },\r\n    unlinkAlert: false,\r\n    unlinkId: null,\r\n  }),\r\n\r\n  watch: {\r\n    display() {\r\n      this.displayAutoComplete = this.display;\r\n    },\r\n\r\n    value(newValue) {\r\n      this.customerGroupData = newValue;\r\n    },\r\n\r\n    customerGroupData: {\r\n      deep: true,\r\n      handler() {\r\n        this.$emit(\"input\", this.customerGroupData);\r\n      },\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    ...moduleClientes.mapActions({\r\n      getCustomerById: \"getById\",\r\n      getCustomerByValue: \"getByValue\",\r\n    }),\r\n\r\n    ...moduleGrupoClientes.mapActions({\r\n      globalList: \"globalList\",\r\n      removeOldRelation: \"removeOldRelation\",\r\n    }),\r\n\r\n    async addToList(item) {\r\n      var response = await this.getCustomerById(item.value);\r\n      let result = response.data.result;\r\n      let myData = {\r\n        pendency: result.customerType.length == 0 ? 0 : 1,\r\n        code: result.code,\r\n        corporateName: result.corporateName,\r\n        cnpj: result.cnpj,\r\n        customerType: result.customerType,\r\n        plant: result.plant,\r\n        responsible: result.responsible,\r\n        email: result.email,\r\n        addressId: result.addressId,\r\n        phone: result.phone,\r\n        materialType: result.materialType,\r\n        status: result.status,\r\n        unlink: item.unlink,\r\n        id: result.id,\r\n      };\r\n      this.customerGroupData.customers.push(myData);\r\n      await this.globalList(myData);\r\n    },\r\n\r\n    async unlinkData(item) {\r\n      this.unlinkAlert = true;\r\n      this.unlinkId = item.id;\r\n    },\r\n\r\n    async unlinkItem() {\r\n      let response = await this.removeOldRelation(this.unlinkId);\r\n            \r\n      if (response.status == 200)\r\n        this.customerGroupData.customers = this.customerGroupData.customers.filter(x => x.id != this.unlinkId);\r\n\r\n      this.closeUnlinkAlert();\r\n    },\r\n\r\n    async linkItem() {\r\n      this.$refs.customerLinkModal.showLinkDialog({});\r\n    },\r\n\r\n    closeUnlinkAlert() {\r\n      this.unlinkAlert = false;\r\n    },\r\n  },\r\n};\r\n</script>"]}]}