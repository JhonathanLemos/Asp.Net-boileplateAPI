{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\components\\NovaSenha.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\components\\NovaSenha.vue","mtime":1683552922083},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHZhbGlkYXRpb25SdWxlcyBmcm9tICIuLi9taXhpbnMvdmFsaWRhdGlvblJ1bGVzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB2YWx1ZTogbnVsbCwKICAgIG9iamVjdDogbnVsbCwKICB9LAoKICBtaXhpbnM6IFt2YWxpZGF0aW9uUnVsZXNdLAoKICBkYXRhOiAoKSA9PiAoewogICAgc2hvd1Bhc3M6IGZhbHNlLAogICAgc2hvd0NvbmZpcm1QYXNzOiBmYWxzZSwKICAgIG5ld1Bhc3N3b3JkOiBudWxsLAogICAgY29uZmlybVBhc3N3b3JkOiBudWxsLAogICAgYWxlcnRXYXJuaW5nOiBudWxsLAogICAgYWxlcnRXYXJuaW5nVGV4dDogbnVsbCwKICAgIGxvYWRpbmdCdG5TYXZlOiBudWxsLAogICAgbG9hZEJ0blNhdmU6IG51bGwsCiAgfSksCgogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoIk1vZHVsZVVzdWFyaW9zIiwgewogICAgICByZXNldFBhc3N3b3JkOiAicmVzZXRQYXNzd29yZCIsCiAgICB9KSwKCiAgICAuLi5tYXBBY3Rpb25zKCJNb2R1bGVTZXNzaW9uIiwgewogICAgICBsb2dpbjogImxvZ2luIiwKICAgICAgbG9nb3V0OiAibG9nb3V0IiwKICAgIH0pLAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpc3BsYXkgPSBmYWxzZTsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2VNb2RhbCcpOwogICAgfSwKCiAgICBhc3luYyB2YWxpZGF0ZUFuZFNhdmVQYXNzd29yZCgpIHsKICAgICAgaWYgKHRoaXMubmV3UGFzc3dvcmQgIT0gdGhpcy5jb25maXJtUGFzc3dvcmQpIHsKICAgICAgICB0aGlzLmFsZXJ0V2FybmluZyA9IHRydWU7CiAgICAgICAgdGhpcy5hbGVydFdhcm5pbmdUZXh0ID0gIlNlbmhhcyBuw6NvIGNvbWJpbmFtISI7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmFsZXJ0V2FybmluZyA9IGZhbHNlOwogICAgICAgIH0sIDUwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB0ZXN0ZSA9IHsKICAgICAgICAgIEN1cnJlbnRQYXNzd29yZDogdGhpcy5vYmplY3QucGFzc3dvcmQsCiAgICAgICAgICBOZXdQYXNzd29yZDogdGhpcy5uZXdQYXNzd29yZCwKICAgICAgICB9OwogICAgICAgIHZhciByZXNwb25zZUxvZ2luID0gYXdhaXQgdGhpcy5sb2dpbih0aGlzLm9iamVjdCk7CiAgICAgICAgaWYgKHJlc3BvbnNlTG9naW4uc3RhdHVzID09IDIwMCkgewogICAgICAgICAgdGhpcy5sb2FkaW5nQnRuU2F2ZSA9IHRydWU7CiAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlc2V0UGFzc3dvcmQodGVzdGUpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5ID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9nb3V0KCk7CiAgICAgICAgICAgIHRoaXMuYWxlcnRXYXJuaW5nID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5hbGVydFdhcm5pbmdUZXh0ID0gcmVzcG9uc2UucmVzcG9uc2UuZGF0YS5lcnJvci5tZXNzYWdlOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmFsZXJ0V2FybmluZyA9IGZhbHNlOwogICAgICAgICAgICB9LCA1MDAwKTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgicmVzZXRQYXJlbnQiLCBmYWxzZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuYWxlcnRXYXJuaW5nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuYWxlcnRXYXJuaW5nVGV4dCA9ICJFcnJvIGFvIGF1dGVudGljYXIhIjsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLmFsZXJ0V2FybmluZyA9IGZhbHNlOwogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCJyZXNldFBhcmVudCIsIGZhbHNlKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkaW5nQnRuU2F2ZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBkaXNwbGF5OiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKICAgICAgfSwKICAgICAgc2V0KHZhbCkgewogICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdmFsKTsKICAgICAgfSwKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCkgewogICAgICB0aGlzLm5ld1Bhc3N3b3JkID0gbnVsbDsKICAgICAgdGhpcy5jb25maXJtUGFzc3dvcmQgPSBudWxsOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["NovaSenha.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NovaSenha.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-dialog persistent v-model=\"display\" max-width=\"450px\">\n    <div class=\"white pa-8 d-flex flex-column\">\n      <div class=\"d-flex flex-row justify-space-between mb-3\">\n        <h2>Redefinir uma nova senha</h2>\n        <v-btn text small fab>\n          <v-icon @click=\"close()\">mdi-close</v-icon>\n        </v-btn>\n      </div>\n\n      <v-alert\n        dismissible\n        dense\n        type=\"warning\"\n        transition=\"scroll-y-transition\"\n        icon=\"mdi-alert-outline\"\n        v-show=\"alertWarning\"\n        >{{ alertWarningText }}</v-alert\n      >\n\n      <div class=\"mt-5\">\n        <v-form ref=\"form\">\n          <v-text-field\n            :append-icon=\"showPass ? 'mdi-eye' : 'mdi-eye-off'\"\n            :type=\"showPass ? 'text' : 'password'\"\n            @click:append=\"showPass = !showPass\"\n            label=\"Insira a nova senha\"\n            class=\"mb-5 pt-2 input-none-case\"\n            style=\"margin-top: -20px; font-size: 14px\"\n            v-model=\"newPassword\"\n            :rules=\"[rules.strongPassword]\"\n            hint=\"Deve conter no mínimo 6 caracteres, sendo ao menos um numérico\"\n            validate-on-blur\n            clearable\n          ></v-text-field>\n\n          <v-text-field\n            class=\"mt-5 input-none-case\"\n            label=\"Confirme a nova senha\"\n            :append-icon=\"showConfirmPass ? 'mdi-eye' : 'mdi-eye-off'\"\n            :type=\"showConfirmPass ? 'text' : 'password'\"\n            @click:append=\"showConfirmPass = !showConfirmPass\"\n            style=\"margin-top: -20px; font-size: 14px\"\n            v-model=\"confirmPassword\"\n            :rules=\"[rules.strongPassword]\"\n            validate-on-blur\n            clearable\n          ></v-text-field>\n        </v-form>\n      </div>\n\n      <div class=\"mt-2\" style=\"text-align: right\">\n        <v-btn\n          class=\"myApi-red white--text\"\n          :loading=\"loadingBtnSave\"\n          @click=\"validateAndSavePassword\"\n          >Salvar</v-btn\n        >\n      </div>\n    </div>\n  </v-dialog>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport validationRules from \"../mixins/validationRules\";\nexport default {\n  props: {\n    value: null,\n    object: null,\n  },\n\n  mixins: [validationRules],\n\n  data: () => ({\n    showPass: false,\n    showConfirmPass: false,\n    newPassword: null,\n    confirmPassword: null,\n    alertWarning: null,\n    alertWarningText: null,\n    loadingBtnSave: null,\n    loadBtnSave: null,\n  }),\n\n  methods: {\n    ...mapActions(\"ModuleUsuarios\", {\n      resetPassword: \"resetPassword\",\n    }),\n\n    ...mapActions(\"ModuleSession\", {\n      login: \"login\",\n      logout: \"logout\",\n    }),\n\n    close() {\n      this.display = false;\n      this.$emit('closeModal');\n    },\n\n    async validateAndSavePassword() {\n      if (this.newPassword != this.confirmPassword) {\n        this.alertWarning = true;\n        this.alertWarningText = \"Senhas não combinam!\";\n        setTimeout(() => {\n          this.alertWarning = false;\n        }, 5000);\n      } else {\n        var teste = {\n          CurrentPassword: this.object.password,\n          NewPassword: this.newPassword,\n        };\n        var responseLogin = await this.login(this.object);\n        if (responseLogin.status == 200) {\n          this.loadingBtnSave = true;\n          var response = await this.resetPassword(teste);\n          if (response.status == 200) {\n            this.display = false;\n            this.$emit('success');\n          } else {\n            await this.logout();\n            this.alertWarning = true;\n            this.alertWarningText = response.response.data.error.message;\n            setTimeout(() => {\n              this.alertWarning = false;\n            }, 5000);\n            this.$emit(\"resetParent\", false);\n          }\n        } else {\n          this.alertWarning = true;\n          this.alertWarningText = \"Erro ao autenticar!\";\n          setTimeout(() => {\n            this.alertWarning = false;\n          }, 5000);\n          this.$emit(\"resetParent\", false);\n        }\n        this.loadingBtnSave = false;\n      }\n    },\n  },\n\n  computed: {\n    display: {\n      get() {\n        return this.value;\n      },\n      set(val) {\n        this.$emit(\"input\", val);\n      },\n    },\n  },\n\n  watch: {\n    value() {\n      this.newPassword = null;\n      this.confirmPassword = null;\n    },\n  },\n};\n</script>\n"]}]}