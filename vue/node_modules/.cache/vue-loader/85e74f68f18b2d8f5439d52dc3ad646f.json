{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\authenticate\\ViewAuth.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\authenticate\\ViewAuth.vue","mtime":1683744462604},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IE5vdmFTZW5oYSBmcm9tICIuLi8uLi9jb21wb25lbnRzL05vdmFTZW5oYS52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJWaWV3TG9naW4iLAoKICBkYXRhOiAoKSA9PiAoewogICAgc2hvdzogZmFsc2UsCiAgICBydWxlczogewogICAgICByZXF1aXJlZDogKHZhbHVlKSA9PiAhIXZhbHVlIHx8ICJQcmVlbmNoYSBlc3RlIGNhbXBvISIsCiAgICB9LAogICAgb2JqZWN0OiBudWxsLAogICAgbG9hZGluZ0J0bjogZmFsc2UsCiAgICBvcGVuTW9kYWxOZXdQYXNzV29yZDogbnVsbCwKICAgIGlucHV0RGF0YTogewogICAgICByZW1lbWJlckNsaWVudDogdHJ1ZSwKICAgIH0sCiAgICBsb2FkaW5nQnRuU2F2ZTogZmFsc2UsCiAgICBhbGVydEVycm9yOiBmYWxzZSwKICAgIGFsZXJ0RXJyb3JUZXh0OiBudWxsLAogICAgYWxlcnRTdWNjZXNzOiBmYWxzZSwKICAgIGFsZXJ0U3VjY2Vzc1RleHQ6IG51bGwsCiAgfSksCgogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoIk1vZHVsZVNlc3Npb24iLCB7CiAgICAgIGdldEN1cnJlbnRMb2dpbkluZm9ybWF0aW9uczogImdldEN1cnJlbnRMb2dpbkluZm9ybWF0aW9uIiwKICAgICAgbG9naW46ICJsb2dpbiIsCiAgICAgIGZpcnN0TG9naW46ICJmaXJzdExvZ2luIiwKICAgIH0pLAoKICAgIGFzeW5jIHN1Y2Nlc3NDaGFuZ2VQYXNzd29yZCgpIHsKICAgICAgdGhpcy5hbGVydFN1Y2Nlc3MgPSB0cnVlOwogICAgICB0aGlzLmFsZXJ0U3VjY2Vzc1RleHQgPSAiU2VuaGEgYWx0ZXJhZGEgY29tIHN1Y2Vzc28iOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmFsZXJ0U3VjY2VzcyA9IGZhbHNlOwogICAgICAgIHJldHVybiBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgfSwgNTAwMCk7CiAgICAgIGF3YWl0IHRoaXMuc2V0U3RvcmFnZVVzZXJJbmZvKCk7CiAgICB9LAoKICAgIGFzeW5jIGZpcnN0TG9naW5NZXRob2QodikgewogICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZpcnN0TG9naW4odik7CiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gNTAwKSB7CiAgICAgICAgdGhpcy5sb2FkaW5nQnRuID0gZmFsc2U7CiAgICAgICAgdGhpcy5hbGVydEVycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmFsZXJ0RXJyb3JUZXh0ID0gcmVzcG9uc2UuZGF0YS5lcnJvci5tZXNzYWdlOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5hbGVydEVycm9yID0gZmFsc2U7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEucmVzdWx0KSB7CiAgICAgICAgdGhpcy5vcGVuTW9kYWxOZXdQYXNzV29yZCA9IHRydWU7CiAgICAgICAgdGhpcy5vYmplY3QgPSB7CiAgICAgICAgICB1c2VyTmFtZU9yRW1haWxBZGRyZXNzOiB0aGlzLmlucHV0RGF0YS51c2VyTmFtZU9yRW1haWxBZGRyZXNzLAogICAgICAgICAgcGFzc3dvcmQ6IHYucGFzc3dvcmQsCiAgICAgICAgICByZW1lbWJlckNsaWVudDogdHJ1ZSwKICAgICAgICB9OwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIHRyeUF1dGhlbnRpY2F0ZSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgdGhpcy5hbGVydEVycm9yID0gZmFsc2U7CiAgICAgICAgdGhpcy5sb2FkaW5nQnRuID0gdHJ1ZTsKCiAgICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IHRoaXMuZmlyc3RMb2dpbk1ldGhvZCh0aGlzLmlucHV0RGF0YSk7CiAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSByZXR1cm47CgogICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHRoaXMubG9naW4odGhpcy5pbnB1dERhdGEpOwoKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgYXdhaXQgdGhpcy5zZXRTdG9yYWdlVXNlckluZm8oKTsKICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgc2V0U3RvcmFnZVVzZXJJbmZvKCkgewogICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRMb2dpbkluZm9ybWF0aW9ucygpOwogICAgICBsZXQgdXNlckluZm8gPSByZXNwb25zZS5kYXRhLnJlc3VsdC51c2VyOwogICAgICBsZXQgdXNlckluaXRpYWxzID0gKAogICAgICAgIHVzZXJJbmZvLm5hbWUuY2hhckF0KDApICsgdXNlckluZm8uc3VybmFtZS5jaGFyQXQoMCkKICAgICAgKS50b1VwcGVyQ2FzZSgpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlckVtYWlsIiwgdXNlckluZm8uZW1haWxBZGRyZXNzKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXJOYW1lIiwgdXNlckluZm8ubmFtZSk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyU3VybmFtZSIsIHVzZXJJbmZvLnN1cm5hbWUpOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlckluaXRpYWxzIiwgdXNlckluaXRpYWxzKTsKICAgIH0sCgogICAgcmVzZXRQYXJlbnQodikgewogICAgICB0aGlzLmxvYWRpbmdCdG4gPSB2OwogICAgICB0aGlzLmlucHV0RGF0YSA9IFtdOwogICAgfSwKICB9LAoKICBjb21wb25lbnRzOiB7CiAgICBOb3ZhU2VuaGEsCiAgfSwKfTsK"},{"version":3,"sources":["ViewAuth.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ViewAuth.vue","sourceRoot":"src/views/authenticate","sourcesContent":["<template>\n  <v-app>\n    <div class=\"d-flex justify-center mb-6 mt-12 bg-login\">\n      <NovaSenha @resetParent=\"resetParent\" @closeModal=\"loadingBtnSave = false\" @success=\"successChangePassword\"\n        :object=\"object\" v-model=\"openModalNewPassWord\"></NovaSenha>\n\n      <div class=\"containerForm mt-12\">\n        <div class=\"d-flex justify-center mb-6 bg-surface-variant\">\n\n          <img src=\"../../assets/img/hr.png\" alt=\"\" width=\"100px\" height=\"90px\" class=\"ma-2 pa-2\" id=\"img-logo\" />\n        </div>\n\n        <v-form class=\"form-login text-center mt-1\" ref=\"form\">\n          <v-alert dismissible type=\"error\" v-show=\"alertError\" transition=\"scroll-y-transition\" class=\"mt-6 mb-8\"\n            style=\"text-align: left\">{{ alertErrorText }}</v-alert>\n\n          <v-alert dismissible type=\"success\" v-show=\"alertSuccess\" transition=\"scroll-y-transition\" class=\"mt-6 mb-8\"\n            style=\"text-align: left\">{{ alertSuccessText }}</v-alert>\n\n          <v-text-field rounded label=\"Login\" v-model=\"inputData.userNameOrEmailAddress\" outlined\n            :rules=\"[rules.required]\" validate-on-blur></v-text-field>\n\n          <v-text-field rounded label=\"Senha\" v-model=\"inputData.password\" :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\n            :rules=\"[rules.required]\" :type=\"show ? 'text' : 'password'\" v-on:keyup.enter=\"tryAuthenticate()\"\n            @click:append=\"show = !show\" outlined validate-on-blur color=\"myApi-neutral\"></v-text-field>\n\n          <v-btn rounded large class=\"myApi-purple white--text\" @click=\"tryAuthenticate()\"\n            :loading=\"loadingBtn\">ACESSAR</v-btn>\n        </v-form>\n      </div>\n\n    </div>\n  </v-app>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport NovaSenha from \"../../components/NovaSenha.vue\";\n\nexport default {\n  name: \"ViewLogin\",\n\n  data: () => ({\n    show: false,\n    rules: {\n      required: (value) => !!value || \"Preencha este campo!\",\n    },\n    object: null,\n    loadingBtn: false,\n    openModalNewPassWord: null,\n    inputData: {\n      rememberClient: true,\n    },\n    loadingBtnSave: false,\n    alertError: false,\n    alertErrorText: null,\n    alertSuccess: false,\n    alertSuccessText: null,\n  }),\n\n  methods: {\n    ...mapActions(\"ModuleSession\", {\n      getCurrentLoginInformations: \"getCurrentLoginInformation\",\n      login: \"login\",\n      firstLogin: \"firstLogin\",\n    }),\n\n    async successChangePassword() {\n      this.alertSuccess = true;\n      this.alertSuccessText = \"Senha alterada com sucesso\";\n      setTimeout(() => {\n        this.alertSuccess = false;\n        return location.reload();\n      }, 5000);\n      await this.setStorageUserInfo();\n    },\n\n    async firstLoginMethod(v) {\n      var response = await this.firstLogin(v);\n      if (response.status == 500) {\n        this.loadingBtn = false;\n        this.alertError = true;\n        this.alertErrorText = response.data.error.message;\n        setTimeout(() => {\n          this.alertError = false;\n        }, 5000);\n        return false;\n      } else if (response.data.result) {\n        this.openModalNewPassWord = true;\n        this.object = {\n          userNameOrEmailAddress: this.inputData.userNameOrEmailAddress,\n          password: v.password,\n          rememberClient: true,\n        };\n        return true;\n      } else {\n        return null;\n      }\n    },\n\n    async tryAuthenticate() {\n      if (this.$refs.form.validate()) {\n        this.alertError = false;\n        this.loadingBtn = true;\n\n        var result = await this.firstLoginMethod(this.inputData);\n        if (result != null) return;\n\n        var response = await this.login(this.inputData);\n\n        if (response.status == 200) {\n          await this.setStorageUserInfo();\n          return location.reload();\n        }\n      }\n    },\n\n    async setStorageUserInfo() {\n      let response = await this.getCurrentLoginInformations();\n      let userInfo = response.data.result.user;\n      let userInitials = (\n        userInfo.name.charAt(0) + userInfo.surname.charAt(0)\n      ).toUpperCase();\n      localStorage.setItem(\"userEmail\", userInfo.emailAddress);\n      localStorage.setItem(\"userName\", userInfo.name);\n      localStorage.setItem(\"userSurname\", userInfo.surname);\n      localStorage.setItem(\"userInitials\", userInitials);\n    },\n\n    resetParent(v) {\n      this.loadingBtn = v;\n      this.inputData = [];\n    },\n  },\n\n  components: {\n    NovaSenha,\n  },\n};\n</script>\n\n<style>\n.wrap-login {\n  height: 100%;\n}\n\n.container-login {\n  width: 40%;\n}\n\n.form-login {\n  width: 100%;\n}\n\n.containerForm {\n  width: 30%;\n  padding: 20px;\n  border-radius: 4px;\n  padding: 20px;\n}\n</style>\n"]}]}