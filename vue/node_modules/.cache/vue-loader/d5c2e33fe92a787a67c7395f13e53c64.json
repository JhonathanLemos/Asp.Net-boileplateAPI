{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\ViewUsuariosCreate.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\usuarios\\ViewUsuariosCreate.vue","mtime":1684178263938},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUb3BTZWN0aW9uIGZyb20gIkAvY29tcG9uZW50cy9Ub3BTZWN0aW9uLnZ1ZSI7CmltcG9ydCBnZXRSb3V0ZXJEYXRhIGZyb20gIkAvbWl4aW5zL2dldFJvdXRlckRhdGEuanMiOwppbXBvcnQgY3J1ZENvbnRyb2xsZXIgZnJvbSAiQC9taXhpbnMvY3J1ZENvbnRyb2xsZXIuanMiOwppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCBpbmZvcm1hY29lc0dlcmFpcyBmcm9tICJAL3ZpZXdzL3VzdWFyaW9zL2luZm9ybWFjb2VzR2VyYWlzL2luZm9ybWFjb2VzR2VyYWlzLnZ1ZSI7CmltcG9ydCBwZXJmaWxVc3VhcmlvIGZyb20gIi4vcGVybWlzc29lcy9wZXJmaWxVc3VhcmlvLnZ1ZSI7CmltcG9ydCBBbGVydENvbXBvbmVudCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0FsZXJ0Q29tcG9uZW50LnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIHRhYnM6IG51bGwsCiAgICBkaWFsb2dDb25maXJtU2FsdmFyOiBmYWxzZSwKICAgIGRpYWxvZ0NvbmZpck11ZGFyU2VuaGE6IGZhbHNlLAogICAgcGVyZmlsOiBbXSwKICAgIGRhdGFOZXdJdGVtOiB7CiAgICAgIGlkOiAwLAogICAgICB1c2VyUHJvZmlsZTogbnVsbCwKICAgICAgcm9sZVByb2ZpbGU6IG51bGwsCiAgICAgIGlzQ3VzdG9taXplZDogZmFsc2UsCiAgICAgIGlzQWN0aXZlOiBudWxsLAogICAgfSwKICAgIHRyaXA6IHsKICAgICAgbmFtZTogIiIsCiAgICAgIGxvY2F0aW9uOiBudWxsLAogICAgICBzdGFydDogbnVsbCwKICAgICAgZW5kOiBudWxsLAogICAgfSwKICAgIGxvYWRpbmdQZXJtaXNzaW9uczogZmFsc2UsCiAgICBvcGVuRXhwYW5zaW9uUGFuZWw6IG51bGwsCiAgICBoaWRlTGlzdDogbnVsbCwKICB9KSwKCiAgY29tcHV0ZWQ6IHsKICAgIGVkaXRQZXJtaXNzaW9uKCkgewogICAgICByZXR1cm4gdGhpcy5oYXNQZXJtaXNzaW9uKHRoaXMuJFBlcm1pc3Npb25OYW1lcy5wZXJtaXNzaW9uVXNlckVkaXQpOwogICAgfSwKICB9LAoKICBtaXhpbnM6IFsKICAgIGdldFJvdXRlckRhdGEsCiAgICBjcnVkQ29udHJvbGxlcih7IHN0b3JlOiAiTW9kdWxlVXN1YXJpb3MiIH0pLAogIF0sCgogIGNvbXBvbmVudHM6IHsKICAgIFRvcFNlY3Rpb24sCiAgICBpbmZvcm1hY29lc0dlcmFpcywKICAgIHBlcmZpbFVzdWFyaW8sCiAgICBBbGVydENvbXBvbmVudAp9LAoKICB3YXRjaDogewogICAgYWN0aXZlKCkgewogICAgICBpZiAodGhpcy5zdWNjZXNzKSB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IGAvaG9tZS91c3Vhcmlvc2AgfSk7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoIk1vZHVsZVVzdWFyaW9zIiwgewogICAgICBzZXREZWZhdWx0UGFzc3dvcmQ6ICJzZXREZWZhdWx0UGFzc3dvcmQiLAogICAgICBjaGVja1VzZXJFbWFpbDogImNoZWNrVXNlckVtYWlsIiwKICAgIH0pLAogICAgYXN5bmMgY2hlY2tBbmRTYXZlKCkgewogICAgICBpZiAoIXRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIGlmICghdGhpcy4kcmVmcy5pbmZvcm1hY29lc0dlcmFpcy52YWxpZGF0ZUZvcm0pIHJldHVybjsKICAgICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNoZWNrVXNlckVtYWlsKHRoaXMuZGF0YU5ld0l0ZW0uZW1haWxBZGRyZXNzKTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9IDIwMCkgewogICAgICAgICAgdGhpcy5lcnJvckFsZXJ0ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZXJyb3JBbGVydFRleHQgPSByZXNwb25zZS5lcnJvci5tZXNzYWdlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JBbGVydCA9IGZhbHNlOwogICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghdGhpcy5kYXRhTmV3SXRlbS5pZCAmJiB0aGlzLnZhbGlkYXRlRm9ybXMoKSkKICAgICAgICB0aGlzLmRpYWxvZ0NvbmZpcm1TYWx2YXIgPSB0cnVlOwogICAgICBlbHNlIHRoaXMuc3VibWl0KCk7CiAgICB9LAoKICAgIHZhbGlkYXRlRm9ybXMoKSB7CiAgICAgIGlmICghdGhpcy4kcmVmcy5pbmZvcm1hY29lc0dlcmFpcy52YWxpZGF0ZUZvcm0pIHsKICAgICAgICBpZiAodGhpcy50YWJzICE9ICJ0YWItMSIpCiAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlVmFsaWRhdGVGb3JtKCJJbmZvcm1hw6fDtWVzIEdlcmFpcyIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSBlbHNlIGlmICghdGhpcy4kcmVmcy5wZXJtaXNzaW9ucy52YWxpZGF0ZUZvcm0pIHsKICAgICAgICBpZiAodGhpcy50YWJzICE9ICJ0YWItMiIpIHRoaXMuc2hvd01lc3NhZ2VWYWxpZGF0ZUZvcm0oIlBlcm1pc3PDtWVzIik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZQogICAgfSwKCiAgICBzaG93TWVzc2FnZVZhbGlkYXRlRm9ybShhYmFOb21lKSB7CiAgICAgIHRoaXMuZXJyb3JBbGVydCA9IHRydWU7CiAgICAgIHRoaXMuZXJyb3JBbGVydFRleHQgPSBgQSBhYmEgJHthYmFOb21lfSBjb250w6ltIGNhbXBvcyBuw6NvIHByZWVuY2hpZG9zLmA7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuZXJyb3JBbGVydCA9IGZhbHNlOwogICAgICB9LCA1MDAwKTsKICAgIH0sCgogICAgYXN5bmMgc3VibWl0KCkgewogICAgICBpZiAodGhpcy52YWxpZGF0ZUZvcm1zKCkpIHsKICAgICAgICB2YXIgW25hbWUsIHN1cm5hbWVdID0gdGhpcy5kYXRhTmV3SXRlbS5uYW1lLnNwbGl0KC8oPzw9XlxTKylccy8pOwogICAgICAgIHRoaXMuZGF0YU5ld0l0ZW0ubmFtZSA9IG5hbWU7CgogICAgICAgIGlmICghc3VybmFtZSkgdGhpcy5kYXRhTmV3SXRlbS5zdXJuYW1lID0gbmFtZTsKICAgICAgICBlbHNlIHRoaXMuZGF0YU5ld0l0ZW0uc3VybmFtZSA9IG5hbWU7CgogICAgICAgIGlmKCFBcnJheS5pc0FycmF5KHRoaXMuZGF0YU5ld0l0ZW0ucm9sZU5hbWVzKSkKICAgICAgICB7CiAgICAgICAgICB0aGlzLmRhdGFOZXdJdGVtLnJvbGVOYW1lcyA9IFt0aGlzLmRhdGFOZXdJdGVtLnJvbGVOYW1lc10KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgIHRoaXMudXBkYXRlSXRlbSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmFkZE5ld0l0ZW0oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgc3Vic3RpdHVpclNlbmhhKCkgewogICAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHRoaXMuc2V0RGVmYXVsdFBhc3N3b3JkKGlkKTsKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB0aGlzLmRpYWxvZ0NvbmZpck11ZGFyU2VuaGEgPSBmYWxzZTsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7CiAgICAgICAgdGhpcy5tZXNzYWdlID0gIlNlbmhhIGFsdGVyYWRhIGNvbSBzdWNlc3NvISI7CiAgICAgICAgdGhpcy50eXBlPSAic3VjY2VzcyIKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7CiAgICAgICAgfSwgNTAwMCk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgdGhpcy5kYXRhTmV3SXRlbS5pc0FjdGl2ZSA9IHRydWU7CiAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICBpZiAoaWQpIHsKICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2V0SXRlbUJ5SWQoaWQpCiAgICAgICAgdGhpcy5kYXRhTmV3SXRlbSA9IHJlc3VsdAoKICB9Cn0KfTsK"},{"version":3,"sources":["ViewUsuariosCreate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ViewUsuariosCreate.vue","sourceRoot":"src/views/usuarios","sourcesContent":["<template>\n  <div\n    class=\"d-flex flex-column justify-space-between mx-10\"\n    style=\"width: 100%; height: 100%; overflow: auto\"\n  >\n    <!-- DIALOG CONFIRM SALVAR -->\n    <v-dialog v-model=\"dialogConfirmSalvar\" persistent max-width=\"450px\">\n      <div class=\"white pa-8 d-flex flex-column align-center text-center\">\n        <v-icon style=\"font-size: 60px; border-radius: 15px\" color=\"purple\"\n          >mdi-alert</v-icon\n        >\n\n        <div class=\"d-flex align-start\">\n          <h4 class=\"myApi-neutral--text text--var-1 pb-5 pt-5 mb-4\">\n            Após salvar não será possível alterar <br />\n            o endereço de e-mail do cadastro. <br />\n            Deseja continuar?\n          </h4>\n        </div>\n\n        <div class=\"d-flex flex-row justify-end\">\n          <v-btn\n            rounded\n            large\n            text\n            class=\"mr-8\"\n            @click=\"dialogConfirmSalvar = false\"\n            >CANCELAR</v-btn\n          >\n\n          <v-btn\n            rounded\n            large\n            class=\"white--text\"\n            style=\"background: purple\"\n            @click=\"submit\"\n            :loading=\"loadingBtnDelete\"\n            >SALVAR</v-btn\n          >\n        </div>\n      </div>\n    </v-dialog>\n    <!-- FIM -->\n\n    <!-- DIALOG CONFIRM MUDAR SENHA -->\n    <v-dialog v-model=\"dialogConfirMudarSenha\" persistent max-width=\"450px\">\n      <div class=\"white pa-8 d-flex flex-column align-center text-center\">\n        <v-icon style=\"font-size: 60px; border-radius: 15px\" color=\"purple\"\n          >mdi-alert</v-icon\n        >\n\n        <div class=\"d-flex align-start\">\n          <h4 class=\"myApi-neutral--text text--var-1 pb-5 pt-5 mb-4\">\n            A senha do usuário será substituída <br />\n            pela senha padrão do sistema. <br />\n            Deseja continuar?\n          </h4>\n        </div>\n\n        <div class=\"d-flex flex-row justify-end\">\n          <v-btn\n            rounded\n            large\n            text\n            class=\"mr-8\"\n            @click=\"dialogConfirMudarSenha = false\"\n            >CANCELAR</v-btn\n          >\n\n          <v-btn\n            rounded\n            large\n            class=\"white--text\"\n            style=\"background: purple\"\n            @click=\"substituirSenha\"\n            :loading=\"loadingBtnDelete\"\n            >SUBSTITUIR SENHA</v-btn\n          >\n        </div>\n      </div>\n    </v-dialog>\n    <!-- FIM -->\n\n    <top-section></top-section>\n\n    <div class=\"d-flex justify-space-between align-end mb-2\">\n      <h2 class=\"myApi-neutral--text text--var-1\">{{ $route.meta.title }}</h2>\n\n      <div v-if=\"editPermission\" class=\"d-flex flex-row justify-end align-end\">\n        <v-btn\n          dense\n          rounded\n          class=\"mr-3\"\n          text\n          @click=\"$router.back()\"\n        >\n          CANCELAR\n        </v-btn>\n\n        <v-btn\n          rounded\n          dense\n          class=\"myApi-purple white--text\"\n          @click=\"checkAndSave()\"\n          :loading=\"loadingBtnSave\"\n          >SALVAR</v-btn\n        >\n      </div>\n    </div>\n\n    <alert-component :type=\"type\" :message=\"message\" :active=\"active\"></alert-component>\n\n    <div class=\"white rounded-lg flex-grow-1\">\n      <div class=\"d-flex flex-column\" style=\"width: 100%\">\n        <v-tabs dark background-color=\"myApi-purple\" v-model=\"tabs\">\n          <v-tab href=\"#tab-1\">Informações Gerais</v-tab>\n          <v-tab href=\"#tab-2\">Permissões</v-tab>\n        </v-tabs>\n\n        <v-tabs-items touchless class=\"pa-4\" v-model=\"tabs\">\n          <v-tab-item value=\"tab-1\">\n            <informacoes-gerais\n              ref=\"informacoesGerais\"\n              :user=\"dataNewItem\"\n              :readonly=\"!editPermission\"\n              @mudarSenha=\"dialogConfirMudarSenha = true\"\n            />\n          </v-tab-item>\n\n            <v-tab-item value=\"tab-2\" :eager=\"true\">\n            <perfil-usuario\n              ref=\"permissions\"\n              v-model=\"dataNewItem.roleNames\"\n              :readonly=\"!editPermission\"\n              @mudarSenha=\"dialogConfirMudarSenha = true\"\n            />\n          </v-tab-item>\n        </v-tabs-items>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport TopSection from \"@/components/TopSection.vue\";\nimport getRouterData from \"@/mixins/getRouterData.js\";\nimport crudController from \"@/mixins/crudController.js\";\nimport { mapActions } from \"vuex\";\nimport informacoesGerais from \"@/views/usuarios/informacoesGerais/informacoesGerais.vue\";\nimport perfilUsuario from \"./permissoes/perfilUsuario.vue\";\nimport AlertComponent from \"../../components/AlertComponent.vue\";\n\nexport default {\n  data: () => ({\n    tabs: null,\n    dialogConfirmSalvar: false,\n    dialogConfirMudarSenha: false,\n    perfil: [],\n    dataNewItem: {\n      id: 0,\n      userProfile: null,\n      roleProfile: null,\n      isCustomized: false,\n      isActive: null,\n    },\n    trip: {\n      name: \"\",\n      location: null,\n      start: null,\n      end: null,\n    },\n    loadingPermissions: false,\n    openExpansionPanel: null,\n    hideList: null,\n  }),\n\n  computed: {\n    editPermission() {\n      return this.hasPermission(this.$PermissionNames.permissionUserEdit);\n    },\n  },\n\n  mixins: [\n    getRouterData,\n    crudController({ store: \"ModuleUsuarios\" }),\n  ],\n\n  components: {\n    TopSection,\n    informacoesGerais,\n    perfilUsuario,\n    AlertComponent\n},\n\n  watch: {\n    active() {\n      if (this.success) this.$router.push({ path: `/home/usuarios` });\n    },\n  },\n\n  methods: {\n    ...mapActions(\"ModuleUsuarios\", {\n      setDefaultPassword: \"setDefaultPassword\",\n      checkUserEmail: \"checkUserEmail\",\n    }),\n    async checkAndSave() {\n      if (!this.$route.params.id) {\n        if (!this.$refs.informacoesGerais.validateForm) return;\n        var response = await this.checkUserEmail(this.dataNewItem.emailAddress);\n        if (response.status != 200) {\n          this.errorAlert = true;\n          this.errorAlertText = response.error.message;\n          setTimeout(() => {\n            this.errorAlert = false;\n          }, 5000);\n          return;\n        }\n      }\n      if (!this.dataNewItem.id && this.validateForms())\n        this.dialogConfirmSalvar = true;\n      else this.submit();\n    },\n\n    validateForms() {\n      if (!this.$refs.informacoesGerais.validateForm) {\n        if (this.tabs != \"tab-1\")\n          this.showMessageValidateForm(\"Informações Gerais\");\n        return false;\n      } else if (!this.$refs.permissions.validateForm) {\n        if (this.tabs != \"tab-2\") this.showMessageValidateForm(\"Permissões\");\n        return false;\n      }\n\n      return true\n    },\n\n    showMessageValidateForm(abaNome) {\n      this.errorAlert = true;\n      this.errorAlertText = `A aba ${abaNome} contém campos não preenchidos.`;\n      setTimeout(() => {\n        this.errorAlert = false;\n      }, 5000);\n    },\n\n    async submit() {\n      if (this.validateForms()) {\n        var [name, surname] = this.dataNewItem.name.split(/(?<=^\\S+)\\s/);\n        this.dataNewItem.name = name;\n\n        if (!surname) this.dataNewItem.surname = name;\n        else this.dataNewItem.surname = name;\n\n        if(!Array.isArray(this.dataNewItem.roleNames))\n        {\n          this.dataNewItem.roleNames = [this.dataNewItem.roleNames]\n        }\n\n        if (this.$route.params.id) {\n          this.updateItem();\n        } else {\n          this.addNewItem();\n        }\n      }\n    },\n\n    async substituirSenha() {\n      var id = this.$route.params.id;\n      var response = await this.setDefaultPassword(id);\n      if (response.status == 200) {\n        this.dialogConfirMudarSenha = false;\n        this.active = true;\n        this.message = \"Senha alterada com sucesso!\";\n        this.type= \"success\"\n        setTimeout(() => {\n          this.active = false;\n        }, 5000);\n      }\n    },\n  },\n  async mounted() {\n    this.dataNewItem.isActive = true;\n    var id = this.$route.params.id;\n    if (id) {\n      var result = await this.getItemById(id)\n        this.dataNewItem = result\n\n  }\n}\n};\n</script>\n\n"]}]}