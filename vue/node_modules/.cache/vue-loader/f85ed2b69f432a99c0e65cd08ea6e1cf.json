{"remainingRequest":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\viagensNavios\\ViewViagensNaviosCreate.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\src\\views\\viagensNavios\\ViewViagensNaviosCreate.vue","mtime":1680609356674},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1683229778387},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1683229781560},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1683229779724},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1683229777571},{"path":"C:\\Users\\lemos\\OneDrive\\Documentos\\My Web Sites\\7.3.0\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1683229780390}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5jb250YWluZXJUZXh0byB7DQogIGp1c3RpZnktY29udGVudDogbGVmdDsNCiAgaGVpZ2h0OiAyMCUgIWltcG9ydGFudDsNCiAgd2lkdGg6IDUwJSAhaW1wb3J0YW50Ow0KfQ0K"},{"version":3,"sources":["ViewViagensNaviosCreate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4eA;AACA;AACA;AACA;AACA","file":"ViewViagensNaviosCreate.vue","sourceRoot":"src/views/viagensNavios","sourcesContent":["<template style=\"overflow: auto\">\r\n  <div class=\"justify-space-between mx-10\" style=\"width: 100%; overflow: auto\">\r\n    <top-section></top-section>\r\n    <v-alert\r\n      type=\"error\"\r\n      dense\r\n      class=\"mt-1\"\r\n      outlined\r\n      v-show=\"errorAlert\"\r\n      transition=\"fade-transition\"\r\n      >{{ errorAlertText }}</v-alert\r\n    >\r\n    <v-dialog v-model=\"openModalAlert\" persistent max-width=\"450px\">\r\n      <div\r\n        class=\"white pa-8 d-flex flex-column align-center text-center\"\r\n        style=\"overflow: auto\"\r\n      >\r\n        <v-icon style=\"font-size: 60px\" color=\"warning\">mdi-alert</v-icon>\r\n\r\n        <h4 class=\"asia-neutral--text text--var-1 pb-5 pt-5\">\r\n          Existe uma viagem aberta para este navio.<br />Deseja prosseguir?\r\n        </h4>\r\n\r\n        <div class=\"d-flex flex-row justify-end\">\r\n          <v-btn\r\n            rounded\r\n            large\r\n            text\r\n            class=\"mr-4\"\r\n            @click=\"$router.push({ path: `/home/viagensNavios` })\"\r\n            >Não</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"warning white--text\"\r\n            @click=\"openModalAlert = false\"\r\n            >Sim</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-dialog>\r\n\r\n    <v-form ref=\"form\" style=\"width: 100%\">\r\n      <v-card class=\"d-flex py-2\" style=\"width: 80%; height: 80px\">\r\n        <v-select\r\n          v-if=\"hasPermission($PermissionNames.permissionShipSee)\"\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          v-model=\"dataNewItem.shipId\"\r\n          :rules=\"[rules.required]\"\r\n          @change=\"changeShipId\"\r\n          class=\"ml-4\"\r\n          validate-on-blur\r\n          label=\"Navio\"\r\n          :items=\"itemsShips\"\r\n          :loading=\"loadingShips\"\r\n          :menu-props=\"{ bottom: true, offsetY: true }\"\r\n        ></v-select>\r\n        <v-text-field\r\n          v-else\r\n          disabled\r\n          class=\"ml-4\"\r\n          style=\"width: 16%\"\r\n          label=\"Navio\"\r\n          v-model=\"dataNewItem.shipName\"\r\n        >\r\n        </v-text-field>\r\n        <div v-if=\"editPermission\">\r\n          <v-switch\r\n            v-model=\"dataNewItem.status\"\r\n            :label=\"dataNewItem.status ? 'Aberta' : 'Fechada'\"\r\n            :true-value=\"true\"\r\n            :false-value=\"false\"\r\n            dense\r\n            class=\"ml-5 pt-3 mr-4\"\r\n          ></v-switch>\r\n        </div>\r\n        <div v-else>\r\n          <v-chip\r\n            class=\"mt-5 ml-4 mr-4\"\r\n            outlined\r\n            :color=\"dataNewItem.status ? 'green' : 'red'\"\r\n          >\r\n            {{ dataNewItem.status == true ? \"Aberta\" : \"Fechada\" }}\r\n          </v-chip>\r\n        </div>\r\n\r\n        <div\r\n          v-if=\"editPermission\"\r\n          class=\"d-flex flex-row justify-end pt-4 mr-3\"\r\n        >\r\n          <v-btn\r\n            rounded\r\n            large\r\n            class=\"mr-3 mt-1\"\r\n            text\r\n            @click=\"$router.push({ path: `/home/viagensNavios` })\"\r\n            >CANCELAR</v-btn\r\n          >\r\n          <v-btn\r\n            rounded\r\n            large\r\n            :loading=\"loadingBtnSave\"\r\n            class=\"asia-red white--text mt-1\"\r\n            @click=\"submit\"\r\n            >SALVAR</v-btn\r\n          >\r\n        </div>\r\n      </v-card>\r\n      <v-card class=\"d-flex mt-2 py-2\" style=\"width: 80%; height: 100px\">\r\n        <v-select\r\n          v-if=\"hasPermission($PermissionNames.permissionPortSee)\"\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          class=\"ml-4\"\r\n          v-model=\"dataNewItem.destinationPortId\"\r\n          style=\"width: 16%\"\r\n          label=\"Porto de Destino\"\r\n          :rules=\"[rules.required]\"\r\n          validate-on-blur\r\n          :items=\"itemsPorts\"\r\n          :loading=\"loadingPorts\"\r\n          :menu-props=\"{ bottom: true, offsetY: true }\"\r\n        ></v-select>\r\n        <v-text-field\r\n          v-else\r\n          disabled\r\n          class=\"ml-4\"\r\n          style=\"width: 16%\"\r\n          label=\"Porto de Destino\"\r\n          v-model=\"dataNewItem.destinationPortName\"\r\n        >\r\n        </v-text-field>\r\n        <v-select\r\n          v-if=\"hasPermission($PermissionNames.permissionNamedPortAgentSee)\"\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          v-model=\"dataNewItem.portAgentId\"\r\n          class=\"ml-4\"\r\n          style=\"width: 16%\"\r\n          label=\"Agente portuário\"\r\n          :items=\"itemsAgents\"\r\n          :loading=\"loadingPortAgents\"\r\n          :menu-props=\"{ bottom: true, offsetY: true }\"\r\n        ></v-select>\r\n        <v-text-field\r\n          v-else\r\n          disabled\r\n          class=\"ml-4\"\r\n          style=\"width: 16%\"\r\n          label=\"Agente portuário\"\r\n          v-model=\"dataNewItem.portAgentName\"\r\n        >\r\n        </v-text-field>\r\n        <DatePicker\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          class=\"ml-4\"\r\n          style=\"width: 16%\"\r\n          v-model=\"dataNewItem.eta\"\r\n          label=\"ETA\"\r\n          :required=\"true\"\r\n        ></DatePicker>\r\n        <v-select\r\n          v-if=\"hasPermission($PermissionNames.permissionCategorySituationSee)\"\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          class=\"ml-4\"\r\n          :items=\"tipoSituacaoEta\"\r\n          label=\"Situação ETA\"\r\n          validate-on-blur\r\n          v-model=\"dataNewItem.categoryStatusEtaId\"\r\n          style=\"width: 16%\"\r\n          :rules=\"[rules.required]\"\r\n        ></v-select>\r\n        <v-text-field\r\n          v-else\r\n          disabled\r\n          class=\"ml-4\"\r\n          label=\"Situação ETA\"\r\n          style=\"width: 16%\"\r\n          v-model=\"dataNewItem.categoryStatusEtaName\"\r\n        >\r\n        </v-text-field>\r\n        <DatePicker\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          class=\"ml-4\"\r\n          v-model=\"dataNewItem.etd\"\r\n          style=\"width: 16%\"\r\n          label=\"ETB\"\r\n          :required=\"true\"\r\n        ></DatePicker>\r\n        <v-select\r\n          v-if=\"hasPermission($PermissionNames.permissionCategorySituationSee)\"\r\n          :disabled=\"!editPermission || disabledIfStatusIsFalse\"\r\n          v-model=\"dataNewItem.categoryStatusEtbId\"\r\n          :items=\"tipoSituacaoEtb\"\r\n          label=\"Situação ETB\"\r\n          style=\"width: 16%\"\r\n          validate-on-blur\r\n          class=\"ml-4 mr-4\"\r\n          :rules=\"[rules.required]\"\r\n        ></v-select>\r\n        <v-text-field\r\n          v-else\r\n          disabled\r\n          class=\"ml-4 mr-4\"\r\n          label=\"Situação ETB\"\r\n          style=\"width: 16%\"\r\n          v-model=\"dataNewItem.categoryStatusEtbName\"\r\n        >\r\n        </v-text-field>\r\n      </v-card>\r\n      <ParadasCreateVue\r\n        v-model=\"dataNewItem.intermediateStops\"\r\n        :disabled=\"disabledIfStatusIsFalse\"\r\n        :readonly=\"!editPermission\"\r\n      >\r\n        ></ParadasCreateVue\r\n      >\r\n    </v-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TopSection from \"@/components/TopSection.vue\";\r\nimport { createNamespacedHelpers } from \"vuex\";\r\nimport crudController from \"@/mixins/crudController.js\";\r\nimport validationRules from \"@/mixins/validationRules.js\";\r\nimport ParadasCreateVue from \"@/components/ParadasCreate\";\r\nimport DatePicker from \"@/components/DatePicker\";\r\nimport tiposCategorias from \"@/lib/enumTiposCategorias.js\";\r\nconst moduleCategory = createNamespacedHelpers(\"ModuleCategoriaSituacao\");\r\n\r\nconst moduleShips = createNamespacedHelpers(\"ModuleNavios\");\r\nconst modulePorts = createNamespacedHelpers(\"ModulePortos\");\r\nconst moduleAgents = createNamespacedHelpers(\"ModuleAgentesPortuarios\");\r\nconst moduleShipTrips = createNamespacedHelpers(\"ModuleViagensNavios\");\r\n\r\nexport default {\r\n  data: () => ({\r\n    headers: [\r\n      { text: \"Proforma\", value: \"col1\" },\r\n      { text: \"Planta\", value: \"col2\" },\r\n      { text: \"Razão Social\", value: \"col3\" },\r\n    ],\r\n    dataNewItem: {\r\n      ship: null,\r\n      status: null,\r\n      destinationPortId: 0,\r\n      etaDate: null,\r\n      etdDate: null,\r\n      stopEtdDate: null,\r\n      stopEtaDate: null,\r\n      stopPorto: null,\r\n      stopPortoAgent: null,\r\n      eta: null,\r\n      etd: null,\r\n      categoryStatusEtaId: null,\r\n      categoryStatusEtbId: null,\r\n      etaStatus: null,\r\n      etbStatus: null,\r\n      intermediateStops: [],\r\n    },\r\n    mounted: null,\r\n    loadingBtnSave: null,\r\n    paradasIntermediarias: [],\r\n    openModalAlert: false,\r\n    disabledIfStatusIsFalse: false,\r\n    indexParadas: 1,\r\n    rows: [],\r\n    menu1: false,\r\n    menu2: false,\r\n    itemsShips: [],\r\n    itemsPorts: [],\r\n    itemsAgents: [],\r\n    loadingShips: false,\r\n    loadingPorts: false,\r\n    loadingPortAgents: false,\r\n    date: null,\r\n    tipoSituacaoEta: null,\r\n    tipoSituacaoEtb: null,\r\n  }),\r\n\r\n  methods: {\r\n    ...moduleShips.mapActions({ getAllShips: \"getAllSelect\" }),\r\n    ...modulePorts.mapActions({ getAllPorts: \"getAllSelect\" }),\r\n    ...moduleAgents.mapActions({ getAllAgents: \"getAllSelect\" }),\r\n    ...moduleShipTrips.mapActions({\r\n      getById: \"getById\",\r\n      getShipTripByShip: \"getShipTripByShip\",\r\n      create: \"create\",\r\n      update: \"update\",\r\n    }),\r\n    ...moduleCategory.mapActions({\r\n      getByType: \"getByType\",\r\n    }),\r\n\r\n    async getShips() {\r\n      this.loadingShips = true;\r\n      var response = await this.getAllShips();\r\n      response.data.result.items.forEach((element) => {\r\n        this.itemsShips.push({\r\n          value: element.id,\r\n          text: element.name,\r\n        });\r\n      });\r\n      this.loadingShips = false;\r\n    },\r\n\r\n    async getPorts() {\r\n      this.loadingPorts = true;\r\n      var response = await this.getAllPorts();\r\n      response.data.result.items.forEach((element) => {\r\n        this.itemsPorts.push({\r\n          value: element.id,\r\n          text: element.abbreviation + \" | \" + element.name,\r\n        });\r\n      });\r\n      this.loadingPorts = false;\r\n    },\r\n\r\n    async getAgents() {\r\n      this.loadingPortAgents = true;\r\n      var response = await this.getAllAgents();\r\n      response.data.result.items.forEach((element) => {\r\n        this.itemsAgents.push({\r\n          value: element.id,\r\n          text: element.name,\r\n        });\r\n      });\r\n      this.loadingPortAgents = false;\r\n    },\r\n\r\n    async submit() {\r\n      this.$refs.form.validate();\r\n      this.loadingBtnSave = true;\r\n      if (\r\n        !this.dataNewItem.intermediateStops ||\r\n        this.dataNewItem.intermediateStops.length == 0\r\n      ) {\r\n        this.errorAlertText = \"Obrigatório inserir a parada de origem\";\r\n        this.errorAlert = true;\r\n        setTimeout(() => {\r\n          this.errorAlert = false;\r\n        }, 5000);\r\n        this.loadingBtnSave = false;\r\n        return;\r\n      }\r\n\r\n      this.dataNewItem.intermediateStops.forEach((x) => {\r\n        if (!x.etaStatus || !x.etdStatus) return;\r\n        x.etaStatusId = x.etaStatus.id;\r\n        x.etdStatusId = x.etdStatus.id;\r\n        if (x.proformas) {\r\n          x.proformas.forEach((y) => {\r\n            if (!y.boardingGroup || y.boardingGroup.length == 0) return;\r\n            let boardingGroup = y.boardingGroup;\r\n            y.boardingGroup = [];\r\n            y.boardingGroup.push(boardingGroup);\r\n          });\r\n        }\r\n        if (\r\n          x.proformaShipTripIntermediateStop &&\r\n          x.proformaShipTripIntermediateStop.length > 0\r\n        ) {\r\n          x.proformaShipTripIntermediateStop.forEach((y) => {\r\n            y.boardingGroupId = y.boardingGroup ? y.boardingGroup.id : null;\r\n            var boardingGroup = y.boardingGroup;\r\n            y.proforma.boardingGroupId = boardingGroup\r\n              ? boardingGroup.id\r\n              : null;\r\n            y.proforma.boardingGroup = [];\r\n            y.proforma.boardingGroup.push(boardingGroup);\r\n          });\r\n        }\r\n      });\r\n      var result = \"\";\r\n      if (this.$route.params.id) {\r\n        this.dataSelectedItem = this.dataNewItem;\r\n        result = await this.update(this.dataNewItem);\r\n      } else result = await this.create(this.dataNewItem);\r\n      if (result.status == 200) {\r\n        this.$router.push(\"/home/viagensNavios\");\r\n      } else if (result.status != 200) {\r\n        this.loadingBtnSave = false;\r\n        this.$refs.form.validate();\r\n        this.errorAlertText = \"Informe os campos obrigatórios da nova parada!\";\r\n        this.errorAlert = true;\r\n        setTimeout(() => {\r\n          this.errorAlert = false;\r\n        }, 5000);\r\n        return;\r\n      }\r\n      this.loadingBtnSave = false;\r\n    },\r\n\r\n    async changeShipId(v) {\r\n      if (v) {\r\n        var result = await this.getShipTripByShip(v);\r\n        if (result.data.result) this.openModalAlert = true;\r\n      }\r\n    },\r\n\r\n    defineStatus() {\r\n      this.dataNewItem.status\r\n        ? (this.disabledIfStatusIsFalse = false)\r\n        : (this.disabledIfStatusIsFalse = true);\r\n    },\r\n\r\n    verifyIfIsEdit() {\r\n      if (this.$route.params.id != null) {\r\n        var id = this.$route.params.id;\r\n        this.getById(id).then((result) => {\r\n          this.dataNewItem = result.data.result;\r\n        });\r\n      }\r\n    },\r\n\r\n    async loadEtaSituationEta() {\r\n      var categoryList = await this.getByType(\r\n        tiposCategorias.enumTiposCategoriasRequest.situacaoETA\r\n      );\r\n      var filteredList = [];\r\n      categoryList.forEach((x) => {\r\n        filteredList.push({\r\n          value: x.id,\r\n          text: x.description,\r\n        });\r\n      });\r\n      this.tipoSituacaoEta = filteredList;\r\n    },\r\n\r\n    async loadEtaSituationEtb() {\r\n      var categoryList = await this.getByType(\r\n        tiposCategorias.enumTiposCategoriasRequest.situacaoETB\r\n      );\r\n      var filteredList = [];\r\n      categoryList.forEach((x) => {\r\n        filteredList.push({\r\n          value: x.id,\r\n          text: x.description,\r\n        });\r\n      });\r\n      this.tipoSituacaoEtb = filteredList;\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    if (this.hasPermission(this.$PermissionNames.permissionCategorySituationSee)) {\r\n      this.loadEtaSituationEta();\r\n      this.loadEtaSituationEtb();\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    success() {\r\n      if (this.success) this.$router.push({ path: `/home/viagensNavios` });\r\n    },\r\n\r\n    \"dataNewItem.status\"() {\r\n      this.defineStatus();\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    tipoSituacao() {\r\n      return this.$store.state.ModuleParadasIntermediarias.tipoSituacao;\r\n    },\r\n    editPermission() {\r\n      return this.hasPermission(this.$PermissionNames.permissionShipTripEdit);\r\n    },\r\n  },\r\n\r\n  created() {\r\n    if (this.hasPermission(this.$PermissionNames.permissionShipSee))\r\n      this.getShips();\r\n    \r\n    if (this.hasPermission(this.$PermissionNames.permissionPortSee))\r\n      this.getPorts();\r\n    \r\n    if (this.hasPermission(this.$PermissionNames.permissionNamedPortAgentSee))\r\n      this.getAgents();\r\n\r\n    this.dataNewItem.status = true;\r\n    this.verifyIfIsEdit();\r\n    // this.setChips();\r\n  },\r\n\r\n  mixins: [crudController({ store: \"ModuleViagensNavios\" }), validationRules],\r\n  components: { TopSection, ParadasCreateVue, DatePicker },\r\n};\r\n</script>\r\n\r\n<style>\r\n.containerTexto {\r\n  justify-content: left;\r\n  height: 20% !important;\r\n  width: 50% !important;\r\n}\r\n</style>\r\n"]}]}